(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"4c04":function(o,t,e){},"7a73":function(o,t,e){"use strict";e.r(t);var i=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("tribunales",{attrs:{preview:o.preview}})},a=[],s=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",[e("q-page",[e("q-input",{staticClass:"shadow-1",staticStyle:{background:"white",padding:"1em"},attrs:{debounce:600,placeholder:"Buscar"},model:{value:o.busqueda,callback:function(t){o.busqueda=t},expression:"busqueda"}}),e("div",{staticStyle:{padding:"1rem","margin-top":"10px",display:"flex","justify-content":"space-between","align-items":"center","flex-wrap":"wrap"}},[e("q-btn-group",{staticStyle:{"background-color":"white",margin:".5em"},attrs:{flat:"",push:""}},[e("q-btn",{attrs:{push:"",label:"Todo",outline:"t"===o.tipoBusqueda,color:"primary"},on:{click:function(t){o.tipoBusqueda="t"}}}),e("q-btn",{attrs:{push:"",label:"Movimientos",outline:"m"===o.tipoBusqueda,color:"primary"},on:{click:function(t){o.tipoBusqueda="m"}}}),e("q-btn",{attrs:{push:"",label:"Casos",outline:"c"===o.tipoBusqueda,color:"primary"},on:{click:function(t){o.tipoBusqueda="c"}}})],1),e("div",{staticStyle:{display:"flex","justify-content":"space-evenly","flex-wrap":"wrap"}},[e("q-checkbox",{staticStyle:{"margin-left":"10px"},attrs:{label:"Perentorios"},model:{value:o.verPerentorios,callback:function(t){o.verPerentorios=t},expression:"verPerentorios"}}),e("q-checkbox",{staticStyle:{"margin-left":"10px"},attrs:{label:"Gestión Estudio"},model:{value:o.verGestionEstudio,callback:function(t){o.verGestionEstudio=t},expression:"verGestionEstudio"}}),e("q-checkbox",{staticStyle:{"margin-left":"10px"},attrs:{label:"Gestión Externa"},model:{value:o.verExternos,callback:function(t){o.verExternos=t},expression:"verExternos"}}),e("q-checkbox",{staticStyle:{"margin-left":"10px"},attrs:{label:"Finalizados"},model:{value:o.verFinalizados,callback:function(t){o.verFinalizados=t},expression:"verFinalizados"}})],1)],1),0===o.Juzgados.length?e("div",[e("Loading")],1):e("div",o._l(o.computedJuzgados,(function(t){return e("q-expansion-item",{key:t.IdJuzgado,staticClass:"whitebg shadow-1",scopedSlots:o._u([{key:"header",fn:function(){return[e("q-item-section",{attrs:{avatar:""}},[e("q-icon",{attrs:{name:"adjust",color:"primary",size:"md"}})],1),e("q-item-section",[e("div",{staticStyle:{display:"flex","align-items":"center"}},[e("span",{staticStyle:{"font-weight":"700"}},[o._v(o._s(t.Juzgado))]),e("span",{staticStyle:{"margin-left":"0.5rem"}},[o._v("-")]),o.loadingCasos?e("span",{staticStyle:{"margin-left":"0.5rem"}},[o._v("Cargando casos...")]):e("span",{staticStyle:{"margin-left":"0.5rem"}},[o._v(o._s(o.casosJuzgado(t.IdJuzgado))+" "+o._s(1===o.casosJuzgado(t.IdJuzgado)?"Caso":"Casos"))])])])]},proxy:!0}],null,!0),model:{value:o.abrirColapsableJuzgado[t.IdJuzgado],callback:function(e){o.$set(o.abrirColapsableJuzgado,t.IdJuzgado,e)},expression:"abrirColapsableJuzgado[juzgado.IdJuzgado]"}},[0===o.Nominaciones.length?e("div",[e("Loading")],1):o._e(),e("div",o._l(o.filtrarNominaciones(t.IdJuzgado),(function(i){return e("q-expansion-item",{key:i.IdNominacion,scopedSlots:o._u([{key:"header",fn:function(){return[e("q-item-section",{attrs:{avatar:""}},[e("q-avatar",{attrs:{icon:"0"===i.Nominacion[0]?"filter_none":"filter_"+i.Nominacion[0],"text-color":"primary"}})],1),e("q-item-section",[e("span",[o._v(o._s(i.Nominacion))]),o.loadingCasos?e("span",[o._v("Cargando casos...")]):e("span",[o._v("("+o._s(o.casosNominacion(i.IdNominacion).length)+" "+o._s(1===o.casosNominacion(i.IdNominacion).length?"Caso":"Casos")+")")])])]},proxy:!0}],null,!0),model:{value:o.abrirColapsableNominacion[i.IdNominacion],callback:function(t){o.$set(o.abrirColapsableNominacion,i.IdNominacion,t)},expression:"abrirColapsableNominacion[nominacion.IdNominacion]"}},[0===o.Casos.length?e("div",[e("Loading")],1):o._e(),o._l(o.casosNominacion(i.IdNominacion),(function(t){return e("q-expansion-item",{key:t.IdCaso,staticClass:"expansion-caso",attrs:{icon:"description","expand-icon-toggle":""},scopedSlots:o._u([{key:"header",fn:function(){return[e("q-item-section",{attrs:{avatar:""},on:{click:function(e){return o.verCaso(t)}}},[e("q-avatar",{staticClass:"caso",attrs:{icon:"description",color:"primary","text-color":"white"}},[e("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[10,0]}},[o._v("Ver Caso")])],1)],1),e("q-item-section",[e("span",{staticStyle:{"font-size":"16px","font-weight":"700"}},[o._v(o._s(t.Caratula)+" | "+o._s(t.NroExpediente?"Expte: "+t.NroExpediente:"Sin expediente"))]),e("div",{staticStyle:{"max-height":"26px",overflow:"hidden","margin-top":"0.3rem"}},[e("q-select",{staticStyle:{width:"fit-content",background:"#D5D5D5","font-size":"12px","margin-top":"-7px",display:"flex","align-items":"flex-start"},attrs:{options:o.EstadosCaso,square:"",filled:"",dense:!0,"options-dense":!0},on:{input:function(e){return o.modificarEstadoCaso(t)}},model:{value:t.EstadoCaso,callback:function(e){o.$set(t,"EstadoCaso",e)},expression:"caso.EstadoCaso"}})],1)]),e("q-item-section",{attrs:{side:""}},[e("q-btn",{staticStyle:{"margin-left":"auto"},attrs:{icon:"add",flat:"",round:"",outline:"",size:"md"},on:{click:function(e){return o.altaMovimiento(t)}}},[e("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[10,0]}},[o._v("Nuevo Movimiento")])],1)],1)]},proxy:!0}],null,!0),model:{value:o.abrirColapsableCaso[t.IdCaso],callback:function(e){o.$set(o.abrirColapsableCaso,t.IdCaso,e)},expression:"abrirColapsableCaso[caso.IdCaso]"}},[t.SinMovimientos?e("div",[o._v("Este caso aún no posee movimientos.")]):o._e(),o._l(o.movimientoPerteneceCaso(t),(function(i){return e("TarjetaTribunales",{key:i.IdMovimientoCaso,staticStyle:{"margin-bottom":"0.6rem"},attrs:{movimiento:i,ultimosMovimientos:o.ultimosMovimientos(i).slice(0,3)},on:{mostrarObjetivos:function(t){return o.mostrarObjetivos(i)},realizarMovimiento:function(e){return o.realizarMovimiento(i,t.IdCaso)}}})})),t.ObjetivosSinMovs.length>0?e("div",{staticStyle:{display:"flex","align-items":"center","flex-wrap":"wrap",padding:"0 1rem 1rem 1rem"}},[e("q-icon",{attrs:{icon:"timeline"}}),e("h1",{staticStyle:{"font-size":"1.1rem","font-weight":"400"}},[o._v("Objetivos sin Movimientos:")]),o._l(o.objetivosNuevosSinMovimientos(t.ObjetivosSinMovs),(function(t){return e("q-chip",{key:t.IdObjetivo,staticStyle:{"margin-left":"1rem"},attrs:{color:"secondary"}},[o._v(o._s(t.Objetivo))])}))],2):o._e()],2)})),e("div"),o._l(o.casosSinMovPendientes(t,i),(function(t){return e("q-banner",{key:t.IdCaso,staticClass:"text-white caso-sin-pendiente",staticStyle:{margin:"1rem","box-shadow":"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",padding:"1.5rem"}},[e("div",{staticStyle:{display:"flex","justify-content":"space-between","font-size":"16px","font-weight":"900px"}},[e("span",{staticClass:"float-left"},[e("a",{staticStyle:{cursor:"pointer"},on:{click:function(e){return o.verCaso(t)}}},[e("strong"),o._v("\n                    "+o._s(t.Caratula)+" |\n                  ")]),e("strong"),o._v("\n                  Exp: "+o._s(t.NroExpediente?t.NroExpediente:"Sin Expediente")+"\n                ")]),e("q-btn",{attrs:{icon:"add",color:"white",rounded:"",flat:"",outline:""},on:{click:function(e){return o.altaMovimiento(t)}}},[e("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[o._v("Nuevo Movimiento")])],1)],1),e("div",{staticClass:"float-right"},[o._v(o._s(o.diasSinMovimientos(t)))])])}))],2)})),1)])})),1),o.modalCaso?e("q-dialog",{model:{value:o.modalCaso,callback:function(t){o.modalCaso=t},expression:"modalCaso"}},[e("q-card",[e("q-item",{staticStyle:{"background-color":"black"}},[e("span",{staticClass:"q-subheading",staticStyle:{color:"white"}},[o._v("Vista previa del caso")])]),o.modalCaso?e("TarjetaCaso",{attrs:{caso:o.casoVer,datos:o.datosCaso}}):o._e(),e("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-right":"40px"}},[e("q-btn",{attrs:{flat:"",color:"primary",label:"Cerrar"},on:{click:function(t){o.modalCaso=!1}}})],1)],1)],1):o._e(),o.modalObjetivos?e("q-dialog",{model:{value:o.modalObjetivos,callback:function(t){o.modalObjetivos=t},expression:"modalObjetivos"}},[e("q-card",[e("q-list",{attrs:{highlight:""}},[e("q-item-label",{staticClass:"q-subheading",staticStyle:{background:"black",color:"white"},attrs:{header:""}},[o._v('Objetivos del caso "'+o._s(o.movimientoMostrarObjetivos.Caso)+'"')]),o._l(o.filtrarObjetivos(),(function(t){return e("q-item",{key:t.IdObjetivo,staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[e("q-item-label",[o._v(o._s(t.Objetivo))]),e("div",[e("q-btn",{attrs:{icon:"edit",color:"primary",flat:"",rounded:"",outline:""},on:{click:function(e){return o.edicionObjetivo(t)}}},[e("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[o._v("Editar Objetivo")])],1),o.movimientoMostrarObjetivos.Objetivo!==t.Objetivo?e("q-btn",{staticStyle:{cursor:"pointer"},attrs:{icon:"add",color:"primary",round:"",size:"xs"},on:{click:function(e){return o.asociarObjetivo(t)}}},[e("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[o._v("Asociar Objetivo")])],1):o._e(),o.movimientoMostrarObjetivos.Objetivo===t.Objetivo?e("q-btn",{staticStyle:{cursor:"pointer"},attrs:{icon:"clear",round:"",size:"xs",color:"primary"},on:{click:function(e){return o.desasociarObjetivo(t)}}},[e("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[o._v("Desasociar Objetivo")])],1):o._e()],1)],1)}))],2),o.movimientoMostrarObjetivos.Objetivo?o._e():e("q-item",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[e("q-item-label",{staticClass:"text-primary"},[o._v("Nuevo Objetivo")]),e("q-btn",{staticStyle:{cursor:"pointer"},attrs:{icon:"add",color:"warning",round:"",size:"xs"},on:{click:function(t){o.modalNuevoObjetivo=!0}}})],1),e("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-right":"40px"}},[e("q-btn",{attrs:{flat:"",color:"accent",label:"Ver movimientos"},on:{click:function(t){o.modalMovimientosDeObjetivo=!0}}}),e("q-btn",{attrs:{flat:"",color:"primary",label:"Cerrar"},on:{click:function(t){o.modalObjetivos=!1}}})],1)],1)],1):o._e(),o.editarObjetivo?e("q-dialog",{model:{value:o.editarObjetivo,callback:function(t){o.editarObjetivo=t},expression:"editarObjetivo"}},[e("q-card",[e("q-item",{staticStyle:{"background-color":"black",display:"flex","align-items":"center",color:"white"}},[e("q-icon",{staticStyle:{"margin-right":"1rem"},attrs:{color:"white",name:"timeline",size:"sm"}}),e("span",{staticClass:"q-subheading"},[o._v("Editar Objetivo")])],1),e("q-separator"),e("q-item",[e("q-input",{staticStyle:{margin:"2rem"},attrs:{type:"textarea",rows:"1","max-height":50,label:"Objetivo"},model:{value:o.objetivoEditar.Objetivo,callback:function(t){o.$set(o.objetivoEditar,"Objetivo",t)},expression:"objetivoEditar.Objetivo"}})],1),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){return o.finalizarEdicionObjetivo()}}},[o._v("Guardar")]),e("q-btn",{attrs:{flat:""},on:{click:function(t){o.editarObjetivo=!1}}},[o._v("Cancelar")])],1)],1)],1):o._e(),o.modalMovimientosDeObjetivo?e("q-dialog",{model:{value:o.modalMovimientosDeObjetivo,callback:function(t){o.modalMovimientosDeObjetivo=t},expression:"modalMovimientosDeObjetivo"}},[e("q-card",[e("q-list",{attrs:{highlight:""}},[o.movimientoMostrarObjetivos.Objetivo?e("q-item",{staticStyle:{"background-color":"black"}},[e("span",{staticClass:"q-subheading",staticStyle:{color:"white"}},[o._v('Movimientos del objetivo "'+o._s(o.movimientoMostrarObjetivos.Objetivo)+'"')])]):e("q-item",{staticStyle:{"background-color":"black"}},[e("span",{staticClass:"q-subheading",staticStyle:{color:"white"}},[o._v("Movimientos sin objetivo asociado")])]),o._l(o.movimientosObjetivo(),(function(t){return e("q-item",{key:t.IdMovimientoCaso,staticStyle:{display:"flex","align-items":"center"}},[e("q-icon",{attrs:{name:"assignment",color:t.Color,size:"sm"}}),e("q-item-label",[o._v(o._s(t.Detalle))]),t.FechaRealizado?e("div",{staticStyle:{display:"flex","align-items":"center","flex-direction":"row","margin-left":"auto","justify-content":"space-between"}},[e("q-item-label",[o._v(o._s(o.diasRestantes(t,"realizado")))]),e("q-icon",{staticStyle:{"margin-left":"0.5rem"},attrs:{name:"check_circle",size:"sm",color:"positive"}})],1):t.FechaEsperada?e("div",{staticStyle:{display:"flex","align-items":"center","flex-direction":"row","margin-left":"auto","justify-content":"space-between"}},[o._v(o._s(o.parseDate(t.FechaEsperada)))]):o._e()],1)}))],2),e("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-right":"40px"}},[e("q-btn",{attrs:{flat:"",color:"primary",label:"Cerrar"},on:{click:function(t){o.modalMovimientosDeObjetivo=!1}}})],1)],1)],1):o._e(),o.modalNuevoObjetivo?e("q-dialog",{model:{value:o.modalNuevoObjetivo,callback:function(t){o.modalNuevoObjetivo=t},expression:"modalNuevoObjetivo"}},[e("q-card",[e("q-item",{staticStyle:{"background-color":"black",color:"white",display:"flex","align-items":"center"}},[e("q-icon",{staticStyle:{"margin-right":"1rem"},attrs:{color:"white",name:"timeline",size:"sm"}}),e("span",{staticClass:"q-subheading"},[o._v("Nuevo Objetivo")])],1),e("q-item",[e("q-input",{attrs:{label:"Nombre del objetivo"},model:{value:o.nuevoObjetivo.Objetivo,callback:function(t){o.$set(o.nuevoObjetivo,"Objetivo",t)},expression:"nuevoObjetivo.Objetivo"}})],1),e("q-card-actions",{attrs:{align:"end"}},[e("q-btn",{attrs:{color:"primary",label:"Aceptar"},on:{click:function(t){return o.asociarANuevoObjetivo()}}}),e("q-btn",{attrs:{flat:"",color:"primary",label:"Cancelar"},on:{click:function(t){o.modalNuevoObjetivo=!1}}})],1)],1)],1):o._e(),o.modalWhatsapp?e("q-dialog",{model:{value:o.modalWhatsapp,callback:function(t){o.modalWhatsapp=t},expression:"modalWhatsapp"}},[e("q-card",[e("q-item",{staticStyle:{"background-color":"#E8EAF6"}},[e("q-item-section",{attrs:{side:"",color:"primary",icon:"timeline"}}),e("span",{staticClass:"q-subheading"},[o._v("Enviar Whatsapp")])],1),e("q-item",{staticStyle:{display:"flex","flex-direction":"column"}},[e("q-input",{staticStyle:{width:"90%"},attrs:{label:"Numero",type:"textarea"},model:{value:o.whatsapp.Numero,callback:function(t){o.$set(o.whatsapp,"Numero",t)},expression:"whatsapp.Numero"}}),e("q-input",{staticStyle:{width:"90%"},attrs:{label:"Mensaje",type:"textarea",rows:"6"},model:{value:o.whatsapp.Contenido,callback:function(t){o.$set(o.whatsapp,"Contenido",t)},expression:"whatsapp.Contenido"}})],1),e("q-card-actions",{attrs:{align:"end"}},[e("q-btn",{attrs:{flat:"",color:"primary",label:"Aceptar"},on:{click:function(t){return o.enviarWhatsapp()}}}),e("q-btn",{attrs:{flat:"",color:"primary",label:"Cancelar"},on:{click:function(t){o.modalWhatsapp=!1}}})],1)],1)],1):o._e(),o.modalAlta?e("q-dialog",{attrs:{"no-backdrop-dismiss":"","no-esc-dismiss":""},model:{value:o.modalAlta,callback:function(t){o.modalAlta=t},expression:"modalAlta"}},[o.modalAlta?e("NuevoMovimiento",{attrs:{movimientoAlta:this.movimientoAlta,Casos:this.Casos,caso:this.caso,IdCaso:this.caso.IdCaso},on:{cancelarAlta:o.cancelarAlta,guardarmovimiento:o.guardarMovimiento,nuevochat:o.nuevoChat,enviarmensaje:o.enviarMensaje}}):o._e()],1):o._e()],1)],1)},n=[],r=(e("6762"),e("2fdb"),e("f751"),e("a481"),e("7514"),e("28a5"),e("8daa")),l=e("2ef0"),c=e("2a19"),d=e("24e8"),u=e("7a13"),v=e("1f85"),m=e("3a5e"),p=e("7bc5"),b=e("b628"),f={name:"TribunalesComponent",components:{TarjetaCaso:u["a"],TarjetaTribunales:v["a"],QDialog:d["a"],Loading:m["a"],NuevoMovimiento:p["a"]},props:{preview:{type:String,required:!1,default:""},individual:{type:Boolean,default:!1}},data:function(){return{objetivoEditar:{},editarObjetivo:!1,busqueda:"",tipoBusqueda:"t",verPerentorios:!0,verGestionEstudio:!0,verExternos:!0,verFinalizados:!0,UsuarioResponsable:"",estado:"A",alta:!1,altaFinalizada:!1,Juzgados:[],Nominaciones:[],Casos:[],CasosPendientes:[],caso:{},Movimientos:[],MovimientosPendientes:[],movimientoEditar:{},movimientoAlta:{},movimientoMostrarObjetivos:{},casoVer:{},modalCaso:!1,modalObjetivos:!1,modalNuevoObjetivo:!1,modalEditar:!1,modalAlta:!1,modalMovimientosDeObjetivo:!1,modalWhatsapp:!1,Multimedia:[],loadingCasos:!0,cantidad:15,offset:10,popover:!1,idCasoRecibido:0,Responsable:{},IdResponsable:null,abrirColapsableJuzgado:[],abrirColapsableNominacion:[],abrirColapsableCaso:[],colorMostrar:"",objetivosMostrar:[],nuevoObjetivo:{},nuevoMovimiento:{IdUsuario:0,TiposMov:[],TipoMov:0,UsuariosEstudio:[],IdEstudio:0,Detalle:"",FechaEsperada:"",FechaAlta:"",colorSeleccionado:{label:"Gestión Estudio",value:"primary"},Caso:0,Objetivo:"",Responsable:{}},coloresDocDoc:[{label:"Perentorio",value:"negative"},{label:"Gestión Estudio",value:"primary"},{label:"Gestión Externa",value:"warning"},{label:"Finalizado",value:"positive"}],whatsapp:{Numero:"",Contenido:""},EstadosCaso:[],objetivosCreadosSinMovimientos:[]}},created:function(){var o=this;switch(this.preview){case 1:}var t=6e4*(new Date).getTimezoneOffset();this.nuevoMovimiento.FechaAlta=this.formatearFecha(new Date(Date.now()-t).toISOString().slice(0,-1)).split(" ")[0].split("-").reverse().join("-");var e=b["a"].UsuarioLogueado;this.IdResponsable=e.IdUsuario,this.nuevoMovimiento.Responsable={label:"".concat(e.Apellidos,", ").concat(e.Nombres),value:e.IdUsuario},this.IdEstudio=e.IdEstudio,r["a"].Get("/estudios/".concat(e.IdEstudio,"/usuarios"),{},(function(t){t.Error||(o.UsuariosEstudio=t)})),r["a"].Get("/estudios/".concat(e.IdEstudio,"/estados-caso"),{},(function(t){t.Error||t.forEach((function(t){o.EstadosCaso.push({label:t.EstadoCaso,value:t.IdEstadoCaso})}))})),r["a"].Get("/juzgados?IncluyeBajas=N",{},(function(t){if(t.Error)c["a"].create(t.Error);else{o.Juzgados=t;var e=[];o.Juzgados.forEach((function(o){e.push(o.IdJuzgado)})),r["a"].Get("/nominaciones?IdsJuzgado=".concat(JSON.stringify(e),"&IncluyeBajas=N"),{},(function(t){t.Error?c["a"].create(t.Error):Object(l["each"])(t,(function(t){o.Nominaciones=o.Nominaciones.concat(t)}))})),r["a"].Get("/movimientos/vista-tribunales",{},(function(t){if(!t.Error){var e=[],i=[];t.forEach((function(t){var a=o.EstadosCaso.find((function(o){return o.value===t.IdEstadoCaso}));t.EstadoCaso=a,t.ObjetivosSinMovs=[],i.push(t.IdCaso);var s=!1;o.Casos.indexOf(t)<0&&o.CasosPendientes.indexOf(t)<0&&"R"!==t.Estado&&(t.Movimientos=JSON.parse(t.Movimientos),t.Movimientos.length>0?t.SinMovimientos=!1:t.SinMovimientos=!0,t.Movimientos.forEach((function(i){i.Detalle=i.Detalle.replace(/<\s*\/?\s*br\s*.*?>/g,"\n"),o.diasRestantes(i,"vencimiento")<1&&(i.ColorMostrar="negative"),"N"===t.Tipo&&(i.Mostrar=!0),i.IdUsuario=i.IdUsuarioResponsable,i.CasoCompleto=t,i.FechaRealizado||(o.MovimientosPendientes.push(i),e.push(i.Objetivo),s=!0),o.Movimientos.push(i)})),o.Casos.push(t),s&&o.CasosPendientes.push(t))})),o.loadingCasos=!1,r["a"].Get("/objetivos?IdsCaso=[".concat(i,"]"),{},(function(t){t.Error||o.Casos.map((function(o){o.Objetivos=t[o.IdCaso],t[o.IdCaso].forEach((function(t){-1===e.indexOf(t.Objetivo)&&o.ObjetivosSinMovs.push(t)}))}))}))}}))}}))},computed:{computedJuzgados:function(){return"1"===this.preview?this.Juzgados.filter((function(o){return"J"===o.ModoGestion})):"2"===this.preview?this.Juzgados.filter((function(o){return"E"===o.ModoGestion})):this.Juzgados},ObjetivosSinMovimientos:function(o){return o.concat(this.objetivosCreadosSinMovimientos)},opcionesTipoMov:function(){var o=[];return this.modalAlta&&this.nuevoMovimiento.TiposMov&&this.nuevoMovimiento.TiposMov.length&&(o=this.nuevoMovimiento.TiposMov.map((function(o){return{label:o.TipoMovimiento,value:o.IdTipoMov}}))),o},opcionesResponsable:function(){var o=[];return this.modalAlta&&this.nuevoMovimiento.UsuariosEstudio&&this.nuevoMovimiento.UsuariosEstudio.length&&(o=this.nuevoMovimiento.UsuariosEstudio.map((function(o){return{label:"".concat(o.Apellidos,", ").concat(o.Nombres),value:o.IdUsuario}}))),o}},methods:{edicionObjetivo:function(o){this.objetivoEditar=o,this.editarObjetivo=!0},finalizarEdicionObjetivo:function(){var o=this,t={Objetivo:this.objetivoEditar.Objetivo};r["a"].Put("/objetivos/".concat(this.objetivoEditar.IdObjetivo),t,(function(t){t.Error?c["a"].create(t.Error):(Object.defineProperty(o.filtrarObjetivos().filter((function(t){return t.IdObjetivo===o.objetivoEditar.IdObjetivo})),"Objetivo",{value:o.objetivoEditar.Objetivo}),o.editarObjetivo=!1,o.objetivoEditar={})}))},objetivosNuevosSinMovimientos:function(o){return o.concat(this.objetivosCreadosSinMovimientos)},modificarEstadoCaso:function(o){var t={IdJuzgado:o.IdJuzgado,IdNominacion:o.IdNominacion,IdEstadoCaso:o.EstadoCaso.value,Caratula:o.Caratula,NroExpediente:o.NroExpediente,Carpeta:o.Carpeta,Observaciones:o.Observaciones};r["a"].Put("/casos/".concat(o.IdCaso),t,(function(o){o.Error&&c["a"].create(o.Error)}))},casosJuzgado:function(o){var t=this,e=0;return this.filtrarNominaciones(o).forEach((function(o){e+=t.casosNominacion(o.IdNominacion).length})),e},formatearFecha:function(o){return o?o.split("T")[0]:null},parseDateTime:function(o){if(o){var t=o.split(" "),e=t[0].split("-"),i=t[1].split(":");return"".concat(e[2],"/").concat(e[1],"/").concat(e[0]," ").concat(i[0],":").concat(i[1])}return null},parseDate:function(o){return o?this.parseDateTime(o).split(" ")[0]:null},verCaso:function(o){var t=this;this.casoVer=o,this.casoVer.IdEstadoCaso&&r["a"].Get("/estados-caso/".concat(this.casoVer.IdEstadoCaso),{},(function(o){o.Error?c["a"].create(o.Error):t.casoVer.EstadoCaso=o.EstadoCaso})),r["a"].Get("/tipos-caso/".concat(this.casoVer.IdTipoCaso),{},(function(o){o.Error?c["a"].create(o.Error):(t.casoVer.TipoCaso=o.TipoCaso,t.modalCaso=!0)})),r["a"].Get("/casos/".concat(this.casoVer.IdCaso),{},(function(o){o.Error?c["a"].create(o.Error):(t.casoVer.PersonasCaso=o.PersonasCaso,t.modalCaso=!0)}))},realizarMovimiento:function(o,t){var e=this;r["a"].Put("/movimientos/".concat(o.IdMovimientoCaso,"/realizar"),{},(function(i){if(i.Error)c["a"].create(i.Error);else{e.MovimientosPendientes.splice(e.MovimientosPendientes.indexOf(o),1);var a=!1;e.MovimientosPendientes.forEach((function(t){t.Caso===o.Caso&&t.IdMovimientoCaso!==o.IdMovimientoCaso&&(a=!0)})),!1===a&&e.CasosPendientes.forEach((function(t){t.Caratula===o.Caso&&(t.Tipo="N",e.CasosPendientes.splice(e.CasosPendientes.indexOf(t),1))})),e.$q.notify({color:"green",message:"Se marcó como realizado el movimiento '".concat(o.Detalle,"'")}),e.movimientoAlta=o,e.caso.IdCaso=t,e.altaMovimiento(null)}}))},altaMovimiento:function(o){var t=this;this.modalAlta=!0,o&&(o.SinMovimientos=!1,this.movimientoAlta.Caso=o.Caratula,this.alta=!0,this.caso=o,this.nuevoMovimiento.Objetivo=this.movimientoAlta.Objetivo),this.nuevoMovimiento.IdEstudio=b["a"].UsuarioLogueado.IdEstudio,r["a"].Get("/estudios/".concat(this.nuevoMovimiento.IdEstudio,"/usuarios"),{},(function(o){o.Error?t.$q.notify(o.Error):o.length&&(t.nuevoMovimiento.UsuariosEstudio=o)})),r["a"].Get("/estudios/".concat(this.nuevoMovimiento.IdEstudio,"/tipos-movimiento"),{},(function(o){o.Error?t.$q.notify(o.Error):o.length?(t.nuevoMovimiento.TiposMov=o,t.nuevoMovimiento.TipoMov={label:o[0].TipoMovimiento,value:o[0].IdTipoMov}):t.$q.notify("No hay tipos de movimiento disponibles para este estudio")}))},guardarMovimiento:function(o){var t=this;if(this.modalAlta=!1,this.altaFinalizada=!0,this.alta=!1,this.Casos.forEach((function(e){t.movimientoAlta.Caso===e.Caratula&&(o.IdCaso=e.IdCaso,o.NroExpediente=e.NroExpediente)})),this.caso&&this.CasosPendientes.indexOf(this.caso)- -1===0){var e=Object.assign({},this.caso);this.CasosPendientes.push(e)}r["a"].Get("/casos/".concat(o.IdCaso,"/movimientos"),{},(function(e){if(e.Error)t.$q.notify(e.Error);else{var i=!0;e.forEach((function(e){if(e.Detalle===o.Detalle&&(o.IdMovimientoCaso=e.IdMovimientoCaso,!0===i&&!o.FechaRealizado))if(t.movimientoAlta.Objetivo){var a={};t.movimientoAlta.CasoCompleto.Objetivos.forEach((function(o){o.Objetivo===t.movimientoAlta.Objetivo&&(a=o)})),r["a"].Post("/movimientos/".concat(o.IdMovimientoCaso,"/asociar-objetivo/").concat(a.IdObjetivo),{},(function(e){o.Objetivo=a.Objetivo,t.MovimientosPendientes.push(o),t.Movimientos.push(o),i=!1}))}else t.MovimientosPendientes.push(o),t.Movimientos.push(o),i=!1})),t.nuevoMovimiento.IdUsuario=0,t.nuevoMovimiento.TiposMov=[],t.nuevoMovimiento.TipoMov=0,t.nuevoMovimiento.UsuariosEstudio=[],t.nuevoMovimiento.IdEstudio=0,t.nuevoMovimiento.IdResponsable=0,t.nuevoMovimiento.Detalle="",t.nuevoMovimiento.FechaAlta=(new Date).toISOString(),t.nuevoMovimiento.FechaEsperada=null,t.nuevoMovimiento.colorSeleccionado={label:"Gestión Estudio",value:"primary"},t.nuevoMovimiento.Caso=0,t.movimientoAlta={},t.caso={}}}))},filtrarNominaciones:function(o){var t=[];return this.Nominaciones.forEach((function(e){e.IdJuzgado===o&&-1===t.indexOf(e)&&t.push(e)})),t},ultimosMovimientos:function(o){var t=[];return this.Movimientos.forEach((function(e){e.Objetivo===o.Objetivo&&e.Caso===o.Caso&&e.FechaRealizado&&t.push(e)})),t.sort((function(o,t){return o.FechaRealizado>t.FechaRealizado?-1:o.FechaRealizado<t.FechaRealizado?1:0}))},movimientosObjetivo:function(){var o=this.ultimosMovimientos(this.movimientoMostrarObjetivos);return o},casosNominacion:function(o){var t=this,e=[];return this.CasosPendientes.forEach((function(i){var a=!1;i.IdNominacion===o&&"A"===i.Estado&&(t.busqueda?"c"===t.tipoBusqueda||"t"===t.tipoBusqueda?(i.Caratula.toLowerCase().includes(t.busqueda.toLowerCase())||t.busqueda.length>=3&&i.NroExpediente.includes(t.busqueda)?a=!0:"t"===t.tipoBusqueda&&i.Movimientos.forEach((function(o){o.Detalle.toLowerCase().includes(t.busqueda.toLowerCase())&&(t.verPerentorios&&"negative"===o.Color||t.verExternos&&"warning"===o.Color||t.verGestionEstudio&&"primary"===o.Color||t.verFinalizados&&"positive"===o.Color)&&(a=!0)})),a&&(t.abrirColapsableJuzgado[i.IdJuzgado]=!0,t.abrirColapsableNominacion[i.IdNominacion]=!0,e.push(i))):"m"===t.tipoBusqueda&&(i.Movimientos.forEach((function(o){o.Detalle.toLowerCase().includes(t.busqueda.toLowerCase())&&(a=!0)})),a&&(e.push(i),t.abrirColapsableJuzgado[i.IdJuzgado]=!0,t.abrirColapsableNominacion[i.IdNominacion]=!0)):e.push(i))})),e.sort((function(o,t){return o.Caratula>t.Caratula?1:o.Caratula<t.Caratula?-1:0}))},movimientoPerteneceCaso:function(o){var t=this,e=[];return this.MovimientosPendientes.forEach((function(i){i.CasoCompleto.IdCaso===o.IdCaso&&"A"===o.Estado&&(i.NroExpediente=o.NroExpediente,i.FechaRealizado||i.Mostrar||("negative"===i.Color&&(i.Orden=1),"primary"===i.Color&&(i.Orden=2),"warning"===i.Color&&(i.Orden=3),t.busqueda?"m"===t.tipoBusqueda||"t"===t.tipoBusqueda?(i.Detalle.toLowerCase().includes(t.busqueda.toLowerCase())||i.Caso.toLowerCase().includes(t.busqueda.toLowerCase()))&&(t.verPerentorios&&"negative"===i.Color||t.verExternos&&"warning"===i.Color||t.verGestionEstudio&&"primary"===i.Color||t.verFinalizados&&"positive"===i.Color)&&e.push(i):i.Caso.toLowerCase().includes(t.busqueda.toLowerCase())&&(t.verPerentorios&&"negative"===i.Color||t.verExternos&&"warning"===i.Color||t.verGestionEstudio&&"primary"===i.Color||t.verFinalizados&&"positive"===i.Color)&&e.push(i):(t.verPerentorios&&"negative"===i.Color||t.verExternos&&"warning"===i.Color||t.verGestionEstudio&&"primary"===i.Color||t.verFinalizados&&"positive"===i.Color)&&e.push(i)))})),e.sort((function(o,t){return"positive"===o.Color?1:"positive"===t.Color?-1:o.Objetivo||t.Objetivo?o.Objetivo?t.Objetivo?o.Objetivo>t.Objetivo?1:o.Objetivo<t.Objetivo?-1:o.Orden>t.Orden?1:o.Orden<t.Orden?-1:0:-1:1:o.Orden>t.Orden?1:o.Orden<t.Orden?-1:0}))},factoryFn:function(){return{url:"https://io.docdoc.com.ar/api/multimedia",method:"POST",headers:[{name:"Authorization",value:"Bearer ".concat(b["a"].Token)}]}},uploadedFile:function(o){for(var t=o.files,e=o.xhr,i=JSON.parse(e.response),a=0;a<t.length;a++)this.Multimedia.push({Url:i.Urls[0],Tipo:t[a].type.substring(0,1).toUpperCase()})},casosSinMovPendientes:function(o,t){var e=this,i=[];return this.Casos.forEach((function(a){"N"===a.Tipo&&a.Juzgado===o.Juzgado&&a.Nominacion===t.Nominacion&&(e.busqueda?"c"!==e.tipoBusqueda&&"t"!==e.tipoBusqueda||(a.Caratula.toLowerCase().includes(e.busqueda.toLowerCase())||e.busqueda.length>=3&&a.NroExpediente.includes(e.busqueda))&&(e.abrirColapsableJuzgado[a.IdJuzgado]=!0,e.abrirColapsableNominacion[a.IdNominacion]=!0,i.push(a)):i.push(a),a.IdCaso===e.nuevoMovimiento.IdCaso&&e.altaFinalizada&&(e.altaFinalizada=!1,i.splice(a,1),e.Casos[e.Casos.indexOf(a)].Tipo="S"))})),i.sort((function(o,t){return o.Caratula>t.Caratula?1:o.Caratula<t.Caratula?-1:0}))},diasRestantes:function(o,t){if(!o.FechaEsperada&&"vencimiento"===t)return"-";this.fecha2=new Date;var e="",i="",a="";"vencimiento"===t?(e=o.FechaEsperada.split("-")[0],i=o.FechaEsperada.split("-")[1]-1,a=o.FechaEsperada.split("-")[2].split(" ")[0]-1):"creacion"===t?(e=o.FechaAlta.split("-")[0],i=o.FechaAlta.split("-")[1]-1,a=o.FechaAlta.split("-")[2].split(" ")[0]-1):o.FechaRealizado&&(e=o.FechaRealizado.split("-")[0],i=o.FechaRealizado.split("-")[1]-1,a=o.FechaRealizado.split("-")[2].split(" ")[0]-1),this.fecha2.setMonth(i),this.fecha2.setFullYear(e),this.fecha2.setDate(a),this.hoy=new Date;var s=Math.ceil((this.fecha2.getTime()-this.hoy.getTime())/864e5)+1;return-1*s},diasSinMovimientos:function(o){this.fecha2=new Date;var t="",e="",i="";this.hoy=new Date,t=o.FechaAlta.split("-")[0],e=o.FechaAlta.split("-")[1]-1,i=o.FechaAlta.split("-")[2].split(" ")[0],this.fecha2.setMonth(e),this.fecha2.setFullYear(t),this.fecha2.setDate(i);var a=Math.ceil((this.hoy.getTime()-this.fecha2.getTime())/864e5);return 0===a?"Sin movimientos desde hoy":"Sin movimientos hace "+a+" días"},mostrarObjetivos:function(o){var t=this;this.Casos.forEach((function(e){e.IdCaso===o.CasoCompleto.IdCaso&&(t.modalObjetivos=!0,t.movimientoMostrarObjetivos=o,t.objetivosMostrar=e.Objetivos)}))},filtrarObjetivos:function(){var o=this,t=[];return this.objetivosMostrar.forEach((function(e){o.movimientoMostrarObjetivos.Objetivo?e.Objetivo===o.movimientoMostrarObjetivos.Objetivo&&t.push(e):t.push(e)})),t},asociarObjetivo:function(o){var t=this;r["a"].Post("/movimientos/".concat(this.movimientoMostrarObjetivos["IdMovimientoCaso"],"/asociar-objetivo/").concat(o.IdObjetivo),{},(function(e){t.movimientoMostrarObjetivos.Objetivo=o.Objetivo,t.modalObjetivos=!1}))},desasociarObjetivo:function(o){var t=this;r["a"].Put("/movimientos/".concat(this.movimientoMostrarObjetivos["IdMovimientoCaso"],"/desasociar-objetivo/").concat(o.IdObjetivo),{},(function(o){o.Error?c["a"].create(o.Error):t.movimientoMostrarObjetivos.Objetivo=null,t.modalObjetivos=!1}))},asociarANuevoObjetivo:function(){var o=this;this.nuevoObjetivo.IdCaso=this.movimientoMostrarObjetivos.CasoCompleto.IdCaso,r["a"].Post("/objetivos",this.nuevoObjetivo,(function(t){t.Error?o.$q.notify(t.Error):(o.objetivosMostrar.push(Object.assign({},o.nuevoObjetivo)),o.objetivosCreadosSinMovimientos.push({Objetivo:o.nuevoObjetivo.Objetivo}),o.modalNuevoObjetivo=!1,r["a"].Post("/movimientos/".concat(o.movimientoMostrarObjetivos["IdMovimientoCaso"],"/asociar-objetivo/").concat(t.IdObjetivo),{},(function(t){t.Error?o.$q.notify(t.Error):(o.movimientoMostrarObjetivos.Objetivo=o.nuevoObjetivo.Objetivo,o.nuevoObjetivo.Objetivo="")})))}))},enviarWhatsapp:function(){var o=this;r["a"].Post("/mensajes",this.whatsapp,(function(t){t.Error?o.$q.notify(t.Error):(o.modalWhatsapp=!1,o.$q.notify({color:"green",message:"El mensaje fue enviado satisfactoriamente"}))}))},cancelarAlta:function(){this.modalAlta=!1,this.nuevoMovimiento={IdUsuario:0,TiposMov:[],TipoMov:0,UsuariosEstudio:[],IdEstudio:0,Detalle:"",FechaEsperada:"",FechaAlta:"",colorSeleccionado:{label:"Gestión Estudio",value:"primary"},Caso:0,Objetivo:"",Responsable:{}}},enviarMensaje:function(o){r["a"].Post("/mensajes/enviar",o,(function(t){if(t.Error)c["a"].create("Falló al comunicar el movimiento. Razon: "+t.Error);else{c["a"].create("Movimiento comunicado correctamente");var e=t.IdMensaje;r["a"].Post("/chats/".concat(o.IdChat,"/actualizar"),{IdUltimoLeido:e},(function(o){o.Error&&c["a"].create("Falló al actualizar el ultimo mensaje leído. Razon:"+o.Error)}))}}))},nuevoChat:function(o,t){r["a"].Post("/chats/crear",o,(function(o){o.Error?c["a"].create("Falló al comunicar el movimiento. Razon: "+o.Error):(c["a"].create("Nuevo chat creado!"),t.IdChat=o.IdChat,r["a"].Post("/mensajes/enviar",t,(function(o){if(o.Error)c["a"].create("Falló al comunicar el movimiento. Razon: "+o.Error);else{c["a"].create("Movimiento comunicado correctamente");var e=o.IdMensaje;r["a"].Post("/chats/".concat(t.IdChat,"/actualizar"),{IdUltimoLeido:e},(function(o){o.Error&&c["a"].create("Falló al actualizar el ultimo mensaje leído. Razon:"+o.Error)}))}})))}))}}},h=f,C=(e("c48f"),e("2877")),j=Object(C["a"])(h,s,n,!1,null,null,null),g=j.exports,O={name:"TribunalesHome",props:{preview:{type:String,required:!1,default:""}},components:{Tribunales:g}},E=O,M=Object(C["a"])(E,i,a,!1,null,null,null);t["default"]=M.exports},c48f:function(o,t,e){"use strict";var i=e("4c04"),a=e.n(i);a.a}}]);