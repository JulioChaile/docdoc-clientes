(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{"118a":function(e,a,o){},"55a3":function(e,a,o){"use strict";var t=o("118a"),i=o.n(t);i.a},bb14:function(e,a,o){"use strict";o.r(a);var t=function(){var e=this,a=e.$createElement,o=e._self._c||a;return o("q-layout",{staticStyle:{padding:"0em 2em 0em 2em","margin-top":"1em","margin-bottom":"3em"}},[o("FiltrosMediaciones",{attrs:{mostrar:e.verFiltros,Grilla:e.Grilla,Bonos:e.Bonos,Beneficios:e.Beneficios,Origenes:e.Origenes,TiposCaso:e.TiposCaso,Estados:e.Estados,EstadosCP:e.EstadosCP,EstadosDoc:e.EstadosDoc,EstadosHC:e.EstadosHC,Orden:e.Orden},on:{seleccionarFiltro:e.seleccionarFiltro,ordenar:e.ordenar}}),o("q-page-container",[o("div",{staticClass:"shadow-1",staticStyle:{background:"white",padding:"1em 1em 1em 1em"}},[o("div",[e._v("\n        Opciones:\n        "),o("q-toggle",{attrs:{label:"Ver Filtros"},model:{value:e.verFiltros,callback:function(a){e.verFiltros=a},expression:"verFiltros"}}),o("q-toggle",{attrs:{label:"Agrupar"},model:{value:e.agrupar,callback:function(a){e.agrupar=a},expression:"agrupar"}}),o("q-toggle",{attrs:{label:"Causa Penal"},on:{input:e.cambiarModo},model:{value:e.causaPenal,callback:function(a){e.causaPenal=a},expression:"causaPenal"}})],1),o("q-separator",{attrs:{spaced:""}}),e.loading?o("div",[o("Loading")],1):o("MediacionesGrilla",{attrs:{Mediaciones:e.ArrayMediaciones,Grilla:e.GrillaSeleccionados},on:{altaMediacion:e.altaMediacion}})],1)])],1)},i=[],n=(o("6762"),o("2fdb"),o("20d6"),o("8daa")),s=o("3a5e"),c=function(){var e=this,a=e.$createElement,o=e._self._c||a;return o("div",[o("q-banner",{staticClass:"bg-grey-3 text-black inner-shadow",style:"margin-top:.2em; margin-bottom:.2em; padding: 5px; width: 100%",attrs:{inline:"true"}},[o("div",{staticClass:"row text-center"},[e.Ver.Cliente?o("span",{staticClass:"col self-center"},[e._v("Cliente")]):e._e(),e.Ver.Estado?o("span",{staticClass:"col self-center"},[e._v("Estado de Ambito de Gestion")]):e._e(),e.Ver.Mediador?o("span",{staticClass:"col self-center"},[e._v("Mediador")]):e._e(),e.Ver.UltMov?o("span",{staticClass:"col self-center"},[e._v("Ultimo Movimiento")]):e._e(),e.Ver.TipoCaso?o("span",{staticClass:"col self-center"},[e._v("Tipo de Caso")]):e._e(),e.Ver.Origen?o("span",{staticClass:"col self-center"},[e._v("Origen")]):e._e(),e.Ver.Bono?o("span",{staticClass:"col self-center"},[e._v("Bono")]):e._e(),e.Ver.FechaBono?o("span",{staticClass:"col self-center"},[e._v("Fecha Bono")]):e._e(),e.Ver.Beneficio?o("span",{staticClass:"col self-center"},[e._v("Beneficio")]):e._e(),e.Ver.FechaPresentado?o("span",{staticClass:"col self-center"},[e._v("Fecha Presentado")]):e._e(),e.Ver.FechaProximaAudiencia?o("span",{staticClass:"col self-center"},[e._v("Fecha Proxima Audiencia")]):e._e(),e.Ver.Legajo?o("span",{staticClass:"col self-center"},[e._v("Legajo")]):e._e(),e.Ver.CausaPenal?o("span",{staticClass:"col self-center"},[e._v("Causa Penal")]):e._e(),e.Ver.Doc?o("span",{staticClass:"col self-center"},[e._v("Documentacion")]):e._e(),e.Ver.NroExpCP?o("span",{staticClass:"col self-center"},[e._v("Nro Exp. Causa Penal")]):e._e(),e.Ver.Radicacion?o("span",{staticClass:"col self-center"},[e._v("Radicacion")]):e._e(),e.Ver.Comisaria?o("span",{staticClass:"col self-center"},[e._v("Comisaria")]):e._e(),e.Ver.HistoriaClinica?o("span",{staticClass:"col self-center"},[e._v("Historia Clínica")]):e._e()])]),e._l(e.Mediaciones,(function(a,t){return o("div",{key:t+"g"},[0===a.length?o("h6",{staticClass:"flex flex-center",staticStyle:{"text-align":"center"}},[e._v("\n      No existen casos que coincidan con el criterio de busqueda\n    ")]):e._l(a,(function(a){return o("div",{key:a.IdMediacion},[o("q-banner",{staticClass:"bg-secondary text-white inner-shadow",style:"margin-top:.2em; padding: 5px; width: 100%"},[o("div",{staticClass:"row text-center bg-secondary text-white inner-shadow",staticStyle:{cursor:"pointer","margin-top":".2em",padding:"0",width:"100%"},on:{click:function(o){return e.abrirMediacion(a)}}},[e.Ver.Cliente?o("div",{staticClass:"col self-center text-center",on:{click:function(o){return e.abrirCaso(a.IdCaso)}}},[o("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Ver Caso")]),e._v("\n            "+e._s(a.Caratula?a.Caratula:"Sin caratula")+"\n          ")],1):e._e(),e.Ver.Estado?o("div",{staticClass:"col self-center text-center"},[o("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Estado de la Mediacion")]),e._v("\n            "+e._s(a.EstadoAmbitoGestion?a.EstadoAmbitoGestion:"Sin estado asignado")+"\n            "),o("br"),e._v("\n            Hace "+e._s(e.diasCambioEstado(a.FechaEstado))+" días\n          ")],1):e._e(),e.Ver.Mediador?o("div",{staticClass:"col self-center text-center"},[o("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Mediador")]),e._v("\n            "+e._s(a.NombreMediador?a.NombreMediador:"Sin mediador sorteado")+"\n          ")],1):e._e(),e.Ver.UltMov?o("div",{staticClass:"col self-center text-center",on:{click:function(o){return e.editarMovimiento(a.UltimoMovimiento,a.Caratula)}}},[o("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Editar Movimiento")]),e._v("\n            "+e._s(a.UltimoMovimiento?a.UltimoMovimiento.Detalle:"Sin movimientos cargados")+"\n          ")],1):e._e(),e.Ver.TipoCaso?o("div",{staticClass:"col self-center text-center"},[o("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Tipo de Caso")]),e._v("\n            "+e._s(a.TipoCaso)+"\n          ")],1):e._e(),e.Ver.Origen?o("div",{staticClass:"col self-center text-center"},[o("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Origen")]),e._v("\n            "+e._s(a.Origen||"Sin origen asignado")+"\n          ")],1):e._e(),e.Ver.Bono?o("div",{staticClass:"col self-center text-center"},[o("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Bono")]),o("span",{class:a.ColorBono?"text-"+a.ColorBono:"",staticStyle:{"font-weight":"bold"}},[e._v("\n              "+e._s(a.Bono?a.Bono:"Sin datos")+"\n            ")])],1):e._e(),e.Ver.FechaBono?o("div",{staticClass:"col self-center text-center"},[o("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Fecha Bono")]),e._v("\n            "+e._s(a.FechaBonos?a.FechaBonos.split(" ")[0]:"Sin fecha asignada")+"\n          ")],1):e._e(),e.Ver.Beneficio?o("div",{staticClass:"col self-center text-center"},[o("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Beneficio")]),e._v("\n            "+e._s(a.Beneficio?a.Beneficio:"Sin datos")+"\n          ")],1):e._e(),e.Ver.FechaPresentado?o("div",{staticClass:"col self-center text-center"},[o("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Fecha Presentado")]),e._v("\n            "+e._s(a.FechaPresentado?a.FechaPresentado.split(" ")[0]:"Sin fecha asignada")+"\n          ")],1):e._e(),e.Ver.FechaProximaAudiencia?o("div",{staticClass:"col self-center text-center"},[o("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Fecha Proxima Audiencia: "+e._s(a.FechaProximaAudiencia?a.FechaProximaAudiencia.split(" ")[0]:"Sin fecha asignada"))]),e._v("\n            "+e._s(a.FechaProximaAudiencia?e.diasCambioEstado(a.FechaProximaAudiencia.split(" ")[0]):"Sin fecha asignada")+"\n          ")],1):e._e(),e.Ver.Legajo?o("div",{staticClass:"col self-center text-center"},[o("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Legajo")]),e._v("\n            "+e._s(a.Legajo?a.Legajo:"Sin legajo asignado")+"\n          ")],1):e._e(),e.Ver.CausaPenal?o("div",{staticClass:"col self-center text-center"},[o("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Estado de la Causa Penal")]),e._v("\n            "+e._s(a.EstadoCausaPenal||"Sin estado asignado")+"\n            "),o("br"),e._v("\n            "+e._s(a.FechaEstadoCausaPenal?"Hace "+e.diasCambioEstado(a.FechaEstadoCausaPenal)+" días":"")+"\n          ")],1):e._e(),e.Ver.Doc?o("div",{staticClass:"col self-center text-center"},[o("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Documentacion del Caso")]),e._v("\n            "+e._s(a.Parametros&&a.Parametros.EstadoDocumentacion||"Sin estado asignado")+"\n            "),o("br"),e._v("\n            "+e._s(a.Parametros&&a.Parametros.FechaEstadoDocumentacion?"Hace "+e.diasCambioEstado(a.FechaEstadoDocumentacion)+" días":"")+"\n          ")],1):e._e(),e.Ver.NroExpCP?o("div",{staticClass:"col self-center text-center"},[o("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Nro de Expediente de la Causa Penal")]),e._v("\n            "+e._s(a.NroExpedienteCausaPenal||"Sin exp asignado")+"\n          ")],1):e._e(),e.Ver.Radicacion?o("div",{staticClass:"col self-center text-center"},[o("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Radicación")]),e._v("\n            "+e._s(a.Radicacion||"Sin datos")+"\n          ")],1):e._e(),e.Ver.Comisaria?o("div",{staticClass:"col self-center text-center"},[o("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Comisaria")]),e._v("\n            "+e._s(a.Comisaria||"Sin datos")+"\n          ")],1):e._e(),e.Ver.HistoriaClinica?o("div",{staticClass:"col self-center text-center",on:{click:function(o){return e.verInfoHc(a)}}},[o("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Ver más")]),o("ul",{staticStyle:{margin:"0",padding:"0"}},e._l(e.arrayHC(a.PersonasCaso),(function(a){return o("li",{key:a,staticStyle:{"list-style":"none"}},[e._v("\n                "+e._s(a)+"\n              ")])})),0)],1):e._e()])])],1)})),o("q-separator",{staticStyle:{"margin-bottom":"-.2em"},attrs:{color:"black",size:"5px"}})],2)})),o("q-dialog",{model:{value:e.ModalHC,callback:function(a){e.ModalHC=a},expression:"ModalHC"}},[o("q-card",{staticStyle:{"max-width":"100% !important"}},[o("q-item",{staticStyle:{"background-color":"black"}},[o("span",{staticClass:"q-subheading",staticStyle:{color:"white"}},[e._v("Historia Clínica")])]),o("q-item",[o("q-table",{attrs:{"hide-pagination":"",flat:"",data:e.personas,columns:e.columnas,"row-key":"name"}})],1),o("q-item",{staticClass:"justify-center"},[o("span",{staticClass:"q-subheading cursor-pointer",on:{click:function(a){return e.abrirCaso(e.IdCaso,!0)}}},[e._v("\n          Ver Datos de las Personas\n        ")])])],1)],1),o("q-dialog",{staticStyle:{"background-color":"white"},model:{value:e.ModalMediacion,callback:function(a){e.ModalMediacion=a},expression:"ModalMediacion"}},[o("Mediacion",{attrs:{IdMediacion:e.Mediacion.IdMediacion,IdCaso:e.Mediacion.IdCaso,IdChat:e.Mediacion.IdChat,CaratulaCaso:e.Mediacion.CaratulaCaso,Personas:e.Mediacion.Personas},on:{alta:e.altaMediacion,cerrar:function(a){e.ModalMediacion=!1}}})],1),o("q-dialog",{attrs:{"no-backdrop-dismiss":"","no-esc-dismiss":""},model:{value:e.ModalMovimiento,callback:function(a){e.ModalMovimiento=a},expression:"ModalMovimiento"}},[o("q-card",[o("q-item",{staticStyle:{"background-color":"black"}},[o("span",{staticClass:"q-subheading",staticStyle:{color:"white"}},[e._v("Editar Movimiento")])]),e.ModalMovimiento?o("EditarMovimiento",{attrs:{movimiento:this.movimientoEditar},on:{cancelarEdicion:function(a){e.ModalMovimiento=!1},edicionTerminada:function(a){e.ModalMovimiento=!1}}}):e._e()],1)],1)],2)},l=[],r=o("c1df"),d=o.n(r),u=o("001f"),f=o("c3f4"),h={name:"MediacionesGrilla",props:["Mediaciones","Grilla"],components:{Mediacion:u["a"],EditarMovimiento:f["a"]},data:function(){return{Mediacion:{},ModalMediacion:!1,ModalMovimiento:!1,ModalHC:!1,movimientoEditar:{},personas:[],columnas:[{name:"persona",label:"Persona",field:"persona",align:"left"},{name:"estado",label:"Estado de Historia Clínica",field:"estado",align:"center"},{name:"cambioEstado",label:"Días desde cambio de estado",field:"cambioEstado",align:"center"},{name:"centro",label:"Centro Médico",field:"centro",align:"center"},{name:"numero",label:"Número",field:"numero",align:"right"}],IdCaso:0}},computed:{Ver:function(){return{Cliente:this.Grilla.includes("Cliente"),Estado:this.Grilla.includes("Estado"),Mediador:this.Grilla.includes("Mediador"),Bono:this.Grilla.includes("Bono"),UltMov:this.Grilla.includes("UltMov"),TipoCaso:this.Grilla.includes("TipoCaso"),Origen:this.Grilla.includes("Origen"),FechaBono:this.Grilla.includes("FechaBono"),Beneficio:this.Grilla.includes("Beneficio"),FechaPresentado:this.Grilla.includes("FechaPresentado"),FechaProximaAudiencia:this.Grilla.includes("FechaProximaAudiencia"),Legajo:this.Grilla.includes("Legajo"),CausaPenal:this.Grilla.includes("CausaPenal"),Doc:this.Grilla.includes("Doc"),NroExpCP:this.Grilla.includes("NroExpCP"),Radicacion:this.Grilla.includes("Radicacion"),Comisaria:this.Grilla.includes("Comisaria"),HistoriaClinica:this.Grilla.includes("HistoriaClinica")}}},methods:{abrirMediacion:function(e){this.Mediacion={IdMediacion:e.IdMediacion,IdCaso:e.IdCaso,IdChat:e.IdChat,CaratulaCaso:e.Caratula,Personas:this.dataPersonas(e.PersonasCaso)},this.ModalMediacion=!0},altaMediacion:function(e){this.Mediacion.IdMediacion=e,this.$emit("altaMediacion",this.Mediacion)},dataPersonas:function(e){var a=this,o=[];return e.length&&e.forEach((function(e){var t={Id:e.IdPersona,Apellido:e.Apellidos,Nombre:e.Nombres,Email:e.Email,Principal:"S"===e.EsPrincipal,Domicilio:e.Domicilio,Documento:e.Documento,Tipo:e.Tipo,Rol:e.RolTipoCaso?e.RolTipoCaso:e.Observaciones,Telefonos:a.personaTelefonos(e.Telefonos),TelefonoActivo:a.telefonoPrincipal(e.Telefonos)};o.push(t)})),o},personaTelefonos:function(e){var a=[];return e&&e.forEach((function(e){var o={Detalle:e.Detalle,EsPrincipal:"S"===e.EsPrincipal,FechaAlta:e.FechaAlta,Telefono:e.Telefono};a.push(o)})),a},telefonoPrincipal:function(e){if(e){var a=(e||[]).filter((function(e){return"S"===e.EsPrincipal}));return a.length?a[0].Telefono:e.length?e[0].Telefono:"Sin telefono"}return""},abrirCaso:function(e,a){event.stopPropagation();var o=a?"/Caso?id=".concat(e,"&tab=datos#personas"):"/Caso?id=".concat(e),t=this.$router.resolve({path:o});window.open(t.href,"_blank")},editarMovimiento:function(e,a){event.stopPropagation(),e&&(e.Caratula=a,this.movimientoEditar=e,this.ModalMovimiento=!0)},diasCambioEstado:function(e){if(!e)return"No hay un estado asignado.";var a=d()().diff(d()(e),"days");return a>=0?a:a-1},arrayHC:function(e){var a=[],o=0;e.forEach((function(e){if(e.IdHistoriaClinica)if(o++,0===a.length)a.push({Estado:e.EstadoHC,Cant:1});else{var t=a.findIndex((function(a){return a.Estado===e.EstadoHC}));t<0?a.push({Estado:e.EstadoHC,Cant:1}):a[t].Cant++}}));var t=a.map((function(e){return"".concat(e.Estado," (").concat(e.Cant,"/").concat(o,")")}));return t.length>=2&&(t=t.slice(0,1),t.push("...")),0===t.length?["Sin datos"]:t},verInfoHc:function(e){var a=this;event.stopPropagation(),this.ModalHC=!0,this.IdCaso=e.IdCaso;var o=e.PersonasCaso;this.personas=o.filter((function(e){return"Actor"===e.Observaciones})).map((function(e){return{persona:e.Apellidos+", "+e.Nombres,estado:e.EstadoHC||"Sin datos",cambioEstado:e.FechaEstadoHC?"Hace ".concat(a.diasCambioEstado(e.FechaEstadoHC)," días"):"Sin datos",centro:e.CentroMedicoHC||"Sin datos",numero:e.NumeroHC||"Sin datos"}}))}}},m=h,p=o("2877"),v=Object(p["a"])(m,c,l,!1,null,null,null),C=v.exports,b=function(){var e=this,a=e.$createElement,o=e._self._c||a;return o("q-drawer",{attrs:{width:300,breakpoint:700,"content-class":"bg-grey-3 text-black ","content-style":"border-style: solid; border-width: 1px"},model:{value:e.mostrar,callback:function(a){e.mostrar=a},expression:"mostrar"}},[o("q-expansion-item",{attrs:{"expand-separator":"",icon:"assignment_late",label:"Estados","default-opened":""}},[o("div",{staticClass:"column bg-white",staticStyle:{"padding-left":"1em"}},[0===e.Estados.length?o("Loading"):e._l(e.Estados,(function(a){return o("q-checkbox",{key:a.value,attrs:{label:a.label+" ("+a.cantidad+")"},on:{input:function(o){return e.seleccionar(a.check,a.value,"Estados")}},model:{value:a.check,callback:function(o){e.$set(a,"check",o)},expression:"e.check"}})}))],2)]),o("q-separator"),o("q-expansion-item",{attrs:{"expand-separator":"",icon:"list",label:"Grilla"}},[o("div",{staticClass:"column bg-white",staticStyle:{"padding-left":"1em"}},[0===e.Grilla.length?o("Loading"):e._l(e.Grilla,(function(a){return o("q-checkbox",{key:a.value,attrs:{label:a.label},on:{input:function(o){return e.seleccionar(a.check,a.value,"Grilla")}},model:{value:a.check,callback:function(o){e.$set(a,"check",o)},expression:"g.check"}})}))],2)]),o("q-separator"),o("q-expansion-item",{attrs:{"expand-separator":"",icon:"attach_money",label:"Bonos"}},[o("div",{staticClass:"column bg-white",staticStyle:{"padding-left":"1em"}},[0===e.Bonos.length?o("Loading"):e._l(e.Bonos,(function(a){return o("q-checkbox",{key:a.value,attrs:{label:a.label},on:{input:function(o){return e.seleccionar(a.check,a.value,"Bonos")}},model:{value:a.check,callback:function(o){e.$set(a,"check",o)},expression:"bo.check"}})}))],2)]),o("q-separator"),o("q-expansion-item",{attrs:{"expand-separator":"",icon:"info",label:"Beneficios"}},[o("div",{staticClass:"column bg-white",staticStyle:{"padding-left":"1em"}},[0===e.Beneficios.length?o("Loading"):e._l(e.Beneficios,(function(a){return o("q-checkbox",{key:a.value,attrs:{label:a.label},on:{input:function(o){return e.seleccionar(a.check,a.value,"Beneficios")}},model:{value:a.check,callback:function(o){e.$set(a,"check",o)},expression:"be.check"}})}))],2)]),o("q-separator"),o("q-expansion-item",{attrs:{"expand-separator":"",icon:"people",label:"Origenes"}},[o("div",{staticClass:"column bg-white",staticStyle:{"padding-left":"1em"}},[0===e.Origenes.length?o("Loading"):e._l(e.Origenes,(function(a){return o("q-checkbox",{key:a.value,attrs:{label:a.label},on:{input:function(o){return e.seleccionar(a.check,a.value,"Origenes")}},model:{value:a.check,callback:function(o){e.$set(a,"check",o)},expression:"o.check"}})}))],2)]),o("q-separator"),o("q-expansion-item",{attrs:{"expand-separator":"",icon:"cases",label:"Tipos de Caso"}},[o("div",{staticClass:"column bg-white",staticStyle:{"padding-left":"1em"}},[0===e.TiposCaso.length?o("Loading"):e._l(e.TiposCaso,(function(a){return o("q-checkbox",{key:a.value,attrs:{label:a.label},on:{input:function(o){return e.seleccionar(a.check,a.value,"TiposCaso")}},model:{value:a.check,callback:function(o){e.$set(a,"check",o)},expression:"tc.check"}})}))],2)]),o("q-separator"),o("q-expansion-item",{attrs:{"expand-separator":"",icon:"gavel",label:"Causa Penal"}},[o("div",{staticClass:"column bg-white",staticStyle:{"padding-left":"1em"}},[0===e.EstadosCP.length?o("Loading"):e._l(e.EstadosCP,(function(a){return o("q-checkbox",{key:a.value,attrs:{label:a.label+" ("+a.cantidad+")"},on:{input:function(o){return e.seleccionar(a.check,a.value,"EstadosCP")}},model:{value:a.check,callback:function(o){e.$set(a,"check",o)},expression:"ecp.check"}})}))],2)]),o("q-separator"),o("q-expansion-item",{attrs:{"expand-separator":"",icon:"folder_open",label:"Documentacion del Caso"}},[o("div",{staticClass:"column bg-white",staticStyle:{"padding-left":"1em"}},[0===e.EstadosDoc.length?o("Loading"):e._l(e.EstadosDoc,(function(a){return o("q-checkbox",{key:a.value,attrs:{label:a.label+" ("+a.cantidad+")"},on:{input:function(o){return e.seleccionar(a.check,a.value,"EstadosDoc")}},model:{value:a.check,callback:function(o){e.$set(a,"check",o)},expression:"ed.check"}})}))],2)]),o("q-separator"),o("q-expansion-item",{attrs:{"expand-separator":"",icon:"local_hospital",label:"Historia Clínica"}},[o("div",{staticClass:"column bg-white",staticStyle:{"padding-left":"1em"}},[0===e.EstadosHC.length?o("Loading"):e._l(e.EstadosHC,(function(a){return o("q-checkbox",{key:a.value,attrs:{label:a.label+" ("+a.cantidad+")"},on:{input:function(o){return e.seleccionar(a.check,a.value,"EstadosHC")}},model:{value:a.check,callback:function(o){e.$set(a,"check",o)},expression:"ehc.check"}})}))],2)]),o("q-separator"),o("q-expansion-item",{attrs:{"expand-separator":"",icon:"reorder",label:"Ordenar"}},[o("div",{staticClass:"column bg-white",staticStyle:{"padding-left":"1em"}},[o("q-option-group",{attrs:{options:e.Orden,type:"radio"},on:{input:e.ordenar},model:{value:e.OrdenSeleccionado,callback:function(a){e.OrdenSeleccionado=a},expression:"OrdenSeleccionado"}})],1)])],1)},g=[],E=o("fe09"),_={name:"FiltrosMediaciones",props:["mostrar","Grilla","Bonos","Beneficios","Origenes","TiposCaso","Estados","EstadosCP","EstadosDoc","EstadosHC","Orden"],components:{Loading:s["a"],QRadio:E["a"]},data:function(){return{GrillaSeleccionados:[],BonosSeleccionados:[],BeneficiosSeleccionados:[],OrigenesSeleccionados:[],TiposCasoSeleccionados:[],EstadosSeleccionados:[],EstadosCPSeleccionados:[],EstadosDocSeleccionados:[],EstadosHCSeleccionados:[],OrdenSeleccionado:"FechaAlta"}},created:function(){var e=this;this.Grilla.forEach((function(a){a.check&&e.GrillaSeleccionados.push(a.value)}))},watch:{Grilla:{handler:function(){var e=this;this.GrillaSeleccionados=[],this.Grilla.forEach((function(a){a.check&&e.GrillaSeleccionados.push(a.value)}))},deep:!0}},methods:{seleccionar:function(e,a,o){var t="".concat(o,"Seleccionados");e?this[t].push(a):this[t]=this[t].filter((function(e){return e!==a})),this.$emit("seleccionarFiltro",this[t],t)},ordenar:function(){this.$emit("ordenar",this.OrdenSeleccionado)}}},M=_,k=(o("55a3"),Object(p["a"])(M,b,g,!1,null,null,null)),S=k.exports,P={name:"MediacionesPage",components:{MediacionesGrilla:C,Loading:s["a"],FiltrosMediaciones:S},data:function(){return{Mediaciones:[],agrupar:!1,loading:!0,verFiltros:!1,causaPenal:!1,Estados:[],EstadosCP:[],EstadosDoc:[],EstadosHC:[],Bonos:[],Beneficios:[],TiposCaso:[],Origenes:[],Grilla:[{label:"Cliente",value:"Cliente",check:!0},{label:"Estado",value:"Estado",check:!0},{label:"Mediador",value:"Mediador",check:!0},{label:"Ultimo Movimiento",value:"UltMov",check:!1},{label:"Tipo Caso",value:"TipoCaso",check:!1},{label:"Origen",value:"Origen",check:!1},{label:"Bono",value:"Bono",check:!0},{label:"Fecha Bono",value:"FechaBono",check:!0},{label:"Beneficio",value:"Beneficio",check:!0},{label:"Fecha Presentado",value:"FechaPresentado",check:!0},{label:"Fecha Proxima Audiencia",value:"FechaProximaAudiencia",check:!0},{label:"Legajo",value:"Legajo",check:!0},{label:"Causa Penal",value:"CausaPenal",check:!1},{label:"Documentacion",value:"Doc",check:!1},{label:"Nro Exp. Causa Penal",value:"NroExpCP",check:!1},{label:"Radicacion",value:"Radicacion",check:!1},{label:"Comisaria",value:"Comisaria",check:!1},{label:"Historia Clínica",value:"HistoriaClinica",check:!1}],Orden:[{label:"Fecha Alta de Caso",value:"FechaAlta"},{label:"Fecha Bonos",value:"FechaBonos"},{label:"Fecha Presentado",value:"FechaPresentado"},{label:"Fecha Proxima Audiencia",value:"FechaProximaAudiencia"}],EstadosSeleccionados:[],EstadosCPSeleccionados:[],EstadosDocSeleccionados:[],EstadosHCSeleccionados:[],BonosSeleccionados:[],BeneficiosSeleccionados:[],OrigenesSeleccionados:[],TiposCasoSeleccionados:[],GrillaSeleccionados:[]}},created:function(){var e=this;this.Grilla.forEach((function(a){a.check&&e.GrillaSeleccionados.push(a.value)})),n["a"].Get("/mediaciones/buscar",{},(function(a){if(a.length>0){console.log(a),e.Mediaciones=a,e.Mediaciones.forEach((function(e){e.PersonasCaso=JSON.parse(e.PersonasCaso),e.UltimoMovimiento=JSON.parse(e.UltimoMovimiento),e.Parametros=JSON.parse(e.Parametros)})),a.forEach((function(a){e.Estados.push({label:a.EstadoAmbitoGestion,value:parseInt(a.IdEstadoAmbitoGestion),Orden:a.OrdenEstado,check:!1,cantidad:0})})),e.Estados.sort((function(e,a){return e.Orden-a.Orden}));var o={};e.Estados=e.Estados.filter((function(e){var a=!o[e.value];return o[e.value]=!0,a})),e.Estados.forEach((function(a){a.cantidad=e.Mediaciones.filter((function(e){return parseInt(e.IdEstadoAmbitoGestion)===a.value})).length}))}e.loading=!1})),n["a"].Get("/mediaciones/datos",{},(function(a){if(a.Error)e.$q.notify(a.Error);else{var o=JSON.parse(a.Bonos),t=JSON.parse(a.Beneficios);e.Bonos=o.map((function(e){return{label:e.Bono,value:e.IdBono,check:!1}})),e.Bonos.push({label:"Sin datos",value:0,check:!1}),e.Beneficios=t.map((function(e){return{label:e.Beneficio,value:e.IdBeneficio,check:!1}})),e.Beneficios.push({label:"Sin datos",value:0,check:!1})}})),n["a"].Get("/casos/opciones-parametros",{},(function(a){if(a.Error)e.$q.notify(a.Error);else{var o=a.findIndex((function(e){return"opcionesEstadoCausaPenal"===e.Variable})),t=JSON.parse(a[o].Opciones);e.EstadosCP=t.map((function(e){return{label:e,value:e,check:!1,cantidad:0}})),e.EstadosCP.push({label:"Sin datos",value:"Sin datos",check:!1,cantidad:0});var i=a.findIndex((function(e){return"opcionesEstadoDoc"===e.Variable})),n=JSON.parse(a[i].Opciones);e.EstadosDoc=n.map((function(e){return{label:e,value:e,check:!1,cantidad:0}})),e.EstadosDoc.push({label:"Sin datos",value:"Sin datos",check:!1,cantidad:0});var s=a.findIndex((function(e){return"opcionesEstadoHC"===e.Variable})),c=JSON.parse(a[s].Opciones);e.EstadosHC=c.map((function(e){return{label:e,value:e,check:!1,cantidad:0}})),e.EstadosHC.push({label:"Sin datos",value:"Sin datos",check:!1,cantidad:0})}})),n["a"].Get("/origenes",{},(function(a){a.Error?e.$q.notify(a.Error):(e.Origenes=a.map((function(e){return{label:e.Origen,value:parseInt(e.IdOrigen),check:!1}})),e.Origenes.push({label:"Sin origen",value:0,check:!1}))})),n["a"].Get("/tipos-caso?&IncluyeBajas=N",{},(function(a){a.Error?e.$q.notify(a.Error):(e.TiposCaso=a.map((function(e){return{label:e.TipoCaso,value:parseInt(e.IdTipoCaso),check:!1}})),e.TiposCaso.push({label:"Sin origen",value:0,check:!1}))}))},watch:{EstadosSeleccionados:function(){this.agrupar=!(0===this.EstadosSeleccionados.length)},agrupar:function(){this.simularCarga()},Mediaciones:function(){var e=this;this.Mediaciones.length>0&&(this.EstadosCP.forEach((function(a){a.cantidad="Sin datos"===a.value?e.Mediaciones.filter((function(e){return!e.EstadoCausaPenal})).length:e.Mediaciones.filter((function(e){return e.EstadoCausaPenal===a.value})).length})),this.EstadosDoc.forEach((function(a){a.cantidad="Sin datos"===a.value?e.Mediaciones.filter((function(e){return!e.Parametros||!e.Parametros.EstadoDocumentacion})).length:e.Mediaciones.filter((function(e){if(e.Parametros)return e.Parametros.EstadoDocumentacion===a.value})).length})),this.EstadosHC.forEach((function(a){a.cantidad="Sin datos"===a.value?e.Mediaciones.filter((function(e){var a=!1;return e.PersonasCaso.forEach((function(e){"Actor"!==e.Observaciones||e.EstadoHC||(a=!0)})),a})).length:e.Mediaciones.filter((function(e){var o=!1;return e.PersonasCaso.forEach((function(e){"Actor"===e.Observaciones&&e.EstadoHC===a.value&&(o=!0)})),o})).length})))}},computed:{ArrayMediaciones:function(){var e=this.filtros(this.Mediaciones);if(this.agrupar){var a=[];e.forEach((function(e){a.push({Orden:e.OrdenEstado,IdEstadoAmbitoGestion:e.IdEstadoAmbitoGestion})}));var o={};a=a.filter((function(e){var a=!o[e.IdEstadoAmbitoGestion];return o[e.IdEstadoAmbitoGestion]=!0,a})),a.sort((function(e,a){return e.Orden-a.Orden}));var t=[];return a.forEach((function(a){var o=e.filter((function(e){return e.IdEstadoAmbitoGestion===a.IdEstadoAmbitoGestion}));o.sort((function(e,a){return new Date(a.FechaEstado).getTime()>new Date(e.FechaEstado).getTime()?1:-1})),t.push(o)})),t}return[e]}},methods:{simularCarga:function(){var e=this;this.loading=!0,setTimeout((function(){e.loading=!1}),400)},cambiarModo:function(){var e=this.causaPenal?["Cliente","Estado","CausaPenal","Doc","NroExpCP","Radicacion","Comisaria","HistoriaClinica"]:["Cliente","Estado","Mediador","Bono","FechaBono","Beneficio","FechaPresentado","FechaProximaAudiencia","Legajo"];this.Grilla.forEach((function(a){a.check=e.includes(a.value)})),this.GrillaSeleccionados=e.slice(0)},seleccionarFiltro:function(e,a){this[a]=e.slice(0)},ordenar:function(e){if("FechaProximaAudiencia"===e){var a=(new Date).getTime(),o=[],t=[],i=[];this.Mediaciones.forEach((function(n){switch(!0){case new Date(n[e]).getTime()>=a:o.push(n);break;case new Date(n[e]).getTime()<a:t.push(n);break;default:i.push(n);break}})),o.sort((function(a,o){return new Date(o[e]).getTime()<new Date(a[e]).getTime()?1:-1})),t.sort((function(a,o){return new Date(o[e]).getTime()>new Date(a[e]).getTime()?1:-1})),this.Mediaciones=o.concat(i).concat(t)}else this.Mediaciones.sort((function(a,o){return new Date(o[e]).getTime()>new Date(a[e]).getTime()?1:-1}));this.simularCarga()},filtros:function(e){var a=this;return e.filter((function(e){var o=e.IdBono?e.IdBono:0,t=e.IdBeneficio?e.IdBeneficio:0,i=e.IdOrigen?e.IdOrigen:0,n=e.EstadoCausaPenal||"Sin datos",s=e.Parametros&&e.Parametros.EstadoDocumentacion||"Sin datos",c=!1;return e.PersonasCaso.forEach((function(e){if("Actor"===e.Observaciones){var o=e.EstadoHC||"Sin datos";a.EstadosHCSeleccionados.includes(o)&&(c=!0)}})),(a.BonosSeleccionados.includes(parseInt(o))||0===a.BonosSeleccionados.length)&&(a.BeneficiosSeleccionados.includes(parseInt(t))||0===a.BeneficiosSeleccionados.length)&&(a.EstadosSeleccionados.includes(parseInt(e.IdEstadoAmbitoGestion))||0===a.EstadosSeleccionados.length)&&(a.OrigenesSeleccionados.includes(parseInt(i))||0===a.OrigenesSeleccionados.length)&&(a.TiposCasoSeleccionados.includes(parseInt(e.IdTipoCaso))||0===a.TiposCasoSeleccionados.length)&&(a.EstadosCPSeleccionados.includes(n)||0===a.EstadosCPSeleccionados.length)&&(a.EstadosDocSeleccionados.includes(s)||0===a.EstadosDocSeleccionados.length)&&(c||0===a.EstadosHCSeleccionados.length)}))},altaMediacion:function(e){var a=this;n["a"].Get("/mediaciones",{id:e.IdMediacion},(function(o){if(o.Error)a.$q.notify(o.Error);else{var t=a.Mediaciones.findIndex((function(a){return parseInt(a.IdCaso)===parseInt(e.IdCaso)}));a.Mediaciones[t].IdBono=o.IdBono,a.Mediaciones[t].Bono=o.Bono,a.Mediaciones[t].IdBeneficio=o.IdBeneficio,a.Mediaciones[t].Beneficio=o.Beneficio,a.Mediaciones[t].IdMediador=o.IdMediador,a.Mediaciones[t].NombreMediador=o.Mediador.Nombre,a.Mediaciones[t].FechaBonos=o.FechaBonos,a.Mediaciones[t].FechaPresentado=o.FechaPresentado,a.Mediaciones[t].FechaProximaAudiencia=o.FechaProximaAudiencia,a.Mediaciones[t].Legajo=o.Legajo}}))}}},x=P,B=Object(p["a"])(x,t,i,!1,null,null,null);a["default"]=B.exports}}]);