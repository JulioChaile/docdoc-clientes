(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{4327:function(t,e,o){},"451f":function(t,e,o){"use strict";var n=o("ade1"),i=o.n(n);i.a},"5bb8":function(t,e,o){"use strict";var n=o("86d5"),i=o.n(n);i.a},"86d5":function(t,e,o){},8872:function(t,e,o){"use strict";var n=o("4327"),i=o.n(n);i.a},"8f27":function(t,e,o){},ade1:function(t,e,o){},b3a9:function(t,e,o){"use strict";var n=o("8f27"),i=o.n(n);i.a},e3b9:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-layout",{staticClass:"shadow-2 rounded-borders",attrs:{view:"hHh Lpr lff"}},[o("q-header",{staticClass:"bg-black",attrs:{elevated:""}},[o("q-toolbar",{attrs:{id:"contenedorToolbar",color:"primary"}},[o("q-btn",{staticClass:"logo-menu",attrs:{flat:"",dense:"",round:"","aria-label":"Menu"},on:{click:function(e){t.leftDrawerOpen=!t.leftDrawerOpen}}},[o("img",{attrs:{src:"statics/img/logo.png",width:"30",height:"25"}})]),o("q-toolbar-title",[t._v(t._s(t.$route.name))]),o("div",[t.mostrarUsuario()?o("q-btn-dropdown",{attrs:{flat:"",label:t.mostrarUsuario()}},[o("ventana-usuario",{attrs:{notificaciones:t.notificacionesComp,notificacionesMediadores:t.notificacionesMediadoresComp,notificacionesContactos:t.notificacionesContactosComp,verVencimientos:t.verVencimientos},on:{notificacionLeida:t.confirmarNotificacion,vencimientosVistos:function(e){t.verVencimientos=!1}}})],1):t._e()],1)],1)],1),o("q-drawer",{attrs:{width:200,breakpoint:500,bordered:"","content-class":"bg-grey-3",overlay:""},model:{value:t.leftDrawerOpen,callback:function(e){t.leftDrawerOpen=e},expression:"leftDrawerOpen"}},[o("q-list",{staticClass:"column full-height",attrs:{"no-border":"",link:"","inset-delimiter":"",highlight:""}},[o("q-item-label",{attrs:{header:""}},[t._v("Accesos Directos")]),o("q-item",{staticStyle:{display:"flex","align-items":"center"},attrs:{to:"/#"}},[o("q-item-section",{attrs:{side:"",top:""}},[o("q-icon",{attrs:{name:"cases"}})],1),o("q-item-section",[t._v("Mis Casos")])],1),o("q-item",{staticStyle:{display:"flex","align-items":"center"},attrs:{to:"/Consultas"}},[o("q-item-section",{attrs:{side:"",top:""}},[o("q-icon",{attrs:{name:"question_answer"}})],1),o("q-item-section",[t._v("Mis Consultas")])],1),o("q-item",{staticStyle:{display:"flex","align-items":"center"},attrs:{to:"/Reportar"}},[o("q-item-section",{attrs:{side:"",top:""}},[o("q-icon",{attrs:{name:"bug_report"}})],1),o("q-item-section",[t._v("Reportar error")])],1),t.isLoggedIn?o("q-item",{staticStyle:{display:"flex","align-items":"center",position:"absolute",bottom:"0",width:"100%"},attrs:{sparse:"",to:"/Login"}},[o("q-item-section",{attrs:{side:"",top:""}},[o("q-icon",{attrs:{name:"exit_to_app"}})],1),o("q-item-section",[t._v("Cerrar Sesión")])],1):t._e()],1)],1),o("q-page-container",{key:t.pageKey},[o("router-view")],1),"Login"!==t.$route.name?o("q-btn",{staticClass:"fixed boton_layout_consulta",attrs:{round:"",color:"primary",icon:"add"},on:{click:function(e){t.consultaModal=!0}}},[o("q-tooltip",{attrs:{anchor:"center left",selft:"center right",offset:[80,0]}},[t._v("Consulte a DocDoc!")])],1):t._e(),o("q-dialog",{staticStyle:{"background-color":"white"},model:{value:t.consultaModal,callback:function(e){t.consultaModal=e},expression:"consultaModal"}},[o("q-card",{staticStyle:{"min-width":"400px"}},[o("q-item",{staticStyle:{"background-color":"black"}},[o("span",{staticClass:"text-subtitle1",staticStyle:{color:"white"}},[t._v("Consulte a DocDoc!")])]),o("q-card-section",{staticClass:"flex titulo-login"},[o("span",[t._v("Respondemos tu consulta legal en menos de 5 minutos")])]),o("div",{staticClass:"q-px-md q-mb-lg"},[o("div",[t._v("\n          Deja tu consulta y en unos minutos la respondemos:\n        ")]),o("q-input",{staticClass:"q-my-sm",attrs:{dense:"",label:"Consulta",type:"textarea",rows:7},model:{value:t.consulta.Texto,callback:function(e){t.$set(t.consulta,"Texto",e)},expression:"consulta.Texto"}}),o("div",{staticClass:"q-mt-lg"},[t._v("\n          Tu nombre:\n        ")]),o("q-input",{staticClass:"q-my-sm",attrs:{dense:"",label:"Apellido y Nombre",type:"text"},model:{value:t.consulta.Apynom,callback:function(e){t.$set(t.consulta,"Apynom",e)},expression:"consulta.Apynom"}}),o("div",{staticClass:"q-mt-lg"},[t._v("\n          Dejanos tu celu asi podemos contactarte:\n        ")]),o("q-input",{staticClass:"q-my-sm",attrs:{dense:"",label:"Telefono",type:"number","bottom-slots":""},scopedSlots:t._u([{key:"hint",fn:function(){return[t._v("\n            Escribí tu número sin cero ni quince y sin guiones o espacios.\n            "),o("br"),t._v("\n            Ejemplo: 381785490\n          ")]},proxy:!0}]),model:{value:t.consulta.Telefono,callback:function(e){t.$set(t.consulta,"Telefono",e)},expression:"consulta.Telefono"}})],1),o("span",{staticClass:"text-negative q-pl-lg text-caption"},[t._v("*Todos los campos son obligatorios")]),o("div",{staticClass:"full-width flex justify-center q-my-md"},[t.loading?t._e():o("q-btn",{attrs:{color:"primary q-mr-md"},on:{click:t.enviarConsulta}},[t._v("Enviar")]),t.loading?o("q-spinner",{staticClass:"self-center",attrs:{color:"teal",size:"2em"}}):o("q-btn",{attrs:{color:"red"},on:{click:t.cancelarConsulta}},[t._v("Cancelar")])],1)],1)],1)],1)},i=[],a=(o("8e6e"),o("8a81"),o("ac6a"),o("cadf"),o("06db"),o("456d"),o("a34a")),s=o.n(a),c=(o("96cf"),o("c973")),r=o.n(c),l=o("9523"),d=o.n(l),u=(o("28a5"),o("b06b")),f=o("2a19"),m=o("0d59"),h=o("c1df"),p=o.n(h),C=o("b628"),g=o("8daa"),v=o("c0e9"),b=o.n(v),I=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("object",{attrs:{type:"image/svg+xml",data:"statics/docdoc-small-loading.svg",alt:"Docdoc! Gestión",width:t.width,height:t.height}})},y=[],_=(o("c5f6"),{props:{width:{Type:Number,default:0},height:{Type:Number,default:0}},data:function(){return{isMobile:!1}},created:function(){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(this.isMobile=!0)}}),q=_,M=o("2877"),x=Object(M["a"])(q,I,y,!1,null,null,null),S=x.exports,j=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-card",[o("q-list",{attrs:{bordered:""}},[o("q-item-label",{attrs:{header:""}},[t._v("\n        Notificaciones\n    ")]),o("q-item",{attrs:{sparse:""}},[o("q-item-section",[o("NotificacionesMensajes",{attrs:{notificaciones:t.notificaciones,notificacionesMediadores:t.notificacionesMediadores,notificacionesContactos:t.notificacionesContactos},on:{notificacionLeida:t.leerNotificacion}})],1)],1),t.verVencimientos?o("q-item",{attrs:{sparse:""}},[o("q-item-section",[o("BotonVencimientos",{on:{vencimientosVistos:function(e){return t.$emit("vencimientosVistos")}}})],1)],1):t._e(),o("q-separator"),o("q-item",{staticClass:"ventana_user_btn",attrs:{sparse:"",to:"/Login"}},[o("q-item-section",{attrs:{side:"",top:""}},[o("q-icon",{attrs:{name:"exit_to_app"}})],1),o("q-item-section",[t._v("\n        Cerrar Sesión\n      ")])],1)],1)],1)},w=[],O=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[t.notificacionesPorCaso.length?o("q-list",{staticClass:"notificaciones_container"},[o("q-expansion-item",{scopedSlots:t._u([{key:"header",fn:function(){return[o("q-item-section",{attrs:{avatar:""}},[o("q-icon",{attrs:{color:"primary",name:"mdi-message-text"}})],1),o("q-item-section",[t._v("\n          Mensajes Nuevos: Casos\n        ")])]},proxy:!0}],null,!1,2907139893)},[t._l(t.notificacionesPorCaso,(function(e,n){return o("q-item",{key:n,staticClass:"notificacion"},[o("q-item-section",{on:{click:function(o){return t.abrirChat(e,n,"caso")}}},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-12"},[o("q-icon",{staticClass:"on-left",attrs:{name:"mdi-message-text",color:"primary",size:"xs"}}),o("span",{staticClass:"text-caption"},[t._v("\n                Mensaje de "+t._s(e.Caratula?e.Caratula:"N/D")+" "+t._s(e.NroExpediente?", Caso "+e.NroExpediente:"")+"\n              ")])],1)])])],1)})),o("q-item",{staticStyle:{display:"flex","text-align":"center",cursor:"pointer"}},[o("q-item-section",{on:{click:function(e){return t.verMensajes("Caso")}}},[t._v("\n          Ver Mensajes\n        ")])],1)],2)],1):t._e(),t.notificacionesPorMediador.length?o("q-list",{staticClass:"notificaciones_container"},[o("q-expansion-item",{scopedSlots:t._u([{key:"header",fn:function(){return[o("q-item-section",{attrs:{avatar:""}},[o("q-icon",{attrs:{color:"primary",name:"mdi-message-text"}})],1),o("q-item-section",[t._v("\n          Mensajes Nuevos: Mediadores\n        ")])]},proxy:!0}],null,!1,292935571)},[t._l(t.notificacionesPorMediador,(function(e,n){return o("q-item",{key:n,staticClass:"notificacion"},[o("q-item-section",{on:{click:function(o){return t.abrirChat(e,n,"mediador")}}},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-12"},[o("q-icon",{staticClass:"on-left",attrs:{name:"mdi-message-text",color:"primary",size:"xs"}}),o("span",{staticClass:"text-caption"},[t._v("\n                Mensaje de "+t._s(e.Caratula)+"\n              ")])],1)])])],1)})),o("q-item",{staticStyle:{display:"flex","text-align":"center",cursor:"pointer"}},[o("q-item-section",{on:{click:function(e){return t.verMensajes("Mediador")}}},[t._v("\n          Ver Mensajes\n        ")])],1)],2)],1):t._e(),t.notificacionesPorContacto.length?o("q-list",{staticClass:"notificaciones_container"},[o("q-expansion-item",{scopedSlots:t._u([{key:"header",fn:function(){return[o("q-item-section",{attrs:{avatar:""}},[o("q-icon",{attrs:{color:"primary",name:"mdi-message-text"}})],1),o("q-item-section",[t._v("\n          Mensajes Nuevos: Contactos\n        ")])]},proxy:!0}],null,!1,2383998660)},[t._l(t.notificacionesPorContacto,(function(e,n){return o("q-item",{key:n,staticClass:"notificacion"},[o("q-item-section",{on:{click:function(o){return t.abrirChat(e,n,"contacto")}}},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-12"},[o("q-icon",{staticClass:"on-left",attrs:{name:"mdi-message-text",color:"primary",size:"xs"}}),o("span",{staticClass:"text-caption"},[t._v("\n                Mensaje de "+t._s(e.Caratula)+"\n              ")])],1)])])],1)})),o("q-item",{staticStyle:{display:"flex","text-align":"center",cursor:"pointer"}},[o("q-item-section",{on:{click:function(e){return t.verMensajes("Contacto")}}},[t._v("\n          Ver Mensajes\n        ")])],1)],2)],1):t._e(),0===t.notificacionesPorCaso.length&&0===t.notificacionesPorMediador.length&&0===t.notificacionesPorContacto.length?o("span",[o("i",[t._v("No tienes notificaciones nuevas.")])]):t._e()],1)},k=[],N={name:"NotificacionesMensajes",props:{notificaciones:{type:Array,default:function(){return[]}},notificacionesMediadores:{type:Array,default:function(){return[]}},notificacionesContactos:{type:Array,default:function(){return[]}}},data:function(){return{notificacionesPorCaso:[],notificacionesPorMediador:[],notificacionesPorContacto:[],notificacionesLeidas:[]}},created:function(){var t=this;this.notificaciones.forEach((function(e){t.notificacionesPorCaso.push({Caratula:e.Caratula,NroExpediente:e.NroExpediente,IdChat:e.IdChat,IdCaso:e.IdCaso,IdPersona:e.IdPersona,Telefono:e.Telefono,Contenido:e.Contenido,IdMensaje:e.IdMensaje,IdMediador:null})}));var e={};this.notificacionesPorCaso=this.notificacionesPorCaso.filter((function(t){var o=!e[t.IdChat];return e[t.IdChat]=!0,o})),this.notificacionesMediadores.forEach((function(e){t.notificacionesPorMediador.push({Caratula:e.Nombre,IdChat:e.IdChatMediador,Telefono:e.Telefono,Contenido:e.Contenido,IdMensaje:e.IdMensaje,IdMediador:e.IdMediador})}));var o={};this.notificacionesPorMediador=this.notificacionesPorMediador.filter((function(t){var e=!o[t.IdChat];return o[t.IdChat]=!0,e})),this.notificacionesContactos.forEach((function(e){t.notificacionesPorContacto.push({Caratula:e.Nombre,IdChat:e.IdChatContacto,Telefono:e.Telefono,Contenido:e.Contenido,IdMensaje:e.IdMensaje,IdContacto:e.IdContacto})}));var n={};this.notificacionesPorContacto=this.notificacionesPorContacto.filter((function(t){var e=!n[t.IdChat];return n[t.IdChat]=!0,e}))},methods:{abrirChat:function(t,e,o){var n=this,i={item:t,index:e};switch(o){case"caso":this.notificacionesPorCaso.splice(e,1),this.notificacionesLeidas=this.notificaciones.filter((function(e){return e.IdChat===t.IdChat}));break;case"mediador":this.notificacionesPorMediador.splice(e,1),this.notificacionesLeidas=this.notificacionesMediadores.filter((function(e){return e.IdChatMediador===t.IdChat}));break;case"contacto":this.notificacionesPorContacto.splice(e,1),this.notificacionesLeidas=this.notificacionesContactos.filter((function(e){return e.IdChatContacto===t.IdChat}));break}var a=this.$router.resolve({name:"Chat",query:{id:t.IdChat,idCaso:t.IdCaso,idPersona:t.IdPersona,telefono:t.Telefono,caratula:t.Caratula,idMediacion:t.IdMediador,idContacto:t.IdContacto}});window.open(a.href,"_blank"),this.actualizarLeidos(),setTimeout((function(){return n.$emit("notificacionLeida",i,o)}),500)},actualizarLeidos:function(){this.notificacionesLeidas.forEach((function(t){var e=t.IdChat?t.IdChat:t.IdChatMediador?t.IdChatMediador:t.IdChatContacto;g["a"].Post("/chats/".concat(e,"/actualizar"),{IdUltimoLeido:t.IdMensaje,mediador:t.IdMediador?t.IdMediador:null,contacto:t.IdContacto?t.IdContacto:null},(function(t){console.log("RESPUESTA:",t)}))}))},verMensajes:function(t){var e=this["notificacionesPor"+t].map((function(t){return{IdChat:t.IdChat,IdCaso:t.IdCaso,IdMediador:t.IdMediador,IdContacto:t.IdContacto,Telefono:t.Telefono,Caratula:t.Caratula,IdMensaje:t.IdMensaje,Contenido:t.Contenido}}));localStorage.setItem("DOCDOCTOKENPWA",sessionStorage.getItem("DOCDOCTOKENPWA")),localStorage.setItem("DOCDOCDEBECAMBIARPASS",sessionStorage.getItem("DOCDOCDEBECAMBIARPASS")),localStorage.setItem("DOCDOCUSUARIOLOGUEADO",sessionStorage.getItem("DOCDOCUSUARIOLOGUEADO")),localStorage.setItem("mensajes",JSON.stringify(e)),localStorage.setItem("toRoute",!0);var o=this.$router.resolve({name:"ChatNotificaciones"});window.open(o.href,"_blank")}}},P=N,E=(o("b3a9"),Object(M["a"])(P,O,k,!1,null,"5255432c",null)),D=E.exports,T=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-item",{staticClass:"notificacion",staticStyle:{"align-items":"center"}},[o("q-item-section",{on:{click:function(e){return t.irVencimientos()}}},[o("div",{staticClass:"row items-end"},[o("q-icon",{staticClass:"on-left",attrs:{name:"new_releases",color:"red",size:"sm"}}),o("div",{staticStyle:{"justify-content":"center","text-align":"center"}},[t._v("\n            Vencimientos\n        ")])],1)])],1)},L=[],A={name:"BotonVencimientos",methods:{irVencimientos:function(){var t=this.$router.resolve({name:"Vencimientos"});window.open(t.href,"_blank"),this.$emit("vencimientosVistos")}}},$=A,V=(o("451f"),Object(M["a"])($,T,L,!1,null,"692fa2bc",null)),U=V.exports,R={name:"VentanaUsuario",components:{NotificacionesMensajes:D,BotonVencimientos:U},props:{notificaciones:{type:Array,default:function(){return[]}},notificacionesMediadores:{type:Array,default:function(){return[]}},notificacionesContactos:{type:Array,default:function(){return[]}},verVencimientos:{type:Boolean,default:function(){return[]}}},methods:{leerNotificacion:function(t,e){this.$emit("notificacionLeida",t,e)}}},J=R,B=(o("5bb8"),Object(M["a"])(J,j,w,!1,null,"50e065da",null)),G=B.exports,F=(o("6762"),o("2fdb"),function(t){var e=t.$router.currentRoute.path,o=t.$router.currentRoute.query,n=function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.$router.push({name:e,query:o})},i={nuevoMovimiento:{accion:!0,noti:function(){return!0},botones:function(t){var e=this;return[{label:"Ver caso",color:"primary",handler:function(){e.tapped(t)}}]},tapped:function(i){var a=o.id?parseInt(o.id):0,s=parseInt(i.id),c=e.includes("Caso")&&s===a;c?t.forceRender():n("Caso",{id:s})},icon:"work"}},a=function(t){if(C["a"].isLoggedIn&&t){var e=t.tipo?i[t.tipo]:{noti:function(){return!0},icon:"",accion:!1};!t.wasTapped&&e.noti(t)?f["a"].create({classes:"full-width",message:s(t.title,t.body),color:"white",textColor:"black",html:!0,position:"top",icon:e.icon,actions:e.accion?e.botones(t):[]}):e.accion&&e.tapped(t)}},s=function(t,e){return'<div class="column">\n                    <span class="q-subheading">\n                        '.concat(t,"\n                    </span>\n                    <span>\n                        ").concat(e,"\n                    </span>\n                </div>")};setTimeout((function(){window.FCM.onNotification(a),window.FCM.getInitialPushPayload().then(a)}),200)});function z(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function K(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?z(Object(o),!0).forEach((function(e){d()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):z(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var Y={name:"DocdocLayout",data:function(){return{pageKey:0,leftDrawerOpen:!1,isLoggedIn:!1,consultaModal:!1,usuarioLogueado:"",Notificaciones:[],screenshotModal:!1,screenshot_titulo:"",screenshot_descripcion:"",inputFillCancelled:!1,textareaFillCancelled:!1,screenshotImage:"",loading:!1,cantidadNotificaciones:0,notificaciones:[],notificacionesMediadores:[],notificacionesContactos:[],verVencimientos:!1,IdInterval:"",consulta:{}}},components:{LoadingInButton:S,VentanaUsuario:G,QSpinner:m["a"]},computed:{notificacionesComp:function(){return this.notificaciones.length?this.notificaciones:sessionStorage.getItem(this.mostrarUsuario())?JSON.parse(sessionStorage.getItem(this.mostrarUsuario())):[]},notificacionesMediadoresComp:function(){return this.notificacionesMediadores.length?this.notificacionesMediadores:sessionStorage.getItem("msjMediador")?JSON.parse(sessionStorage.getItem("msjMediador")):[]},notificacionesContactosComp:function(){return this.notificacionesContactos.length?this.notificacionesContactos:sessionStorage.getItem("msjContacto")?JSON.parse(sessionStorage.getItem("msjContacto")):[]},textareaShadowText:function(){if(!0===this.textareaFillCancelled)return"";var t="",e="string"!==typeof this.screenshot_descripcion||0===this.screenshot_descripcion.length;return!0===e?t.split("\n")[0]:0!==t.indexOf(this.screenshot_descripcion)?"":t.split(this.screenshot_descripcion).slice(1).join(this.screenshot_descripcion).split("\n")[0]}},created:function(){var t=this;F(this),this.isLoggedIn=C["a"].isLoggedIn,this.isLoggedIn&&(g["a"].Get("/movimientos/movimientos-del-dia",{},(function(e){e.Error||e.length>1&&(t.verVencimientos=!0)})),localStorage.intervalChatGlobal&&clearInterval(localStorage.intervalChatGlobal)),C["a"].addCallbackLogin((function(){t.isLoggedIn=C["a"].isLoggedIn})),C["a"].addCallbackLogin((function(){t.isLoggedIn&&(g["a"].Get("/movimientos/movimientos-del-dia",{},(function(e){e.Error||e.length>1&&(t.verVencimientos=!0)})),localStorage.intervalChatGlobal&&clearInterval(localStorage.intervalChatGlobal))}));var e=[];sessionStorage.setItem(this.mostrarUsuario(),JSON.stringify(e))},methods:{openURL:u["a"],forceRender:function(){this.pageKey+=1},altaMovimiento:function(){var t=0;this.$route.params&&this.$route.params.idCaso&&(t=this.$route.params.idCaso),this.$router.push("/AltaMovimiento/".concat(t))},enviarConsulta:function(){var t=this;if(!this.consulta.Apynom||!this.consulta.Texto||!this.consulta.Telefono)return this.$q.notify("Debe llenar todos los campos para continuar"),null;this.loading=!0,g["a"].Post("/consultas",this.consulta,(function(e){if(e.Error)t.$q.notify("Hubo un error en el servidor, por favor intentelo de nuevo mas tarde.");else{var o=K(K(K({},e),t.consulta),{},{fecha:p()().format("DD-MM-YYYY")}),n=[];if(localStorage.getItem("mis_consultas_docdoc")){var i=localStorage.getItem("mis_consultas_docdoc");n=JSON.parse(i)}n.push(o),localStorage.setItem("mis_consultas_docdoc",JSON.stringify(n)),t.$q.notify("Su consulta fue enviada con exito, en breve un abogado de nuestros estudios se comunicara con usted"),t.$router.push({path:"/Consultas"})}t.consultaModal=!1,t.loading=!1}))},cancelarConsulta:function(){this.consulta={Apynom:"",Texto:"",Telefono:""},this.consultaModal=!1},mostrarUsuario:function(){var t=C["a"].UsuarioLogueado;return t?"".concat(t.Apellidos?t.Apellidos:"sin datos",", ").concat(t.Nombres?t.Nombres:"sin datos"):""},cerrarScreenshotModal:function(){this.screenshotModal=!1,this.screenshot_titulo="",this.screenshot_descripcion=""},tomarScreenshot:function(){this.screenshotModal=!0,b()(document.getElementsByTagName("body")[0],{dpi:192,x:window.scrollX,y:window.scrollY}).then((function(t){document.getElementById("screenshot_container").appendChild(t)}))},enviarScreenshot:function(){var t=this;if(this.screenshot_titulo.length&&this.screenshot_descripcion.length>=100){var e=document.getElementById("screenshot_container").firstChild,o=e.toDataURL("image/jpeg",1),n={title:this.screenshot_titulo,desc:this.screenshot_descripcion,image:o.slice(23,o.length)};this.loading=!0,g["a"].Post("/report",n,(function(e){e.error?(t.$q.notify({color:"secondary",timeout:800,message:e.error}),t.screenshot_titulo="",t.screenshot_descripcion=""):(t.$q.notify({color:"primary",timeout:800,message:"Reporte enviado exitosamente!"}),t.loading=!1,t.screenshotModal=!1,t.screenshot_titulo="",t.screenshot_descripcion="")}))}else f["a"].create("Por favor, complete los campos correctamente")},buscarNotificaciones:function(){var t=this;g["a"].Get("/mensajes/nuevos-mensajes",{},(function(e){if(e.Error)console.log("Error en el loop global.");else if(e.length)if(sessionStorage.getItem(t.mostrarUsuario())){var o=[];e.forEach((function(e){t.notificacionRepetida(e,"caso")||o.push(e)})),t.enviarNotificacion(o,"caso")}else t.enviarNotificacion(e,"caso")})),g["a"].Get("/mensajes/nuevos-mensajes",{mediador:"mediador"},(function(e){if(e.Error)console.log("Error en el loop global.");else if(e.length)if(sessionStorage.getItem("msjMediador")){var o=[];e.forEach((function(e){t.notificacionRepetida(e,"mediador")||o.push(e)})),t.enviarNotificacion(o,"mediador")}else t.enviarNotificacion(e,"mediador")})),g["a"].Get("/mensajes/nuevos-mensajes",{contacto:"contacto"},(function(e){if(e.Error)console.log("Error en el loop global.");else if(e.length)if(sessionStorage.getItem("msjContacto")){var o=[];e.forEach((function(e){t.notificacionRepetida(e,"contacto")||o.push(e)})),t.enviarNotificacion(o,"contacto")}else t.enviarNotificacion(e,"contacto")}))},enviarNotificacion:function(t,e){if(t.length){var o="";switch(e){case"caso":o=this.mostrarUsuario();break;case"mediador":o="msjMediador";break;case"contacto":o="msjContacto";break}var n=sessionStorage.getItem(o)?JSON.parse(sessionStorage.getItem(o)):[];switch(t.forEach((function(t){n.push(t)})),sessionStorage.setItem(o,JSON.stringify(n)),e){case"caso":this.notificaciones=n;break;case"mediador":this.notificacionesMediadores=n;break;case"contacto":this.notificacionesContactos=n;break}var i={},a=this.notificaciones.filter((function(t){var e=!i[t.IdChat];return i[t.IdChat]=!0,e})),s={},c=this.notificacionesMediadores.filter((function(t){var e=!s[t.IdChat];return s[t.IdChat]=!0,e})),r={},l=this.notificacionesContactos.filter((function(t){var e=!r[t.IdChat];return r[t.IdChat]=!0,e}));this.cantidadNotificaciones=a.length+c.length+l.length,f["a"].create("Recibiste ".concat(t.length," mensajes nuevos"))}},notificacionRepetida:function(t,e){var o=!1,n="";switch(e){case"caso":n=this.mostrarUsuario();break;case"mediador":n="msjMediador";break;case"contacto":n="msjContacto";break}if(sessionStorage.getItem(n)){var i=JSON.parse(sessionStorage.getItem(n));i.forEach((function(e){e.IdMensaje===t.IdMensaje&&(o=!0)}))}return o},confirmarNotificacion:function(t,e){var o=this;return r()(s.a.mark((function n(){var i,a,c,r,l,d,u;return s.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,o.borrarNotificacion(t.item,e);case 2:i=n.sent,n.t0=e,n.next="caso"===n.t0?6:"mediador"===n.t0?9:"contacto"===n.t0?12:15;break;case 6:return o.notificaciones=i,sessionStorage.setItem(o.mostrarUsuario(),JSON.stringify(i)),n.abrupt("break",15);case 9:return o.notificacionesMediadores=i,sessionStorage.setItem("msjMediador",JSON.stringify(i)),n.abrupt("break",15);case 12:return o.notificacionesContactos=i,sessionStorage.setItem("msjContacto",JSON.stringify(i)),n.abrupt("break",15);case 15:a={},c=o.notificaciones.filter((function(t){var e=!a[t.IdChat];return a[t.IdChat]=!0,e})),r={},l=o.notificacionesMediadores.filter((function(t){var e=!r[t.IdChat];return r[t.IdChat]=!0,e})),d={},u=o.notificacionesContactos.filter((function(t){var e=!d[t.IdChat];return d[t.IdChat]=!0,e})),o.cantidadNotificaciones=c.length+l.length+u.length;case 22:case"end":return n.stop()}}),n)})))()},borrarNotificacion:function(t,e){switch(e){case"caso":return this.notificaciones.filter((function(e){return e.Caratula!==t.Caratula}));case"mediador":return this.notificacionesMediadores.filter((function(e){return e.IdMediador!==t.IdMediador}));case"contacto":return this.notificacionesContactos.filter((function(e){return e.IdContato!==t.IdContato}))}},processTextareaFill:function(t){void 0!==t&&(27===t.keyCode?!0!==this.textareaFillCancelled&&(this.textareaFillCancelled=!0):9===t.keyCode?!0!==this.textareaFillCancelled&&this.textareaShadowText.length>0&&(stopAndPrevent(t),this.screenshot_descripcion=("string"===typeof this.screenshot_descripcion?this.screenshot_descripcion:"")+this.textareaShadowText):!0===this.textareaFillCancelled&&(this.textareaFillCancelled=!1))}}},H=Y,W=(o("8872"),Object(M["a"])(H,n,i,!1,null,null,null));e["default"]=W.exports}}]);