(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{"013f":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",[s("div",{staticClass:"row nuevo-fondo avenir-next--medium login-container full-width full-height"},["inicio"===e.paso?s("div",{staticClass:"col-sm-6 col-xs-12 container-form column items-center justify-center q-pa-none inicio"},[s("q-card-section",{staticClass:"flex titulo-login"},[s("span",[e._v("Orientación Legal de Bolsillo")])]),s("q-card-section",{staticClass:"column botones-login full-width"},[s("a",{staticClass:"cursor-pointer max-width-cajas --italic recuperar-cuenta",on:{click:e.habilitarRecuperarCuenta}},[e._v("\n          Recuperar cuenta\n        ")]),s("q-btn",{staticClass:"boton-login max-width-cajas avenir-next full-width q-mb-md",attrs:{dense:"",outline:""},on:{click:function(t){e.paso="VerificarUsuario"}}},[e._v("\n          Iniciar sesión\n        ")]),s("q-btn",{staticClass:"boton-login max-width-cajas avenir-next full-width q-mb-md",attrs:{dense:"",outline:""},on:{click:e.habilitarRegistro}},[e._v("\n          Registrarse\n        ")]),s("q-btn",{staticClass:"boton-login max-width-cajas avenir-next full-width",attrs:{dense:"",outline:""},on:{click:function(t){e.consultaModal=!0}}},[e._v("\n          Consulte a DocDoc!\n        ")])],1)],1):e._e(),"VerificarUsuario"===e.paso?s("div",{staticClass:"col-sm-6 col-xs-12 container-form column items-center justify-center"},[s("InicioSesion",{attrs:{titulo:"Iniciar sesión",continuar:"Ingresar",error:e.user.validate.Usuario,loading:e.loading,execute:e.verificarUsuario,recuperar:e.habilitarRecuperarCuenta,helper:"",subtitle:"Accede con tu cuenta Docdoc! Gestión",label:"Usuario"}},[s("q-input",{staticClass:"--medium",staticStyle:{width:"100%",margin:"0",padding:"0"},attrs:{dense:"",borderless:"","label-color":"dark",loading:e.loading,disabled:e.loading,label:"Usuario",autofocus:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.verificarUsuario(t)}},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{staticStyle:{"margin-left":"10px",color:"#1E4B74"},attrs:{name:"person"}})]},proxy:!0}],null,!1,818138196),model:{value:e.user.Usuario,callback:function(t){e.$set(e.user,"Usuario",t)},expression:"user.Usuario"}})],1)],1):e._e(),"VerificarCodigo"===e.paso?s("div",{staticClass:"col-sm-6 col-xs-12 container-form column items-center justify-center"},[s("InicioSesion",{attrs:{titulo:"Verificar código",continuar:"Ingresar",error:e.user.validate.Usuario,loading:e.loading,inicio:e.inicio,subtitle:"Ingresa el código que enviamos a tu casilla de correo",codigo:"Ingresa el código que enviamos a tu casilla de correo"}},[s("masked-input",{staticClass:"q-input-target verificacion-codigo",attrs:{loading:e.loading,disabled:e.loading,type:"tel",name:"codigo",mask:[/\d/,/\d/,/\d/,/\d/,/\d/],showMask:!0,placeholderChar:"_"},on:{input:e.verificarCodigo},model:{value:e.codigoVerificacion,callback:function(t){e.codigoVerificacion=t},expression:"codigoVerificacion"}})],1)],1):e._e(),"IngresarPassword"===e.paso?s("div",{staticClass:"col-sm-6 col-xs-12 container-form column items-center justify-center"},[s("InicioSesion",{attrs:{titulo:"Contraseña",subtitle:"Ingrese su contraseña para continuar",continuar:"Ingresar",error:e.user.validate.Password,loading:e.loading,execute:e.login,inicio:e.inicio}},[s("q-input",{ref:"userInput",staticStyle:{display:"none"},attrs:{loading:e.loading,disabled:e.loading,type:"text"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}},model:{value:e.user.Usuario,callback:function(t){e.$set(e.user,"Usuario",t)},expression:"user.Usuario"}}),s("q-input",{ref:"passInput",staticStyle:{width:"100%",margin:"0",padding:"0"},attrs:{dense:"",borderless:"","label-color":"dark",loading:e.loading,disabled:e.loading,label:"Contraseña",type:"password"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{staticStyle:{"margin-left":"10px",color:"#1E4B74"},attrs:{name:"lock"}})]},proxy:!0}],null,!1,3149978122),model:{value:e.user.Password,callback:function(t){e.$set(e.user,"Password",t)},expression:"user.Password"}})],1)],1):e._e(),"CambiarPassword"===e.paso?s("div",{staticClass:"col-sm-6 col-xs-12 container-form column items-center justify-center"},[s("InicioSesion",{attrs:{titulo:"Nueva contraseña",continuar:"Cambiar",error:e.errorPassword,loading:e.loading,execute:e.cambiarPass,inicio:e.inicio}},[s("q-input",{staticClass:"col-12",staticStyle:{width:"100%",margin:"0",padding:"0"},attrs:{dense:"","label-color":"dark",color:"grey-3",loading:e.loading,disabled:e.loading,label:"Ingrese su nueva contraseña",type:"password"},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{staticStyle:{"margin-left":"10px",color:"#1E4B74"},attrs:{name:"lock"}})]},proxy:!0}],null,!1,3149978122),model:{value:e.user.Password,callback:function(t){e.$set(e.user,"Password",t)},expression:"user.Password"}}),s("q-input",{staticClass:"col-12",staticStyle:{width:"100%",margin:"0",padding:"0"},attrs:{dense:"","label-color":"dark",color:"grey-3",loading:e.loading,disabled:e.loading,label:"Repetir contraseña",type:"password"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.cambiarPass(t)}},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{staticStyle:{"margin-left":"10px",color:"#1E4B74"},attrs:{name:"lock"}})]},proxy:!0}],null,!1,3149978122),model:{value:e.nuevoPass,callback:function(t){e.nuevoPass=t},expression:"nuevoPass"}})],1)],1):e._e(),s("div",{staticClass:"col-sm-6 col-xs-12 window-height row items-center justify-center img-login"},[s("div",{staticClass:"container-img"},[s("div",{staticClass:"login-img"})])])]),s("q-dialog",{staticStyle:{"background-color":"white"},model:{value:e.recuperarModal,callback:function(t){e.recuperarModal=t},expression:"recuperarModal"}},[s("q-card",{staticStyle:{"min-width":"400px"}},[s("q-item",{staticStyle:{"background-color":"black"}},[s("span",{staticClass:"q-subheading",staticStyle:{color:"white"}},[e._v("Recuperar Cuenta")])]),s("div",{staticStyle:{"margin-top":"20px","margin-left":"20px","margin-right":"20px","margin-bottom":"20px",display:"flex","justify-content":"center"}},[e._v("\n        Ingrese el email con el que fue registrado y su nueva contraseña.\n        "),s("br"),e._v("\n        Se le enviara un mail con su nombre de usuario y su nueva contraseña.\n      ")]),s("q-input",{staticStyle:{padding:"0 1rem 1rem 1rem"},attrs:{autogrow:"",label:"Email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),s("q-input",{staticStyle:{padding:"0 1rem 1rem 1rem"},attrs:{label:"Contraseña",type:"password"},model:{value:e.pass,callback:function(t){e.pass=t},expression:"pass"}}),s("br"),s("q-btn",{staticStyle:{"padding-top":"0px",float:"right","margin-bottom":"20px","margin-right":"20px"},attrs:{color:"red"},on:{click:function(t){return e.cancelar()}}},[e._v("Cancelar")]),s("q-btn",{staticStyle:{"padding-top":"0px",float:"right","margin-bottom":"20px","margin-right":"20px"},attrs:{color:"primary"},on:{click:function(t){return e.recuperarCuenta()}}},[e._v("Enviar")])],1)],1),s("q-dialog",{staticStyle:{"background-color":"white"},model:{value:e.registroModal,callback:function(t){e.registroModal=t},expression:"registroModal"}},[s("q-card",{staticStyle:{"min-width":"400px"}},[s("q-item",{staticStyle:{"background-color":"black"}},[s("span",{staticClass:"text-subtitle1",staticStyle:{color:"white"}},[e._v("Registrarse")])]),s("div",{staticClass:"q-px-md"},[s("q-input",{staticClass:"q-my-sm",attrs:{dense:"",label:"Apellidos",type:"text"},model:{value:e.userRegistro.Apellidos,callback:function(t){e.$set(e.userRegistro,"Apellidos",t)},expression:"userRegistro.Apellidos"}}),s("q-input",{staticClass:"q-my-sm",attrs:{dense:"",label:"Nombres",type:"text"},model:{value:e.userRegistro.Nombres,callback:function(t){e.$set(e.userRegistro,"Nombres",t)},expression:"userRegistro.Nombres"}}),s("q-input",{staticClass:"q-my-sm",attrs:{dense:"",label:"DNI",type:"number",hint:"Usamos su DNI para vincularlo con los casos en los que participa y para su usuario"},model:{value:e.userRegistro.Usuario,callback:function(t){e.$set(e.userRegistro,"Usuario",t)},expression:"userRegistro.Usuario"}}),s("q-input",{staticClass:"q-mt-lg",attrs:{dense:"",label:"Email",type:"text",color:e.validarEmail(e.userRegistro.Email)?"":"red","label-color":e.validarEmail(e.userRegistro.Email)?"":"red",hint:!e.validarEmail(e.userRegistro.Email)&&"Ingrese un email valido"},model:{value:e.userRegistro.Email,callback:function(t){e.$set(e.userRegistro,"Email",t)},expression:"userRegistro.Email"}}),s("q-input",{staticClass:"q-mb-sm q-mt-xs",attrs:{dense:"",label:"Telefono",type:"number"},model:{value:e.userRegistro.TelefonoUsuario,callback:function(t){e.$set(e.userRegistro,"TelefonoUsuario",t)},expression:"userRegistro.TelefonoUsuario"}}),s("q-input",{staticClass:"q-my-sm",attrs:{dense:"",label:"Contraseña",type:"password",hint:"La contraseña debe tener al menos 6 caracteres"},model:{value:e.userRegistro.Password,callback:function(t){e.$set(e.userRegistro,"Password",t)},expression:"userRegistro.Password"}}),s("q-input",{staticClass:"q-mt-sm",attrs:{dense:"",label:"Repita la contraseña",type:"password",color:e.userRegistro.Password===e.passAux?"":"red","label-color":e.userRegistro.Password===e.passAux?"":"red",hint:e.userRegistro.Password!==e.passAux&&"Las contraseñas no coinciden"},model:{value:e.passAux,callback:function(t){e.passAux=t},expression:"passAux"}})],1),s("span",{staticClass:"text-negative q-pl-lg text-caption"},[e._v("*Todos los campos son obligatorios")]),s("div",{staticClass:"full-width flex justify-center q-my-md"},[s("q-btn",{attrs:{color:"primary q-mr-md"},on:{click:e.registro}},[e._v("Enviar")]),s("q-btn",{attrs:{color:"red"},on:{click:e.cancelarRegistro}},[e._v("Cancelar")])],1)],1)],1),s("q-dialog",{staticStyle:{"background-color":"white"},model:{value:e.consultaModal,callback:function(t){e.consultaModal=t},expression:"consultaModal"}},[s("q-card",{staticStyle:{"min-width":"400px"}},[s("q-item",{staticStyle:{"background-color":"black"}},[s("span",{staticClass:"text-subtitle1",staticStyle:{color:"white"}},[e._v("Consulte a DocDoc!")])]),s("q-card-section",{staticClass:"flex titulo-login"},[s("span",[e._v("Respondemos tu consulta legal en menos de 5 minutos")])]),s("div",{staticClass:"q-px-md q-mb-lg"},[s("div",[e._v("\n          Deja tu consulta y en unos minutos la respondemos:\n        ")]),s("q-input",{staticClass:"q-my-sm",attrs:{dense:"",label:"Consulta",type:"textarea",rows:7},model:{value:e.consulta.Texto,callback:function(t){e.$set(e.consulta,"Texto",t)},expression:"consulta.Texto"}}),s("div",{staticClass:"q-mt-lg"},[e._v("\n          Tu nombre:\n        ")]),s("q-input",{staticClass:"q-my-sm",attrs:{dense:"",label:"Apellido y Nombre",type:"text"},model:{value:e.consulta.Apynom,callback:function(t){e.$set(e.consulta,"Apynom",t)},expression:"consulta.Apynom"}}),s("div",{staticClass:"q-mt-lg"},[e._v("\n          Dejanos tu celu asi podemos contactarte:\n        ")]),s("q-input",{staticClass:"q-my-sm",attrs:{dense:"",label:"Telefono",type:"number","bottom-slots":""},scopedSlots:e._u([{key:"hint",fn:function(){return[e._v("\n            Escribí tu número sin cero ni quince y sin guiones o espacios.\n            "),s("br"),e._v("\n            Ejemplo: 381785490\n          ")]},proxy:!0}]),model:{value:e.consulta.Telefono,callback:function(t){e.$set(e.consulta,"Telefono",t)},expression:"consulta.Telefono"}})],1),s("span",{staticClass:"text-negative q-pl-lg text-caption"},[e._v("*Todos los campos son obligatorios")]),s("div",{staticClass:"full-width flex justify-center q-my-md"},[e.loading?e._e():s("q-btn",{attrs:{color:"primary q-mr-md"},on:{click:e.enviarConsulta}},[e._v("Enviar")]),e.loading?s("q-spinner",{staticClass:"self-center",attrs:{color:"teal",size:"2em"}}):s("q-btn",{attrs:{color:"red"},on:{click:e.cancelarConsulta}},[e._v("Cancelar")])],1)],1)],1)],1)},o=[],i=(s("8e6e"),s("8a81"),s("9523")),n=s.n(i),r=(s("ac6a"),s("cadf"),s("06db"),s("456d"),s("a34a")),l=s.n(r),c=(s("96cf"),s("c973")),u=s.n(c),d=(s("6762"),s("2fdb"),s("c1df")),p=s.n(d),g=s("0d59"),m=s("3a34"),f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"InicioSesion"}},[s("q-card-section",{staticClass:"flex titulo-login"},[s("span",[e._v("Orientación Legal de Bolsillo")])]),e.codigo?s("div",{staticClass:"text-subtitle2",staticStyle:{"padding-left":"16px",opacity:"0.4"}},[e._v(e._s(e.subtitle))]):e._e(),s("q-card-section",{staticClass:"field-login flex"},[s("q-field",{staticClass:"max-width-cajas",attrs:{outlined:"",dense:"","label-color":"dark",hint:e.helper,error:!!e.error(),"error-label":e.error()}},[e._t("default")],2)],1),s("q-card-section",{staticClass:"column botones-login"},[e.recuperar?s("a",{staticClass:"cursor-pointer max-width-cajas --italic recuperar-cuenta",on:{click:e.recuperar}},[e._v("\n      Recuperar cuenta\n    ")]):e._e(),e.inicio?s("a",{staticClass:"cursor-pointer max-width-cajas --italic recuperar-cuenta",on:{click:e.inicio}},[e._v("\n      Usar otra cuenta\n    ")]):e._e(),e.execute?s("q-btn",{staticClass:"boton-login max-width-cajas avenir-next",attrs:{dense:"",outline:""},on:{click:e.execute}},[e._v("\n    "+e._s(e.continuar)+"\n    ")]):e._e()],1)],1)},b=[],h={props:["value","titulo","label","continuar","error","loading","execute","inicio","helper","subtitle","recuperar","codigo"],methods:{recibirInput:function(e){this.$emit("input",e)}}},v=h,y=(s("35af"),s("2877")),x=Object(y["a"])(v,f,b,!1,null,null,null),k=x.exports,q=s("b628"),w=s("8daa");function C(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function _(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?C(Object(s),!0).forEach((function(t){n()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):C(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var P={name:"Login",components:{InicioSesion:k,QSpinner:g["a"]},data:function(){return{paso:"inicio",user:m["a"].Usuarios(),codigoVerificacion:"",nuevoPass:"",oldPass:"",loading:!1,lock:[!0],recuperarModal:!1,registroModal:!1,consultaModal:!1,email:"",pass:"",consulta:{Apynom:"",Texto:"",Telefono:""},userRegistro:{Apellidos:"",Nombres:"",Usuario:"",Password:"",Email:"",TelefonoUsuario:""},passAux:""}},created:function(){this.inicio()},methods:{habilitarRecuperarCuenta:function(){this.recuperarModal=!0},habilitarRegistro:function(){this.registroModal=!0},inicio:function(){this.paso="inicio",this.user.Usuario="",this.user.Password="",this.codigoVerificacion="",this.nuevoPass="",this.oldPass="",this.lock=[!0],q["a"].logout()},errorPassword:function(){var e=this.user.validate.Password();return e||(this.nuevoPass.length>=this.user.Password.length&&this.nuevoPass!==this.user.Password?"Las contraseñas no coinciden":"")},redirect:function(){var e=this.$route.params.redirect;e&&!e.includes("Login")||(e="/"),"undefined"!==typeof q["a"].UsuarioLogueado.IdRol&&(console.log("cadete"),e="/Maps"),this.$router.push({path:e})},getToken:function(){var e=this;return u()(l.a.mark((function t(){var s;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,window.FCM.getToken();case 2:s=t.sent,w["a"].Post("/usuarios/set-token-app",{TokenApp:s},(function(t){t.Error?e.$q.notify(t.Error):e.$q.notify("Token guardado")}));case 4:case"end":return t.stop()}}),t)})))()},login:function(){var e=this;this.loading=!0,q["a"].login(this.user,(function(t){e.loading=!1,"S"===t?(e.oldPass=e.user.Password,e.paso="CambiarPassword"):"N"===t&&(e.getToken(),e.redirect())}))},cambiarPass:function(){var e=this;this.user.Password===this.nuevoPass&&(this.loading=!0,q["a"].cambiarPass(this.oldPass,this.nuevoPass,(function(t){e.loading=!1,q["a"].isLoggedIn||(e.paso="VerificarUsuario"),t&&(e.getToken(),e.redirect())})))},verificarUsuario:function(){var e=this;this.loading=!0,q["a"].verificarUsuario(this.user.Usuario,(function(t){e.loading=!1,"S"===t?e.paso="VerificarCodigo":"N"===t&&(e.paso="IngresarPassword",e.$nextTick((function(){e.$refs.passInput.focus()})))}))},esNumerico:function(){for(var e=["0","1","2","3","4","5","6","7","8","9"],t=0;t<this.codigoVerificacion.length;t++)if(!e.includes(this.codigoVerificacion[t]))return!1;return!0},verificarCodigo:function(){var e=this;this.esNumerico()&&this.lock.pop()&&(this.loading=!0,q["a"].verificarCodigo(this.user.Usuario,this.codigoVerificacion,(function(t){e.lock.push(!0),e.loading=!1,t&&(e.oldPass=e.codigoVerificacion,e.paso="CambiarPassword"),e.codigoVerificacion=""})))},cancelar:function(){this.email="",this.pass="",this.recuperarModal=!1},recuperarCuenta:function(){var e=this;this.email&&this.pass?w["a"].Post("/usuarios/recuperar-cuenta",{Email:this.email,Pass:this.pass},(function(t){t.Error?e.$q.notify(t.Error):(e.email="",e.pass="",e.recuperarModal=!1,e.$q.notify("Se ha cambiado la contraseña exitosamente, ya puedes loguearte con tu cuenta."))})):this.$q.notify("Rellene ambos campos para continuar")},registro:function(){var e=this,t=Object.keys(this.userRegistro),s=!1;return t.forEach((function(t){e.userRegistro[t]||(s=!0)})),s?(this.$q.notify("Debe llenar todos los campos para continuar"),null):this.userRegistro.Password!==this.passAux?(this.$q.notify("Las contraseñas no coinciden"),null):this.validarEmail(this.userRegistro.Email)?this.userRegistro.Usuario.length<8?(this.$q.notify("Ingrese un DNI valido"),null):this.userRegistro.Password.length<6?(this.$q.notify("La contraseña debe tener al menos 6 caracteres"),null):void w["a"].Post("/usuarios/alta-cliente",this.userRegistro,(function(t){t.Error?e.$q.notify(t.Error):(e.$q.notify("Su cuenta se creo con exito, ya puede loguearse en DocDoc! Clientes"),e.cancelarRegistro())})):(this.$q.notify("Ingrese un email válido"),null)},cancelarRegistro:function(){this.userRegistro={Apellidos:"",Nombres:"",Usuario:"",Password:"",Email:"",TelefonoUsuario:""},this.passAux="",this.registroModal=!1},enviarConsulta:function(){var e=this;if(!this.consulta.Apynom||!this.consulta.Texto||!this.consulta.Telefono)return this.$q.notify("Debe llenar todos los campos para continuar"),null;this.loading=!0,w["a"].Post("/consultas",this.consulta,(function(t){if(t.Error)e.$q.notify("Hubo un error en el servidor, por favor intentelo de nuevo mas tarde.");else{var s=_(_(_({},t),e.consulta),{},{fecha:p()().format("DD-MM-YYYY")}),a=[];if(localStorage.getItem("mis_consultas_docdoc")){var o=localStorage.getItem("mis_consultas_docdoc");a=JSON.parse(o)}a.push(s),localStorage.setItem("mis_consultas_docdoc",JSON.stringify(a)),e.$q.notify("Su consulta fue enviada con exito, en breve un abogado de nuestros estudios se comunicara con usted")}e.consultaModal=!1,e.loading=!1}))},cancelarConsulta:function(){this.consulta={Apynom:"",Texto:"",Telefono:""},this.consultaModal=!1},validarEmail:function(e){if(""===e)return!0;var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return!!t.test(String(e).toLowerCase())}}},S=P,R=(s("2c53"),Object(y["a"])(S,a,o,!1,null,null,null));t["default"]=R.exports},"2c53":function(e,t,s){"use strict";var a=s("b47d"),o=s.n(a);o.a},"35af":function(e,t,s){"use strict";var a=s("959e"),o=s.n(a);o.a},"959e":function(e,t,s){},b47d:function(e,t,s){}}]);