(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"2f84":function(o,s,t){},"38a2":function(o,s,t){"use strict";t.r(s);var a=function(){var o=this,s=o.$createElement,t=o._self._c||s;return t("q-page",[t("div",{staticClass:"shadow-1",staticStyle:{background:"white",padding:"1em 1em 1em 1em","margin-top":"-.5em"}},[t("q-input",{staticStyle:{margin:"0 .6em 0 .6em"},attrs:{debounce:600,placeholder:"Buscar Casos"},on:{change:o.buscarCaso},model:{value:o.busqueda,callback:function(s){o.busqueda=s},expression:"busqueda"}}),t("q-btn-group",{attrs:{flat:"",push:""}},[t("q-btn",{staticStyle:{"font-size":"12px"},attrs:{push:"",label:"Todos",outline:"t"===o.tipoBusqueda,color:"primary"},on:{click:function(s){o.tipoBusqueda="t"}}}),t("q-btn",{staticStyle:{"font-size":"12px"},attrs:{push:"",label:"Personas",outline:"p"===o.tipoBusqueda,color:"primary"},on:{click:function(s){o.tipoBusqueda="p"}}}),t("q-btn",{staticStyle:{"font-size":"12px"},attrs:{push:"",label:"Juzgados",outline:"j"===o.tipoBusqueda,color:"primary"},on:{click:function(s){o.tipoBusqueda="j"}}}),t("q-btn",{staticStyle:{"font-size":"12px"},attrs:{push:"",label:"Tipos de Casos",outline:"c"===o.tipoBusqueda,color:"primary"},on:{click:function(s){o.tipoBusqueda="c"}}}),t("q-btn",{staticStyle:{"font-size":"12px"},attrs:{push:"",label:"NÂ° Expediente",outline:"e"===o.tipoBusqueda,color:"primary"},on:{click:function(s){o.tipoBusqueda="e"}}})],1),t("q-checkbox",{attrs:{label:"No archivados"},on:{input:function(s){return o.filtrarArchivados()}},model:{value:o.verAlta,callback:function(s){o.verAlta=s},expression:"verAlta"}}),t("q-checkbox",{staticStyle:{"margin-left":"10px"},attrs:{label:"Archivados"},on:{input:function(s){return o.filtrarArchivados()}},model:{value:o.verArchivados,callback:function(s){o.verArchivados=s},expression:"verArchivados"}}),o.isMobile()?o._e():t("q-btn-group",{staticStyle:{"margin-left":"20px"},attrs:{outline:""}},[t("q-btn",{attrs:{outline:"",icon:"list"},on:{click:function(s){o.modo="casos__listado"}}}),t("q-btn",{attrs:{outline:"",icon:"grid_on"},on:{click:function(s){o.modo="casos__grilla"}}})],1)],1),0===o.casos.length&&o.loading?t("div",[t("Loading")],1):t("div",[t("q-infinite-scroll",{key:o.busqueda,staticClass:"casos__container",staticStyle:{width:"100%",padding:"0px",margin:"0px"},attrs:{disable:o.noHayMasCasos,offset:500},on:{load:o.onLoad},scopedSlots:o._u([{key:"loading",fn:function(){return[t("div",{staticClass:"row justify-center q-my-md"},[t("q-spinner-dots",{staticStyle:{position:"fixed",bottom:"10px",left:"50%"},attrs:{color:"primary",size:"100px"}})],1)]},proxy:!0}])},o._l(o.buscarCaso,(function(s){return t("TarjetaCaso",{key:s.IdCaso,staticStyle:{"margin-top":"2rem","margin-bottom":"2rem","box-shadow":"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)"},attrs:{caso:s,clases:o.modo,perentorioHome:!0},on:{quitar:function(s){return o.quitarCaso(s)}}})})),1)],1)])},e=[],n=(t("6762"),t("2fdb"),t("7a13")),i=t("8daa"),r=t("3a5e"),u={components:{TarjetaCaso:n["a"],Loading:r["a"]},name:"Casos",data:function(){return{casos:[],busqueda:"",tipoBusqueda:"t",estado:"A",verAlta:!0,verArchivados:!1,noHayMasCasos:!1,modo:"casos__grilla",loading:!0,objetivos:[],idCasos:[]}},created:function(){var o=this;i["a"].Get("/casos",{Estado:"T"},(function(s){s.Error||(s.forEach((function(s){o.idCasos.push(s.IdCaso);try{s.PersonasCaso=JSON.parse(s.PersonasCaso)}catch(t){console.log(t),s.PersonasCaso=[]}o.casos.push(s)})),i["a"].Get("/objetivos?IdsCaso=[".concat(o.idCasos,"]"),{},(function(s){s.Error||o.casos.map((function(o){o.Objetivos=s[o.IdCaso]})),o.loading=!1})),o.casos=o.casos.sort((function(o,s){return o.FechaAlta<s.FechaAlta?1:o.FechaAlta>s.FechaAlta?-1:0})))}))},computed:{buscarCaso:function(){var o=this,s=this.casos.filter((function(s){return s.Estado===o.estado||"T"===o.estado}));switch(this.tipoBusqueda){case"t":return s.filter((function(s){return s.Caratula.toLowerCase().includes(o.busqueda.toLowerCase())||s.Juzgado.toLowerCase().includes(o.busqueda.toLowerCase())||s.TipoCaso.toLowerCase().includes(o.busqueda.toLowerCase())||s.NroExpediente.includes(o.busqueda)||s.PersonasCaso.filter((function(s){return s.Nombres&&s.Nombres.toLowerCase().includes(o.busqueda.toLowerCase())||s.Apellidos&&s.Apellidos.toLowerCase().includes(o.busqueda.toLowerCase())||s.Documento&&s.Documento.toLowerCase().includes(o.busqueda.toLowerCase())})).length}));case"p":return s.filter((function(s){return s.PersonasCaso.filter((function(s){return s.Nombres&&s.Nombres.toLowerCase().includes(o.busqueda.toLowerCase())||s.Apellidos&&s.Apellidos.toLowerCase().includes(o.busqueda.toLowerCase())||s.Documento&&s.Documento.includes(o.busqueda)})).length}));case"j":return s.filter((function(s){return s.Juzgado.toLowerCase().includes(o.busqueda.toLowerCase())}));case"c":return s.filter((function(s){return s.TipoCaso.toLowerCase().includes(o.busqueda.toLowerCase())}));case"e":return s.filter((function(s){return s.NroExpediente.includes(o.busqueda)}))}}},watch:{busqueda:function(){this.casos=[],this.loading=!0,this.onLoad(0,(function(){}))}},methods:{onLoad:function(o,s){var t=this;i["a"].Get("/casos",{Estado:"T",Offset:this.casos.length,Cadena:this.busqueda,Tipo:this.tipoBusqueda.toUpperCase()},(function(o){o.Error||(o.forEach((function(o){try{o.PersonasCaso=JSON.parse(o.PersonasCaso)}catch(s){console.log(s),o.PersonasCaso=[]}t.casos.push(o)})),i["a"].Get("/objetivos?IdsCaso=[".concat(t.idCasos,"]"),{},(function(o){o.Error||t.casos.map((function(s){s.Objetivos=o[s.IdCaso]}))})),t.casos=t.casos.sort((function(o,s){return o.FechaAlta<s.FechaAlta?1:o.FechaAlta>s.FechaAlta?-1:0})),t.noHayMasCasos=0===o.length),t.loading=!1,s()}))},isMobile:function(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},quitarCaso:function(o){this.casos.splice(this.casos.indexOf(o),1)},filtrarArchivados:function(){this.verAlta&&this.verArchivados?this.estado="T":this.verArchivados?this.estado="R":(this.verAlta,this.estado="A")}}},c=u,l=(t("59fb"),t("2877")),d=Object(l["a"])(c,a,e,!1,null,null,null);s["default"]=d.exports},"59fb":function(o,s,t){"use strict";var a=t("2f84"),e=t.n(a);e.a}}]);