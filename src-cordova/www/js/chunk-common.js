(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[0],{0:function(e,t){},"001f":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-card",{staticStyle:{"background-color":"white"}},[a("q-item",{staticStyle:{"background-color":"black"}},[a("span",{staticClass:"q-subheading",staticStyle:{color:"white"}},[e._v("Mediacion del caso")])]),a("div",{staticStyle:{margin:"10px 20px 10px 20px"}},[e.IdMediacion||e.CargarMediacion?e._e():a("div",[e._v("\n      Este caso no tiene mediacion cargada\n      "),a("br"),e._v("\n      ¿Desea cargar datos de la mediacion?\n      "),a("br"),a("q-btn",{staticClass:"text-capitalize",staticStyle:{"padding-top":"0px",float:"right","margin-bottom":"10px","margin-right":"20px","margin-top":"10px"},attrs:{color:"red"},on:{click:function(t){return e.$emit("cerrar")}}},[e._v("Cerrar")]),a("q-btn",{staticClass:"text-capitalize",staticStyle:{"padding-top":"0px",float:"right","margin-bottom":"10px","margin-right":"20px","margin-top":"10px"},attrs:{color:"primary"},on:{click:function(t){e.CargarMediacion=!0}}},[e._v("Cargar Datos")])],1),e.IdMediacion?a("div",{staticStyle:{width:"500px"}},[e.DatosMediacion.IdMediador?a("q-tabs",{staticClass:"text-black",staticStyle:{padding:"0",margin:"0"},attrs:{dense:"","active-color":"white","indicator-color":"skyblue",align:"left","narrow-indicator":""},on:{input:e.changeTab},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab",{staticClass:"bg-primary",attrs:{name:"mediacion",label:"Mediacion"}}),a("q-tab",{staticClass:"bg-primary",attrs:{name:"mediador",label:"Mediador"}})],1):e._e(),e.loading?a("div",[a("Loading")],1):a("q-tab-panels",{staticClass:"bg-transparent",attrs:{animated:"","keep-alive":""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab-panel",{staticStyle:{padding:"0"},attrs:{name:"mediacion"}},[e.EditarMediacion?a("div",[a("div",{staticClass:"row",staticStyle:{"justify-content":"space-between"}},[a("q-select",{staticStyle:{width:"47%","margin-top":"5px"},attrs:{label:"Bonos",options:e.opcionesBonos},on:{input:e.cambiarFechaBonos},model:{value:e.BonoSeleccionado,callback:function(t){e.BonoSeleccionado=t},expression:"BonoSeleccionado"}}),a("q-select",{staticStyle:{width:"47%","margin-top":"5px"},attrs:{label:"Beneficios",options:e.opcionesBeneficios},on:{input:e.cambiarFechaPresentado},model:{value:e.BeneficioSeleccionado,callback:function(t){e.BeneficioSeleccionado=t},expression:"BeneficioSeleccionado"}})],1),a("div",{staticClass:"row",staticStyle:{"justify-content":"space-between"}},[a("q-input",{staticStyle:{width:"47%"},attrs:{label:"Fecha Bonos",mask:"##-##-####",rules:[function(e){return/^-?[0-3]\d-[0-1]\d-[\d]+$/.test(e)||"Fecha invalida"}]},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy1",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY",label:"Fecha Bonos"},on:{input:function(){return e.$refs.qDateProxy1.hide()}},model:{value:e.FechaBonos,callback:function(t){e.FechaBonos=t},expression:"FechaBonos"}})],1)],1)]},proxy:!0}],null,!1,67479479),model:{value:e.FechaBonos,callback:function(t){e.FechaBonos=t},expression:"FechaBonos"}}),a("q-input",{staticStyle:{width:"47%"},attrs:{label:"Fecha Presentado",mask:"##-##-####",rules:[function(e){return/^-?[0-3]\d-[0-1]\d-[\d]+$/.test(e)||"Fecha invalida"}]},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy2",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY",label:"Fecha Presentado"},on:{input:function(){return e.$refs.qDateProxy2.hide()}},model:{value:e.FechaPresentado,callback:function(t){e.FechaPresentado=t},expression:"FechaPresentado"}})],1)],1)]},proxy:!0}],null,!1,4135960663),model:{value:e.FechaPresentado,callback:function(t){e.FechaPresentado=t},expression:"FechaPresentado"}})],1),e.checkFechaProximaAudiencia?a("div",{staticClass:"row",staticStyle:{"justify-content":"space-between"}},[a("q-input",{staticStyle:{width:"47%"},attrs:{label:"Fecha Proxima Audiencia",mask:"##-##-####"},on:{input:function(t){return e.fechaProximaAudienciaConMensaje()}},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy3",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY",label:"Fecha Proxima Audiencia"},on:{input:function(t){return e.fechaProximaAudienciaConMensaje()}},model:{value:e.FechaProximaAudiencia,callback:function(t){e.FechaProximaAudiencia=t},expression:"FechaProximaAudiencia"}})],1)],1)]},proxy:!0}],null,!1,416960919),model:{value:e.FechaProximaAudiencia,callback:function(t){e.FechaProximaAudiencia=t},expression:"FechaProximaAudiencia"}}),a("q-input",{staticStyle:{width:"47%"},attrs:{label:"Hora Proxima Audiencia",mask:"##:##"},on:{input:function(t){return e.fechaProximaAudienciaConMensaje()}},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{ref:"qTimeProxy1",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{format24h:"",mask:"HH:mm"},on:{input:function(t){return e.fechaProximaAudienciaConMensaje()}},model:{value:e.HoraProximaAudiencia,callback:function(t){e.HoraProximaAudiencia=t},expression:"HoraProximaAudiencia"}})],1)],1)]},proxy:!0}],null,!1,1388727643),model:{value:e.HoraProximaAudiencia,callback:function(t){e.HoraProximaAudiencia=t},expression:"HoraProximaAudiencia"}}),e.FechaProximaAudiencia&&e.HoraProximaAudiencia?a("q-checkbox",{staticStyle:{width:"47%"},attrs:{label:"Notificar nueva fecha al cliente."},on:{input:function(t){return e.verMensajeFechaAudiencia()}},model:{value:e.ConMensajeFechaAudiencia,callback:function(t){e.ConMensajeFechaAudiencia=t},expression:"ConMensajeFechaAudiencia"}}):e._e(),e.IdCalendario&&e.FechaProximaAudiencia&&e.HoraProximaAudiencia?a("q-checkbox",{staticStyle:{width:"47%"},attrs:{label:"Agendar en calendario."},model:{value:e.agendar,callback:function(t){e.agendar=t},expression:"agendar"}}):e._e()],1):e._e(),a("div",{staticClass:"row",staticStyle:{"justify-content":"space-between"}},[a("q-input",{staticStyle:{width:"47%"},attrs:{label:"Legajo"},on:{input:function(t){return e.editarMensajeCliente(e.DatosEditar.Legajo)}},model:{value:e.DatosEditar.Legajo,callback:function(t){e.$set(e.DatosEditar,"Legajo",t)},expression:"DatosEditar.Legajo"}}),a("q-checkbox",{staticStyle:{width:"47%"},attrs:{label:"Con Fecha de Audiencia"},on:{input:function(t){return e.resetFecha()}},model:{value:e.checkFechaProximaAudiencia,callback:function(t){e.checkFechaProximaAudiencia=t},expression:"checkFechaProximaAudiencia"}})],1)]):a("div",{staticClass:"row",staticStyle:{"justify-content":"space-between",position:"relative"}},[a("q-icon",{staticStyle:{position:"absolute",top:"5px",right:"5px",cursor:"pointer"},attrs:{right:"",color:"primary",name:"fas fa-edit",size:"20px"},on:{click:function(t){return e.habilitarEdicion()}}},[a("q-tooltip",[e._v("Editar datos")])],1),a("div",{staticClass:"col-6"},[a("data-item",{attrs:{text:e.DatosMediacion.IdMediador?e.DatosMediador.Nombre:"Sin Mediador Sorteado.","text-class":"text-weight-light text-h6",label:"Mediador",labelColor:"accent"}})],1),a("div",{staticClass:"col-6 justify-center self-center column",staticStyle:{display:"flex"}},[a("q-btn",{staticClass:"text-capitalize self-center",staticStyle:{"padding-top":"0px","margin-top":"10px",width:"60%"},attrs:{color:"accent"},on:{click:function(t){e.CargarMediador=!0}}},[e._v(e._s(e.DatosMediacion.IdMediador?"Cambiar":"Cargar")+" Mediador")]),e.DatosMediacion.IdMediador&&!e.crearChat?a("q-btn",{staticClass:"text-capitalize self-center",staticStyle:{"padding-top":"0px","margin-top":"10px",width:"60%"},attrs:{color:"teal"},on:{click:function(t){return e.abrirChat()}}},[e._v("Chat")]):e.DatosMediacion.IdMediador?a("q-spinner",{staticClass:"self-center",staticStyle:{"margin-top":"10px"},attrs:{color:"teal",size:"3em"}}):e._e()],1),a("div",{staticClass:"col-12"},[a("data-item",{attrs:{text:e.DatosMediacion.Legajo?e.DatosMediacion.Legajo:"Sin Legajo Cargado","text-class":"text-weight-light text-h6",label:"Legajo",labelColor:"accent"}})],1),a("div",{staticClass:"col-6"},[a("data-item",{attrs:{text:e.DatosMediacion.Bono?e.DatosMediacion.Bono:"Sin Bono Cargado","text-class":"text-weight-light text-h6",label:"Bono",labelColor:"accent"}})],1),a("div",{staticClass:"col-6"},[a("data-item",{attrs:{text:e.DatosMediacion.Beneficio?e.DatosMediacion.Beneficio:"Sin Beneficio Cargado","text-class":"text-weight-light text-h6",label:"Beneficio",labelColor:"accent"}})],1),a("div",{staticClass:"col-6"},[a("data-item",{attrs:{text:e.DatosMediacion.FechaBonos?e.DatosMediacion.FechaBonos:"Sin Fecha","text-class":"text-weight-light text-h6",label:"Fecha Bonos",labelColor:"accent"}})],1),a("div",{staticClass:"col-6"},[a("data-item",{attrs:{text:e.DatosMediacion.FechaPresentado?e.DatosMediacion.FechaPresentado:"Sin Fecha","text-class":"text-weight-light text-h6",label:"Fecha Presentado",labelColor:"accent"}})],1),a("div",{staticClass:"col-6"},[a("data-item",{attrs:{text:e.DatosMediacion.FechaProximaAudiencia?e.DatosMediacion.FechaProximaAudiencia.split(" ")[0]:"Sin Fecha Proxima Audiencia","text-class":"text-weight-light text-h6",label:"Fecha Proxima Audiencia",labelColor:"accent"}})],1),a("div",{staticClass:"col-6"},[a("data-item",{attrs:{text:e.DatosMediacion.FechaProximaAudiencia?e.DatosMediacion.FechaProximaAudiencia.split(" ")[1]:"Sin Fecha Proxima Audiencia","text-class":"text-weight-light text-h6",label:"Hora",labelColor:"accent"}})],1)],1)]),a("q-tab-panel",{staticStyle:{"padding-top":"0px"},attrs:{name:"mediador"}},[a("div",{staticClass:"row",staticStyle:{"justify-content":"space-between"}},[a("div",{staticClass:"col-12"},[a("data-item",{attrs:{text:e.DatosMediador.Nombre,"text-class":"text-weight-light text-h6",label:"Nombre",labelColor:"accent"}})],1),a("div",{staticClass:"col-6"},[a("data-item",{attrs:{text:e.DatosMediador.Registro?e.DatosMediador.Registro.toString():"Sin Datos","text-class":"text-weight-light text-h6",label:"Registro",labelColor:"accent"}})],1),a("div",{staticClass:"col-6"},[a("data-item",{attrs:{text:e.DatosMediador.MP?e.DatosMediador.MP:"Sin Datos","text-class":"text-weight-light text-h6",label:"MP",labelColor:"accent"}})],1),a("div",{staticClass:"col-12"},[a("data-item",{attrs:{text:e.DatosMediador.Domicilio?e.DatosMediador.Domicilio:"Sin Domicilio Cargado","text-class":"text-weight-light text-h6",label:"Domicilio",labelColor:"accent"}})],1),a("div",{staticClass:"col-12"},[a("data-item",{attrs:{text:e.DatosMediador.Telefono?e.DatosMediador.Telefono:"Sin Telefono Cargado","text-class":"text-weight-light text-h6",label:"Telefono",labelColor:"accent"}})],1),a("div",{staticClass:"col-12"},[a("data-item",{attrs:{text:e.DatosMediador.Email?e.DatosMediador.Email:"Sin Email Cargado","text-class":"text-weight-light text-h6",label:"Email",labelColor:"accent"}})],1)])])],1),e.EditarMediacion?a("div",[a("q-btn",{staticClass:"text-capitalize",staticStyle:{"padding-top":"0px","margin-bottom":"10px","margin-top":"10px","margin-right":"20px"},attrs:{color:"primary"},on:{click:function(t){return e.guardarEdicion()}}},[e._v("Guardar")]),a("q-btn",{staticClass:"text-capitalize",staticStyle:{"padding-top":"0px","margin-bottom":"10px","margin-top":"10px"},attrs:{color:"red"},on:{click:function(t){e.EditarMediacion=!1}}},[e._v("Cancelar")])],1):a("q-btn",{staticClass:"text-capitalize",staticStyle:{"padding-top":"0px","margin-bottom":"10px","margin-top":"10px"},attrs:{color:"red"},on:{click:function(t){return e.$emit("cerrar")}}},[e._v("Cerrar")])],1):e._e(),e.CargarMediacion?a("div",{staticClass:"column",staticStyle:{width:"500px","justify-content":"space-between"}},[a("q-checkbox",{staticStyle:{width:"47%"},attrs:{label:"Con Mediador Sorteado"},on:{input:function(t){return e.resetMediador()}},model:{value:e.ConMediador,callback:function(t){e.ConMediador=t},expression:"ConMediador"}}),e.ConMediador?a("div",[a("Select",{attrs:{multiple:!1,label:"Buscar Mediador",hint:"Seleccione un Mediador para el Caso",tooltip:!1,opciones:e.opcionesMediadores},on:{seleccion:e.mediadorSeleccionado}})],1):e._e(),a("div",{staticClass:"row",staticStyle:{"justify-content":"space-between"}},[a("q-select",{staticStyle:{width:"47%","margin-top":"5px"},attrs:{label:"Bonos",options:e.opcionesBonos},on:{input:e.cambiarFechaBonos},model:{value:e.BonoSeleccionado,callback:function(t){e.BonoSeleccionado=t},expression:"BonoSeleccionado"}}),a("q-select",{staticStyle:{width:"47%","margin-top":"5px"},attrs:{label:"Beneficios",options:e.opcionesBeneficios},on:{input:e.cambiarFechaPresentado},model:{value:e.BeneficioSeleccionado,callback:function(t){e.BeneficioSeleccionado=t},expression:"BeneficioSeleccionado"}})],1),a("div",{staticClass:"row",staticStyle:{"justify-content":"space-between"}},[a("q-input",{staticStyle:{width:"47%"},attrs:{label:"Fecha Bonos",mask:"##-##-####",rules:[function(e){return/^-?[0-3]\d-[0-1]\d-[\d]+$/.test(e)||"Fecha invalida"}]},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy1",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY",label:"Fecha Bonos"},on:{input:function(){return e.$refs.qDateProxy1.hide()}},model:{value:e.FechaBonos,callback:function(t){e.FechaBonos=t},expression:"FechaBonos"}})],1)],1)]},proxy:!0}],null,!1,67479479),model:{value:e.FechaBonos,callback:function(t){e.FechaBonos=t},expression:"FechaBonos"}}),a("q-input",{staticStyle:{width:"47%"},attrs:{label:"Fecha Presentado",mask:"##-##-####",rules:[function(e){return/^-?[0-3]\d-[0-1]\d-[\d]+$/.test(e)||"Fecha invalida"}]},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy2",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY",label:"Fecha Presentado"},on:{input:function(){return e.$refs.qDateProxy2.hide()}},model:{value:e.FechaPresentado,callback:function(t){e.FechaPresentado=t},expression:"FechaPresentado"}})],1)],1)]},proxy:!0}],null,!1,4135960663),model:{value:e.FechaPresentado,callback:function(t){e.FechaPresentado=t},expression:"FechaPresentado"}})],1),e.checkFechaProximaAudiencia?a("div",{staticClass:"row",staticStyle:{"justify-content":"space-between"}},[a("q-input",{staticStyle:{width:"47%"},attrs:{label:"Fecha Proxima Audiencia",mask:"##-##-####"},on:{input:function(t){return e.fechaProximaAudienciaConMensaje()}},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy3",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY",label:"Fecha Proxima Audiencia"},on:{input:function(t){return e.fechaProximaAudienciaConMensaje()}},model:{value:e.FechaProximaAudiencia,callback:function(t){e.FechaProximaAudiencia=t},expression:"FechaProximaAudiencia"}})],1)],1)]},proxy:!0}],null,!1,416960919),model:{value:e.FechaProximaAudiencia,callback:function(t){e.FechaProximaAudiencia=t},expression:"FechaProximaAudiencia"}}),a("q-input",{staticStyle:{width:"47%"},attrs:{label:"Hora Proxima Audiencia",mask:"##:##"},on:{input:function(t){return e.fechaProximaAudienciaConMensaje()}},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{ref:"qTimeProxy1",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{format24h:"",mask:"HH:mm"},on:{input:function(t){return e.fechaProximaAudienciaConMensaje()}},model:{value:e.HoraProximaAudiencia,callback:function(t){e.HoraProximaAudiencia=t},expression:"HoraProximaAudiencia"}})],1)],1)]},proxy:!0}],null,!1,1388727643),model:{value:e.HoraProximaAudiencia,callback:function(t){e.HoraProximaAudiencia=t},expression:"HoraProximaAudiencia"}}),e.FechaProximaAudiencia&&e.HoraProximaAudiencia?a("q-checkbox",{staticStyle:{width:"47%"},attrs:{label:"Notificar al cliente."},on:{input:function(t){return e.verMensajeFechaAudiencia()}},model:{value:e.ConMensajeFechaAudiencia,callback:function(t){e.ConMensajeFechaAudiencia=t},expression:"ConMensajeFechaAudiencia"}}):e._e(),e.IdCalendario&&e.FechaProximaAudiencia&&e.HoraProximaAudiencia?a("q-checkbox",{staticStyle:{width:"47%"},attrs:{label:"Agendar en calendario."},model:{value:e.agendar,callback:function(t){e.agendar=t},expression:"agendar"}}):e._e()],1):e._e(),a("div",{staticClass:"row",staticStyle:{"justify-content":"space-between","margin-bottom":"10px"}},[a("q-input",{staticStyle:{width:"47%"},attrs:{label:"Legajo"},on:{input:function(t){return e.editarMensajeCliente(e.DatosMediacion.Legajo)}},model:{value:e.DatosMediacion.Legajo,callback:function(t){e.$set(e.DatosMediacion,"Legajo",t)},expression:"DatosMediacion.Legajo"}}),a("q-checkbox",{staticStyle:{width:"47%"},attrs:{label:"Con Fecha de Audiencia"},on:{input:function(t){return e.resetFecha()}},model:{value:e.checkFechaProximaAudiencia,callback:function(t){e.checkFechaProximaAudiencia=t},expression:"checkFechaProximaAudiencia"}})],1),e.DatosMediador.IdMediador?a("q-checkbox",{staticStyle:{width:"100%"},attrs:{label:"Enviar mensaje al cliente y mediador"},on:{input:function(t){return e.verMensaje()}},model:{value:e.ConMensaje,callback:function(t){e.ConMensaje=t},expression:"ConMensaje"}}):e._e(),e.ConMensaje?a("div",{staticStyle:{position:"relative","margin-top":"15px"}},[a("q-icon",{staticStyle:{position:"absolute",top:"5px",right:"5px",cursor:"pointer"},attrs:{right:"",color:"primary",name:"fas fa-edit",size:"20px"},on:{click:function(t){e.ModalDatosContacto=!0}}},[a("q-tooltip",[e._v("Editar Datos de Contacto")])],1),a("span",{staticStyle:{"font-weight":"bold"}},[e._v("\n          Datos de Contacto del Mediador\n        ")]),a("ul",[a("li",[e._v("\n            Telefono: "+e._s(e.DatosMediador.Telefono)+"\n          ")]),a("li",[e._v("\n            Email: "+e._s(e.DatosMediador.Email?e.DatosMediador.Email:"Sin Email")+"\n          ")])]),e.validarTelefono(e.DatosMediador.Telefono)?e._e():a("span",{staticStyle:{color:"red"}},[e._v("\n          Telefono Invalido.\n          Por favor edite el telefono o el mensaje no podra ser enviado\n        ")])],1):e._e(),a("div",{staticClass:"row",staticStyle:{"justify-content":"center","margin-top":"15px"}},[e.alta?a("q-spinner",{staticClass:"self-center",staticStyle:{"margin-top":"10px"},attrs:{color:"primary",size:"3em"}}):a("q-btn",{staticClass:"text-capitalize",staticStyle:{"padding-top":"0px","margin-bottom":"10px","margin-right":"20px","margin-top":"10px"},attrs:{color:"primary"},on:{click:function(t){return e.altaMediacion()}}},[e._v("Cargar Datos")]),a("q-btn",{staticClass:"text-capitalize",staticStyle:{"padding-top":"0px","margin-bottom":"10px","margin-right":"20px","margin-top":"10px"},attrs:{color:"red"},on:{click:function(t){return e.$emit("cerrar")}}},[e._v("Cerrar")])],1)],1):e._e()]),a("q-dialog",{staticStyle:{"background-color":"white"},model:{value:e.CargarMediador,callback:function(t){e.CargarMediador=t},expression:"CargarMediador"}},[a("q-card",{staticStyle:{"background-color":"white","min-width":"400px"}},[a("q-item",{staticStyle:{"background-color":"black"}},[a("span",{staticClass:"q-subheading",staticStyle:{color:"white"}},[e._v("Seleccionar Mediador")])]),a("div",{staticClass:"row",staticStyle:{"justify-content":"center","margin-right":"15px","margin-left":"15px"}},[a("Select",{attrs:{multiple:!1,label:"Buscar Mediador",hint:"Seleccione un Mediador para el Caso",tooltip:!1,opciones:e.opcionesMediadores},on:{seleccion:e.mediadorSeleccionado}}),e.DatosMediador.IdMediador?a("q-checkbox",{staticStyle:{width:"100%"},attrs:{label:"Enviar mensaje al cliente y mediador"},on:{input:function(t){return e.verMensaje()}},model:{value:e.ConMensaje,callback:function(t){e.ConMensaje=t},expression:"ConMensaje"}}):e._e(),e.ConMensaje?a("div",{staticClass:"col-12",staticStyle:{position:"relative","margin-top":"15px"}},[a("q-icon",{staticStyle:{position:"absolute",top:"5px",right:"5px",cursor:"pointer"},attrs:{right:"",color:"primary",name:"fas fa-edit",size:"20px"},on:{click:function(t){e.ModalDatosContacto=!0}}},[a("q-tooltip",[e._v("Editar Datos de Contacto")])],1),a("span",{staticStyle:{"font-weight":"bold"}},[e._v("\n            Datos de Contacto del Mediador\n          ")]),a("ul",[a("li",[e._v("\n              Telefono: "+e._s(e.DatosMediador.Telefono)+"\n            ")]),a("li",[e._v("\n              Email: "+e._s(e.DatosMediador.Email?e.DatosMediador.Email:"Sin Email")+"\n            ")])]),e.validarTelefono(e.DatosMediador.Telefono)?e._e():a("span",{staticStyle:{color:"red"}},[e._v("\n            Telefono Invalido.\n            Por favor edite el telefono o el mensaje no podra ser enviado\n          ")])],1):e._e(),a("q-btn",{staticClass:"text-capitalize col-12",staticStyle:{"padding-top":"0px","margin-bottom":"15px","margin-top":"15px",width:"100px"},attrs:{color:"primary"},on:{click:function(t){return e.guardarMediador()}}},[e._v("Guardar")])],1)],1)],1),a("q-dialog",{staticStyle:{"background-color":"white"},model:{value:e.ModalDatosContacto,callback:function(t){e.ModalDatosContacto=t},expression:"ModalDatosContacto"}},[a("q-card",{staticStyle:{"background-color":"white"}},[a("q-item",{staticStyle:{"background-color":"black"}},[a("span",{staticClass:"q-subheading",staticStyle:{color:"white"}},[e._v("Editar Datos de Contacto")])]),a("div",{staticClass:"row",staticStyle:{"justify-content":"center"}},[a("q-input",{staticStyle:{width:"95%"},attrs:{label:"Telefono"},model:{value:e.DatosMediador.Telefono,callback:function(t){e.$set(e.DatosMediador,"Telefono",t)},expression:"DatosMediador.Telefono"}}),a("q-input",{staticStyle:{width:"95%"},attrs:{label:"Email"},model:{value:e.DatosMediador.Email,callback:function(t){e.$set(e.DatosMediador,"Email",t)},expression:"DatosMediador.Email"}}),a("q-btn",{staticClass:"text-capitalize col-12",staticStyle:{"padding-top":"0px","margin-bottom":"10px","margin-top":"10px","max-width":"100px"},attrs:{color:"primary"},on:{click:function(t){return e.editarDatosMediador()}}},[e._v("Guardar")])],1)],1)],1),a("q-dialog",{staticStyle:{"background-color":"white"},model:{value:e.ModalMensaje,callback:function(t){e.ModalMensaje=t},expression:"ModalMensaje"}},[a("q-card",{staticStyle:{"background-color":"white","min-width":"400px"}},[a("q-item",{staticStyle:{"background-color":"black"}},[a("span",{staticClass:"q-subheading",staticStyle:{color:"white"}},[e._v("Mensaje: Notificar Mediador Sorteado")])]),a("div",{staticClass:"row",staticStyle:{"justify-content":"center"}},[a("q-input",{staticClass:"col-12",staticStyle:{width:"95%","margin-top":"5px"},attrs:{label:"Mensaje Cliente",type:"textarea",rows:4},model:{value:e.mensajeCliente,callback:function(t){e.mensajeCliente=t},expression:"mensajeCliente"}}),a("div",{staticClass:"row",staticStyle:{"justify-content":"center",width:"100%"}},[a("q-select",{staticClass:"col-6",staticStyle:{width:"45%","margin-top":"5px","margin-right":"5px"},attrs:{label:"Actor",options:e.Actores},on:{input:function(t){return e.verMensaje()}},model:{value:e.ActorSeleccionado,callback:function(t){e.ActorSeleccionado=t},expression:"ActorSeleccionado"}}),a("q-select",{staticClass:"col-6",staticStyle:{width:"45%","margin-top":"5px","margin-left":"5px"},attrs:{label:"Demandado",options:e.Demandados},on:{input:function(t){return e.verMensaje()}},model:{value:e.DemandadoSeleccionado,callback:function(t){e.DemandadoSeleccionado=t},expression:"DemandadoSeleccionado"}})],1),a("q-input",{staticClass:"col-12",staticStyle:{width:"95%","margin-top":"5px"},attrs:{label:"Mensaje Mediador",type:"textarea",rows:6},model:{value:e.mensajeMediador,callback:function(t){e.mensajeMediador=t},expression:"mensajeMediador"}}),a("q-btn",{staticClass:"text-capitalize col-12",staticStyle:{"padding-top":"0px","margin-bottom":"10px","margin-top":"10px","max-width":"100px"},attrs:{color:"primary"},on:{click:function(t){e.ModalMensaje=!1}}},[e._v("Aceptar")])],1)],1)],1),a("q-dialog",{staticStyle:{"background-color":"white"},model:{value:e.ModalFechaAudiencia,callback:function(t){e.ModalFechaAudiencia=t},expression:"ModalFechaAudiencia"}},[a("q-card",{staticStyle:{"background-color":"white","min-width":"400px"}},[a("q-item",{staticStyle:{"background-color":"black"}},[a("span",{staticClass:"q-subheading",staticStyle:{color:"white"}},[e._v("Mensaje: Notificar Fecha de Audiencia")])]),a("div",{staticClass:"row",staticStyle:{"justify-content":"center"}},[a("q-select",{staticClass:"col-12",staticStyle:{width:"95%"},attrs:{label:"Actor",options:e.Actores},on:{input:function(t){return e.verMensajeFechaAudiencia()}},model:{value:e.ActorSeleccionado,callback:function(t){e.ActorSeleccionado=t},expression:"ActorSeleccionado"}}),a("q-input",{staticClass:"col-12",staticStyle:{width:"95%","margin-top":"5px"},attrs:{label:"Mensaje",type:"textarea",rows:3},model:{value:e.mensajeFechaAudiencia,callback:function(t){e.mensajeFechaAudiencia=t},expression:"mensajeFechaAudiencia"}}),a("q-btn",{staticClass:"text-capitalize col-12",staticStyle:{"padding-top":"0px","margin-bottom":"10px","margin-top":"10px","max-width":"100px"},attrs:{color:"primary"},on:{click:function(t){e.ModalFechaAudiencia=!1}}},[e._v("Aceptar")])],1)],1)],1)],1)},i=[],n=(a("f559"),a("a481"),a("28a5"),a("20d6"),a("adad")),s=a("823b"),r=a("7460"),c=a("429b"),l=a("0d59"),d=a("2a19"),u=a("8daa"),m=a("b628"),p=a("3a5e"),h=a("c97f"),v=a("a6d8"),f=a("c1df"),b=a.n(f),g={name:"Mediacion",components:{Loading:p["a"],Select:v["a"],QTabPanels:n["a"],QTabPanel:s["a"],QTabs:c["a"],QTab:r["a"],QSpinner:l["a"],DataItem:h["a"]},props:["IdMediacion","IdCaso","IdChat","Personas","CaratulaCaso"],data:function(){return{tab:"mediacion",loading:!0,crearChat:!1,alta:!1,agendar:!1,CargarMediacion:!1,CargarMediador:!1,EditarMediacion:!1,ConMediador:!1,ConMensaje:!1,ConMensajeFechaAudiencia:!1,DatosMediacion:{},DatosMediador:{},DatosEditar:{},opcionesBonos:[],opcionesBeneficios:[],opcionesMediadores:[],BonoSeleccionado:{},BeneficioSeleccionado:{},FechaBonos:"",FechaPresentado:"",FechaProximaAudiencia:"",HoraProximaAudiencia:"",checkFechaProximaAudiencia:!1,ModalFechaAudiencia:!1,mensajeCliente:"",mensajeMediador:"",mensajeFechaAudiencia:"",ModalDatosContacto:!1,ModalMensaje:!1,Actores:[],Demandados:[],ActorSeleccionado:"",DemandadoSeleccionado:"",IdCalendario:0,IdCalendarioAPI:""}},created:function(){var e=this;this.IdMediacion&&u["a"].Get("/mediaciones",{id:this.IdMediacion},(function(t){t.Error?e.$q.notify(t.Error):(e.DatosMediacion=t,e.DatosMediador=t.Mediador,e.loading=!1)})),u["a"].Get("/estudios/".concat(m["a"].UsuarioLogueado.IdEstudio,"/calendario"),{},(function(t){t.Error?e.$q.notify(t.Error):t&&(e.IdCalendario=t.IdCalendario,e.IdCalendarioAPI=t.IdCalendarioAPI)})),u["a"].Get("/mediaciones/datos",{},(function(t){if(t.Error)e.$q.notify(t.Error);else{var a=JSON.parse(t.Bonos),o=JSON.parse(t.Beneficios);e.opcionesBonos=a.map((function(e){return{label:e.Bono,value:e.IdBono}})),e.opcionesBonos.unshift({label:"Sin datos",value:null}),e.BonoSeleccionado=e.opcionesBonos[0],e.opcionesBeneficios=o.map((function(e){return{label:e.Beneficio,value:e.IdBeneficio}})),e.opcionesBeneficios.unshift({label:"Sin datos",value:null}),e.BeneficioSeleccionado=e.opcionesBeneficios[0]}})),u["a"].Get("/mediaciones/mediadores",{},(function(t){t.Error?e.$q.notify(t.Error):(e.Mediadores=t,e.opcionesMediadores=t.map((function(e){return{label:e.Nombre,value:e.IdMediador}})))})),this.Personas.forEach((function(t){"Demandado"===t.Rol?e.Demandados.push(t.Apellido+", "+t.Nombre):e.Actores.push(t.Apellido+", "+t.Nombre)})),this.ActorSeleccionado=this.Actores[0],this.DemandadoSeleccionado=0===this.Demandados.length?"":this.Demandados[0]},methods:{fechaProximaAudienciaConMensaje:function(){this.$refs.qTimeProxy1.hide(),this.$refs.qDateProxy3.hide(),this.FechaProximaAudiencia&&5===this.HoraProximaAudiencia.length&&(this.agendar=!0,this.ConMensajeFechaAudiencia=!0,this.verMensajeFechaAudiencia())},resetFecha:function(){this.checkFechaProximaAudiencia||(this.FechaProximaAudiencia="",this.HoraProximaAudiencia="")},resetMediador:function(){this.ConMediador||(this.DatosMediador={},this.DatosMediacion.IdMediador="",this.ConMensaje=!1)},mediadorSeleccionado:function(e){var t=this.Mediadores.findIndex((function(t){return t.IdMediador===e.value}));this.DatosMediador=this.Mediadores[t],this.DatosMediacion.IdMediador=this.Mediadores[t].IdMediador,this.ConMensaje=!0,this.verMensaje()},altaMediacion:function(){var e=this;if(this.alta=!0,this.ConMediador||(this.DatosMediacion.IdMediador=null),this.DatosMediacion.IdCaso=this.IdCaso,this.DatosMediacion.IdBono=this.BonoSeleccionado.value,this.DatosMediacion.Bono=this.BonoSeleccionado.label,this.DatosMediacion.IdBeneficio=this.BeneficioSeleccionado.value,this.DatosMediacion.Beneficio=this.BeneficioSeleccionado.label,this.DatosMediacion.FechaBonos=this.FechaBonos,this.DatosMediacion.FechaPresentado=this.FechaPresentado,this.checkFechaProximaAudiencia){if(!this.FechaProximaAudiencia||!this.HoraProximaAudiencia)return void this.$q.notify("Debe ingresar una fecha para proxima audiencia o destildar la opcion.");var t=this.FechaProximaAudiencia,a=this.HoraProximaAudiencia;this.DatosMediacion.FechaProximaAudiencia="".concat(t," ").concat(a)}else this.DatosMediacion.FechaProximaAudiencia=null;!this.ConMensaje||this.validarTelefono(this.DatosMediador.Telefono)?u["a"].Post("/mediaciones/alta",this.DatosMediacion,(function(t){t.Error?e.$q.notify(t.Error):(e.ConMensaje&&(e.enviarMensaje(e.mensajeCliente),e.enviarMensajeMediador()),e.ConMensajeFechaAudiencia&&e.enviarMensaje(e.mensajeFechaAudiencia),e.DatosMediacion.IdMediacion=t.IdMediacion,e.IdMediacion=t.IdMediacion,e.checkFechaProximaAudiencia&&e.agendar&&e.agendarEvento(),e.checkFechaProximaAudiencia&&e.altaMovimiento(),e.CargarMediacion=!1,e.ConMensaje=!1,e.loading=!1,e.agendar=!1,e.checkFechaProximaAudiencia=!1,e.$emit("alta",e.DatosMediacion.IdMediacion),e.$q.notify("Los datos se dieron de alta con exito."))})):this.$q.notify("No es posible enviar el mensaje, por favor edite el numero o destilde la opcion.")},changeTab:function(e){this.checkFechaProximaAudiencia=!1,this.EditarMediacion=!1},habilitarEdicion:function(){this.FechaPresentado=this.DatosMediacion.FechaPresentado,this.FechaBonos=this.DatosMediacion.FechaBonos,this.BonoSeleccionado={label:this.DatosMediacion.Bono,value:this.DatosMediacion.IdBono},this.BeneficioSeleccionado={label:this.DatosMediacion.Beneficio,value:this.DatosMediacion.IdBeneficio},this.DatosMediacion.FechaProximaAudiencia&&(this.FechaProximaAudiencia=this.DatosMediacion.FechaProximaAudiencia.split(" ")[0],this.HoraProximaAudiencia=this.DatosMediacion.FechaProximaAudiencia.split(" ")[1],this.checkFechaProximaAudiencia=!0),this.DatosEditar.Legajo=this.DatosMediacion.Legajo,this.EditarMediacion=!0},cambiarFechaBonos:function(){this.FechaBonos=b()().format("DD-MM-YYYY")},cambiarFechaPresentado:function(){this.FechaPresentado=b()().format("DD-MM-YYYY")},guardarEdicion:function(){var e=this;this.DatosEditar.FechaBonos=this.FechaBonos,this.DatosEditar.FechaPresentado=this.FechaPresentado,this.DatosEditar.IdBono=this.BonoSeleccionado.value,this.DatosEditar.Bono=this.BonoSeleccionado.label,this.DatosEditar.IdBeneficio=this.BeneficioSeleccionado.value,this.DatosEditar.Beneficio=this.BeneficioSeleccionado.label,this.DatosEditar.IdMediacion=this.IdMediacion,this.DatosEditar.IdMediador=this.DatosMediacion.IdMediador,this.DatosEditar.IdCaso=this.DatosMediacion.IdCaso;var t=!1;if(this.checkFechaProximaAudiencia){if(!this.FechaProximaAudiencia||!this.HoraProximaAudiencia)return void this.$q.notify("Debe ingresar una fecha para proxima audiencia o destildar la opcion.");var a=this.FechaProximaAudiencia,o=this.HoraProximaAudiencia,i=this.DatosMediacion.FechaProximaAudiencia?this.DatosMediacion.FechaProximaAudiencia.split(" ")[0].split(/[-/]/).join("-"):null;this.FechaProximaAudiencia.split(/[-/]/).join("-")!==i&&(t=!0),this.DatosEditar.FechaProximaAudiencia="".concat(a," ").concat(o)}else this.DatosEditar.FechaProximaAudiencia=null;u["a"].Post("/mediaciones/editar",this.DatosEditar,(function(a){a.Error?e.$q.notify(a.Error):(e.EditarMediacion=!1,e.DatosMediacion=e.DatosEditar,e.DatosEditar={},e.ConMensajeFechaAudiencia&&e.enviarMensaje(e.mensajeFechaAudiencia),e.checkFechaProximaAudiencia&&e.agendar&&e.agendarEvento(),t&&e.altaMovimiento(),e.ConMensajeFechaAudiencia=!1,e.checkFechaProximaAudiencia=!1,e.agendar=!1,e.$q.notify("Los datos se editaron con exito."))}))},verMensaje:function(){if(this.ConMensaje){var e=this.DatosMediador.Nombre,t=this.DatosMediacion.Legajo;this.ModalMensaje=!0,this.mensajeCliente="Estimado ".concat(this.ActorSeleccionado," te comentamos que el mediador que ha sido sorteado es ").concat(e,", el proximo paso es que fije la fecha de la audiencia, lo que te vamos a estar informando en aproximadamente 7 dias. Saludos!"),this.mensajeMediador="Estimado mediador/a ".concat(e," te informamos que has sido sorteado en el legajo Nro ").concat(t,", requirente ").concat(this.ActorSeleccionado," con ").concat(this.DemandadoSeleccionado,". Te pedimos por favor fijar la fecha con 20 dias de margen para efectuar la notificacion.")}},verMensajeFechaAudiencia:function(){this.ConMensajeFechaAudiencia&&(this.ModalFechaAudiencia=!0,this.mensajeFechaAudiencia="Estimado ".concat(this.ActorSeleccionado," te comentamos que la proxima fecha de audiencia de mediacion sera el dia ").concat(this.FechaProximaAudiencia," a las ").concat(this.HoraProximaAudiencia,". Se realizara en forma virtual, A este numero te llamaran desde el centro de mediación. yo estaré en la audiencia desde mi oficina. procura tener una buena conexión de wifi. Saludos!"))},validarTelefono:function(e){if(!e)return!1;switch(e=e.replace(/[- +]/g,""),!0){case e.startsWith("54")&&12===e.length:return!0;case!e.startsWith("54")&&10===e.length:return!0;default:return!1}},editarDatosMediador:function(){var e=this,t={telefono:this.DatosMediador.Telefono,email:this.DatosMediador.Email,id:this.DatosMediador.IdMediador};u["a"].Post("/mediadores/editar-contacto",t,(function(t){t.Error?e.$q.notify(t.Error):(e.ModalDatosContacto=!1,e.$q.notify("Los datos se editaron con exito."))}))},enviarMensaje:function(e){var t={IdChat:this.IdChat?this.IdChat:null,Contenido:e};if(t.IdChat)u["a"].Post("/mensajes/enviar",t,(function(e){if(e.Error)d["a"].create("Falló al notificar al cliente. Razon: "+e.Error);else{d["a"].create("Se ha notificado al cliente con exito.");var a=e.IdMensaje;u["a"].Post("/chats/".concat(t.IdChat,"/actualizar"),{IdUltimoLeido:a},(function(e){e.Error&&d["a"].create("Falló al actualizar el ultimo mensaje leído. Razon:"+e.Error)}))}}));else{var a={IdCaso:this.IdCaso,IdPersona:this.personaPrincipal().Id,Telefono:this.telefonoPrincipal(this.personaPrincipal().Telefonos)};console.log(a),a.Telefono?u["a"].Post("/chats/crear",a,(function(e){e.Error?d["a"].create("Falló al notificar al cliente. Razon: "+e.Error):(d["a"].create("Nuevo chat creado!"),t.IdChat=e.IdChat,u["a"].Post("/mensajes/enviar",t,(function(e){if(e.Error)d["a"].create("Falló al notificar al cliente. Razon: "+e.Error);else{d["a"].create("Se ha notificado al cliente con exito.");var a=e.IdMensaje;u["a"].Post("/chats/".concat(t.IdChat,"/actualizar"),{IdUltimoLeido:a},(function(e){e.Error&&d["a"].create("Falló al actualizar el ultimo mensaje leído. Razon:"+e.Error)}))}})))})):d["a"].create("Falló al notificar al cliente. Razon: no existe un telefono asociado")}},enviarMensajeMediador:function(){var e={IdChat:this.DatosMediacion.IdChatMediador?this.DatosMediacion.IdChatMediador:null,mediador:this.DatosMediacion.IdChatMediador?this.DatosMediacion.IdChatMediador:null,Contenido:this.mensajeMediador};if(e.IdChat)u["a"].Post("/mensajes/enviar",e,(function(t){if(t.Error)d["a"].create("Falló al notificar al mediador. Razon: "+t.Error);else{d["a"].create("Se ha notificado al mediador con exito.");var a=t.IdMensaje;u["a"].Post("/chats/".concat(e.IdChat,"/actualizar"),{IdUltimoLeido:a,mediador:e.mediador},(function(e){e.Error&&d["a"].create("Falló al actualizar el ultimo mensaje leído. Razon:"+e.Error)}))}}));else{var t={Telefono:this.DatosMediador.Telefono,IdMediador:this.DatosMediador.IdMediador};t.Telefono?u["a"].Post("/chats/crear",t,(function(t){t.Error?d["a"].create("Falló al notificar al mediador. Razon: "+t.Error):(d["a"].create("Nuevo chat con mediador creado!"),e.IdChat=t.IdChat,e.mediador=t.IdChat,u["a"].Post("/mensajes/enviar",e,(function(t){if(t.Error)d["a"].create("Falló al notificar al mediador. Razon: "+t.Error);else{d["a"].create("Se ha notificado al mediador con exito.");var a=t.IdMensaje;u["a"].Post("/chats/".concat(e.IdChat,"/actualizar"),{IdUltimoLeido:a,mediador:e.mediador},(function(e){e.Error&&d["a"].create("Falló al actualizar el ultimo mensaje leído. Razon:"+e.Error)}))}})))})):d["a"].create("Falló al notificar al mediador. Razon: no existe un telefono asociado")}},personaPrincipal:function(){if(console.log(this.Personas.filter((function(e){return e.Principal}))[0]),this.Personas.length)return this.Personas.filter((function(e){return e.Principal}))[0]},telefonoPrincipal:function(e){if(e){var t=(e||[]).filter((function(e){return"S"===e.EsPrincipal}));return t.length?t[0].Telefono:e.length?e[0].Telefono:"Sin telefono"}return""},guardarMediador:function(){var e=this;!this.ConMensaje||this.validarTelefono(this.DatosMediador.Telefono)?u["a"].Post("/mediaciones/editar",this.DatosMediacion,(function(t){t.Error?e.$q.notify(t.Error):(e.CargarMediador=!1,e.ConMensaje&&(e.enviarMensaje(e.mensajeCliente),e.enviarMensajeMediador()),e.$q.notify("Se cargo el mediador con exito."))})):this.$q.notify("No es posible enviar el mensaje, por favor edite el numero o destilde la opcion.")},agendarEvento:function(){var e=this,t=this.FechaProximaAudiencia.split(/[-/]/).reverse().join("-"),a=this.HoraProximaAudiencia,o="".concat(t,"T").concat(a),i="".concat(t,"T").concat(a,":00-03:00"),n={IdCalendario:this.IdCalendario,IdCalendarioAPI:this.IdCalendarioAPI,Titulo:"".concat(this.CaratulaCaso," - DocDoc! - Audiencia Mediacion"),Descripcion:"Proxima audiencia",Comienzo:i,Fin:i,IdColor:10,ComienzoDb:o,FinDb:o,IdMediacion:this.IdMediacion};u["a"].Post("/mediaciones/evento",n,(function(t){t.Error?e.$q.notify(t.Error):e.$q.notify({color:"green",message:"Se añadio un evento al calendario del estudio."})}))},altaMovimiento:function(){var e=this;u["a"].Get("/estudios/".concat(m["a"].UsuarioLogueado.IdEstudio,"/tipos-movimiento"),{},(function(t){if(t.Error)e.$q.notify(t.Error);else{var a=t.filter((function(e){return"Gestión oficina"===e.TipoMovimiento}))[0].IdTipoMov,o={IdResponsable:m["a"].UsuarioLogueado.IdUsuario,Detalle:"Audiencia - Mediacion",IdCaso:e.IdCaso,FechaEsperada:e.FechaProximaAudiencia,FechaAlta:new Date,FechaRealizado:null,IdTipoMov:a,Cuaderno:"",Color:"negative",Multimedia:null};u["a"].Post("/movimientos",o,(function(t){t.Error?e.$q.notify(t.Error):e.$q.notify("Se dio de alta un nuevo movimiento.")}))}}))},editarMensajeCliente:function(e){var t=this.DatosMediador.Nombre;this.mensajeMediador="Estimado mediador/a ".concat(t," te informamos que has sido sorteado en el legajo Nro ").concat(e,", requirente ").concat(this.ActorSeleccionado," con ").concat(this.DemandadoSeleccionado,". Te pedimos por favor fijar la fecha con 20 dias de margen para efectuar la notificacion.")},abrirChat:function(){var e=this;if(this.DatosMediacion.IdChatMediador){var t=this.$router.resolve({name:"Chat",query:{id:this.DatosMediacion.IdChatMediador,caratula:this.DatosMediador.Nombre,telefono:this.DatosMediador.Telefono,idMediacion:this.DatosMediacion.IdMediacion}});window.open(t.href,"_blank")}else{var a={Telefono:this.DatosMediador.Telefono,IdMediador:this.DatosMediador.IdMediador};this.crearChat=!0,u["a"].Post("/chats/crear",a,(function(t){if(t.Error)d["a"].create("Falló al iniciar un nuevo chat. Razon: "+t.Error);else{d["a"].create("Nuevo chat con mediador creado!"),e.DatosMediacion.IdChatMediador=t.IdChat;var a=e.$router.resolve({name:"Chat",query:{id:t.IdChat,caratula:e.DatosMediador.Nombre,telefono:e.DatosMediador.Telefono,idMediacion:e.DatosMediacion.IdMediacion}});window.open(a.href,"_blank"),e.crearChat=!1}}))}}}},C=g,y=a("2877"),x=Object(y["a"])(C,o,i,!1,null,null,null);t["a"]=x.exports},"02f0":function(e,t,a){},"0a94":function(e,t,a){"use strict";var o=a("3e71"),i=a.n(o);i.a},"0f0e":function(e,t,a){},"0f2e":function(e,t,a){},"181b":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"full-width full-height column"},[a("div",{staticClass:"col-9",attrs:{id:"mapGeo"}}),a("div",{staticClass:"q-pa-md col-3"},[a("q-input",{staticClass:"full-width q-mb-md",attrs:{label:"Domicilio",type:"text"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.localizar(t)}},model:{value:e.domicilio,callback:function(t){e.domicilio=t},expression:"domicilio"}}),a("div",{staticClass:"column items-center justify-center"},[a("q-btn",{staticClass:"q-mt-md",attrs:{push:"","no-caps":"",label:"Geolozalicar Nuevamente",color:"primary"},on:{click:e.localizar}}),a("div",{staticClass:"q-mt-md"},[a("q-btn",{staticClass:"q-mr-xs",attrs:{push:"","no-caps":"",label:"Confirmar",color:"positive"},on:{click:function(t){return e.$emit("confirmado",e.coords,e.domicilio)}}}),a("q-btn",{staticClass:"q-ml-xs",attrs:{push:"","no-caps":"",label:"Cancelar",color:"negative"},on:{click:function(t){return e.$emit("cerrar")}}})],1)],1)],1)])},i=[],n=(a("28a5"),a("4272")),s=a("2a19"),r=a("0d59"),c=a("bc3a"),l=a.n(c),d=a("3a5e"),u={name:"MapaGeo",components:{Loading:d["a"],QSpinner:r["a"]},props:["Caso"],data:function(){return{loaderMap:null,map:null,apiKey:"AIzaSyDw8NFG-Llw1Kytr1SqaJ0aT7G4lRlP38Y",coords:{},marker:null,infoWindow:null,domicilio:""}},mounted:function(){var e=this;this.domicilio=this.Caso.Domicilio,this.loaderMap=new n["a"]({apiKey:this.apiKey,version:"weekly"}),this.loaderMap.load().then((function(){e.map=new google.maps.Map(document.getElementById("mapGeo"),{zoom:13,center:{lat:-26.82414,lng:-65.2226}}),e.Caso.Latitud?(e.coords={Latitud:parseFloat(e.Caso.Latitud),Longitud:parseFloat(e.Caso.Longitud)},e.map.setCenter({lat:e.coords.Latitud,lng:e.coords.Longitud}),e.addMarker()):e.localizar()}))},methods:{localizar:function(){var e=this;l.a.get("https://maps.googleapis.com/maps/api/geocode/json",{params:{address:this.domicilio+", Tucuman",key:this.apiKey}}).then((function(t){"OK"===t.data.status?(e.coords={Latitud:t.data.results[0].geometry.location.lat,Longitud:t.data.results[0].geometry.location.lng},e.map.setCenter({lat:t.data.results[0].geometry.location.lat,lng:t.data.results[0].geometry.location.lng}),e.addMarker()):s["a"].create("No se encontro la direccion buscada.")}))},addMarker:function(e){var t=this;this.marker&&this.marker.setMap(null),this.marker=new google.maps.Marker({position:{lat:this.coords.Latitud,lng:this.coords.Longitud},map:this.map}),this.infoWindow=new google.maps.InfoWindow({content:'<div class="ventana">\n                    <table class="tabla-ventana">\n                        <th colspan="2"><span>'.concat(this.domicilio.split(",").slice(0,-2).join(",").toUpperCase(),'<br></span></th>\n                        <tr><td><b>DNI:</b></td><td class="celda-value">').concat(this.Caso.Documento,'</td></tr>\n                        <tr><td><b>Apellido:</b></td><td class="celda-value">').concat(this.Caso.Apellidos,'</td></tr>\n                        <tr><td><b>Nombre:</b></td><td class="celda-value">').concat(this.Caso.Nombres,"</td></tr>\n                    </table>\n                  </div>")}),this.marker.addListener("click",(function(){t.infoWindow.open(t.map,t.marker)}))}}},m=u,p=(a("d93c"),a("2877")),h=Object(p["a"])(m,o,i,!1,null,"6e032815",null);t["a"]=h.exports},"1f85":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-banner",{class:"warning"===e.movimiento.Color?"bg-warning text-black inner-shadow":"bg-"+e.movimiento.Color+" text-white inner-shadow",staticStyle:{"margin-top":".2em",padding:"0"},attrs:{inline:"true",link:""}},[a("div",{staticClass:"row"},[e.perentorioHome||!e.isMobile()?a("div",{class:e.perentorioHome?"col-4 col-sm-3":"col-2",style:"warning"===e.movimiento.Color?"cursor: pointer;color: black; display: flex; justify-content: center; align-items: center; text-align: center;":"cursor: pointer;color: white; display: flex; justify-content: center; align-items: center; text-align: center;",on:{click:function(t){return e.mostrarObjetivos()}}},[!e.inicio&&e.movimiento.Objetivo?a("q-tooltip",{attrs:{offset:[10,0]}},[e.ultimosMovimientos.length>0?a("q-list",e._l(e.ultimosMovimientos,(function(t){return a("q-item",{key:t.IdMovimientoCaso},[t.FechaRealizado?a("div",[e._v(e._s(t.Detalle)+" - Realizado el "+e._s(e.parseDate(t.FechaRealizado)))]):e._e()])})),1):a("span",[e._v("\n            Objetivo sin movimientos realizados\n          ")])],1):e._e(),e._v("\n        "+e._s(e.movimiento.Objetivo?e.movimiento.Objetivo:"Sin objetivo")+"\n      ")],1):e._e(),e.perentorioHome?e._e():a("div",{staticClass:"col-2",style:"warning"===e.movimiento.Color?"color: black; font-size: 150%; display: flex; justify-content: center; align-items: center; text-align: center;":"font-size: 150%; display: flex; justify-content: center; align-items: center; text-align: center;"},[a("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Días desde su presentación")]),e._v("\n        "+e._s(e.diasRestantes(e.movimiento,"creacion"))+"\n      ")],1),a("div",{staticClass:"col-8 col-sm-5",style:"warning"===e.movimiento.Color?"color: black;text-align: left;display: flex; align-items: center;":"display: flex; align-items: center;"},[a("div",{staticStyle:{"inicio ? 'display":"flex' : 'display: flex","align-items":"center"}},[a("div",{staticStyle:{display:"flex","flex-wrap":"wrap","align-items":"center"}},[e.inicio?a("div",{staticStyle:{cursor:"pointer","margin-right":"0.3rem"},on:{click:function(t){return e.verCaso()}}},[e._v(e._s(e.movimiento.Caso)+" : "+e._s(e.movimiento.NroExpediente?e.movimiento.NroExpediente:"Sin Expediente"))]):e._e(),e.inicio?a("div",{staticClass:"separadorTribunales",staticStyle:{"margin-right":"0.3rem"}},[e._v("|")]):e._e(),e.inicio?a("div",[e._v(e._s(e.movimiento.Juzgado)+" - "+e._s(e.movimiento.Nominacion))]):e._e()]),a("div",{staticStyle:{cursor:"pointer","white-space":"pre-wrap",display:"flex","align-items":"center"},on:{click:function(t){return e.editarMovimiento()}}},[a("strong",{class:e.isMobile()?"ellipsis-2-lines":"ellipsis-3-lines"},[e._v(e._s(e.movimiento.Detalle))]),e.inicio?e._e():a("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Editar Movimiento")])],1)])]),a("div",{class:e.isMobile()?"col-4 col-sm-2":"col-1",style:"warning"===e.movimiento.Color?"color: black; font-size: 150%; display: flex; justify-content: center; align-items: center":"font-size: 150%; display: flex; justify-content: center; align-items: center"},[e.perentorioHome?a("div",[a("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Vence hoy")]),a("q-icon",{attrs:{name:"priority_high",color:"white",size:"sm"}})],1):a("div",[e.movimiento.IdEvento?a("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("\n            Días restantes\n            "),a("br"),e._v("\n            Evento: "+e._s(e.movimiento.ComienzoEvento)+"\n          ")]):a("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Días restantes")]),e._v("\n          "+e._s(e.diasRestantes(e.movimiento,"vencimiento"))+"\n        ")],1)]),a("div",{staticClass:"col-4 col-sm-1",staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[a("div",{style:"warning"===e.movimiento.Color?"margin-right:16px;padding:5px; border-radius:50%;color:black":"margin-right:16px;padding:5px; border-radius:50%;color:white",on:{click:function(t){e.modalUsuario=!0}}},[e._v("\n          "+e._s(e.usuarioResponsable())+"\n          "),a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[10,0]}},[e._v("Responsable: "+e._s(e.movimiento.UsuarioResponsable?e.movimiento.UsuarioResponsable:""))]),a("q-dialog",{model:{value:e.modalUsuario,callback:function(t){e.modalUsuario=t},expression:"modalUsuario"}},[a("q-card",{staticStyle:{padding:"1rem","text-align":"center",display:"flex","flex-direction":"column"}},[a("span",{staticClass:"text-weight-light"},[e._v("Usuario responsable:")]),a("span",{staticClass:"text-weight-light",staticStyle:{"font-size":"30px","margin-top":"1rem"}},[e._v(e._s(e.movimiento.UsuarioResponsable?e.movimiento.UsuarioResponsable:"Sin responsable"))]),a("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-top":"2rem"}},[a("q-btn",{attrs:{flat:"",color:"primary",label:"Cerrar"},on:{click:function(t){e.modalUsuario=!1}}})],1)])],1)],1)]),a("div",{class:e.isMobile()?"col-4":"col-1",staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[a("q-btn",{attrs:{icon:"crop_square",color:"warning"===e.movimiento.Color?"black":"white",round:"",flat:"",outline:""},on:{click:function(t){return e.realizarMovimiento()}}},[a("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("\n            Marcar como realizado\n          ")])],1)],1)])]),a("q-dialog",{attrs:{"no-backdrop-dismiss":"","no-esc-dismiss":""},model:{value:e.modalEditar,callback:function(t){e.modalEditar=t},expression:"modalEditar"}},[a("q-card",{staticStyle:{width:"100%"}},[a("q-item",{staticStyle:{"background-color":"black"}},[a("span",{staticClass:"q-subheading",staticStyle:{color:"white"}},[e._v("Editar Movimiento")])]),e.modalEditar?a("EditarMovimiento",{attrs:{movimiento:this.movimientoEditar,tribunales:!0},on:{cancelarEdicion:function(t){return e.cancelarEdicion()},edicionTerminada:function(t){return e.edicionTerminada()}}}):e._e()],1)],1),a("q-dialog",{model:{value:e.modalCaso,callback:function(t){e.modalCaso=t},expression:"modalCaso"}},[a("q-card",[e.modalCaso?a("TarjetaCaso",{attrs:{caso:e.movimiento.CasoCompleto,"perentorio-home":e.perentorioHome}}):e._e(),a("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-right":"40px"}},[a("q-btn",{attrs:{flat:"",color:"primary",label:"Cerrar"},on:{click:function(t){e.modalCaso=!1}}})],1)],1)],1)],1)},i=[],n=(a("28a5"),a("8daa")),s=a("24e8"),r=a("2a19"),c=a("c1df"),l=a.n(c),d=a("c3f4"),u=a("7a13"),m={components:{QDialog:s["a"],EditarMovimiento:d["a"],TarjetaCaso:u["a"]},data:function(){return{movimientoEditar:{},modalEditar:!1,modalCaso:!1,modalUsuario:!1,idUltimoMensaje:"",nuevoIdChat:""}},props:["movimiento","ultimosMovimientos","inicio","perentorioHome","idChat","datosChat"],created:function(){},methods:{realizarMovimiento:function(){this.$emit("realizarMovimiento")},mostrarObjetivos:function(){this.$emit("mostrarObjetivos")},parseDateTime:function(e){if(null!==e){var t=e.split(" "),a=t[0].split("-"),o=t[1].split(":");return"".concat(a[2],"/").concat(a[1],"/").concat(a[0]," ").concat(o[0],":").concat(o[1])}return null},parseDate:function(e){return null!==e?this.parseDateTime(e).split(" ")[0]:null},usuarioResponsable:function(){if(this.movimiento.UsuarioResponsable){for(var e=this.movimiento.UsuarioResponsable[0],t="",a=0;a<this.movimiento.UsuarioResponsable.length;a++)","===this.movimiento.UsuarioResponsable[a]&&(t=this.movimiento.UsuarioResponsable[a+2]);return"".concat(t).concat(e)}return"-"},diasRestantes:function(e,t){if(!e.FechaEsperada&&"vencimiento"===t)return"-";switch(t){case"vencimiento":var a=e.FechaEsperada.split(" ")[0];4===a.split("-")[2].length&&(a=a.split("-").reverse().join("-"));var o=l()().diff(l()(a),"days");return 0===o&&a!==l()().format("YYYY-MM-DD")?-1:o>=0?o:o-1;case"creacion":var i=e.FechaAlta.split(" ")[0];4===i.split("-")[2].length&&(i=i.split("-").reverse().join("-"));var n=l()().diff(l()(i),"days");return 0===o&&i!==l()().format("YYYY-MM-DD")?-1:n>=0?n:n-1;default:var s=e.FechaRealizado.split(" ")[0];4===s.split("-")[2].length&&(s=s.split("-").reverse().join("-"));var r=l()().diff(l()(s),"days");return 0===o&&s!==l()().format("YYYY-MM-DD")?-1:r>=0?r:r-1}},isMobile:function(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},editarMovimiento:function(){this.movimientoEditar=this.movimiento,this.movimiento.IdCaso||(this.movimientoEditar.IdCaso=this.movimiento.CasoCompleto.IdCaso?this.movimiento.CasoCompleto.IdCaso:null),this.modalEditar=!0},cancelarEdicion:function(){this.modalEditar=!1,this.movimientoEditar={}},edicionTerminada:function(){this.movimientoEditar.Caso=this.movimiento.Caso,this.movimientoEditar.NroExpediente=this.movimiento.NroExpediente,this.movimiento=this.movimientoEditar,this.modalEditar=!1},verCaso:function(){var e=this;this.movimiento.CasoCompleto.IdEstadoCaso&&n["a"].Get("/estados-caso/".concat(this.movimiento.CasoCompleto.IdEstadoCaso),{},(function(t){t.Error?r["a"].create(t.Error):e.movimiento.CasoCompleto.EstadoCaso=t.EstadoCaso})),n["a"].Get("/tipos-caso/".concat(this.movimiento.CasoCompleto.IdTipoCaso),{},(function(t){t.Error?r["a"].create(t.Error):(e.movimiento.CasoCompleto.TipoCaso=t.TipoCaso,e.modalCaso=!0)})),n["a"].Get("/casos/".concat(this.movimiento.CasoCompleto.IdCaso),{},(function(t){t.Error?r["a"].create(t.Error):e.movimiento.CasoCompleto.PersonasCaso=t.PersonasCaso}))}}},p=m,h=(a("5677"),a("2877")),v=Object(h["a"])(p,o,i,!1,null,null,null);t["a"]=v.exports},2:function(e,t){},2181:function(e,t,a){},"2f12":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-card",{staticStyle:{width:"100%"}},[a("q-item",{staticStyle:{"background-color":"black"}},[a("span",{staticClass:"q-subheading",staticStyle:{color:"white"}},[e._v("Generar PDF")])]),a("div",{staticStyle:{padding:"1rem"}},[a("span",[a("p",[e._v("\n        Ingrese el texto con el que comenzara el PDF (opcional)\n      ")])]),a("q-input",{staticStyle:{width:"100%"},attrs:{label:"Contenido PDF (opcional)",type:"textarea",rows:3},model:{value:e.contenidoPDF,callback:function(t){e.contenidoPDF=t},expression:"contenidoPDF"}}),a("q-carousel",{attrs:{"transition-prev":"scale","transition-next":"scale",swipeable:"",animated:"","control-color":"teal",navigation:"",padding:"",arrows:"",height:"auto"},model:{value:e.slide,callback:function(t){e.slide=t},expression:"slide"}},e._l(e.MultimediaPDF,(function(t){return a("q-carousel-slide",{key:t.URL,staticClass:"column no-wrap flex-center",attrs:{name:t.URL}},[a("div",{staticClass:"shadow-1 rounded-borders"},[a("img",{staticClass:"img--multimedia",staticStyle:{padding:"1em 1em 1em 1em"},attrs:{src:"https://io.docdoc.com.ar/api/multimedia?file="+t.URL}})]),a("q-input",{staticStyle:{width:"100%"},attrs:{label:"Titulo de la Imagen (opcional)",type:"text"},model:{value:t.Titulo,callback:function(a){e.$set(t,"Titulo",a)},expression:"m.Titulo"}}),a("q-input",{staticStyle:{width:"100%"},attrs:{label:"Descripcion de la Imagen (opcional)",type:"textarea",rows:3},model:{value:t.Descripcion,callback:function(a){e.$set(t,"Descripcion",a)},expression:"m.Descripcion"}})],1)})),1),a("div",{staticClass:"row justify-center",staticStyle:{"margin-top":"15px","margin-bottom":"15px"}},[a("q-btn",{attrs:{color:"teal",label:"Enviar Mail"},on:{click:function(t){return e.enviarMail()}}}),e.generando?a("div",{staticStyle:{"margin-left":"30px","margin-right":"30px"}},[a("q-spinner",{staticClass:"self-center",attrs:{color:"teal",size:"2em"}})],1):a("q-btn",{staticStyle:{"margin-left":"10px","margin-right":"10px"},attrs:{color:"teal",label:"Descargar"},on:{click:function(t){return e.generarPDF()}}}),a("q-btn",{attrs:{color:"negative",label:"Cerrar"},on:{click:function(t){return e.$emit("cerrar")}}})],1)],1)],1)},i=[],n=(a("a481"),a("0d59")),s=a("880c"),r=a("62cd"),c=a("32a7"),l={name:"GenerarPDF",props:["Multimedia"],components:{QSpinner:n["a"],QCarousel:s["a"],QCarouselSlide:r["a"],QCarouselControl:c["a"]},data:function(){return{slide:"",contenidoPDF:"",generando:!1,MultimediaPDF:[]}},created:function(){var e=this;this.Multimedia.forEach((function(t){e.MultimediaPDF.push({IdMultimedia:t.IdMultimedia,URL:t.URL,Tipo:t.Tipo,OrigenMultimedia:t.OrigenMultimedia,Titulo:"",Descripcion:""})})),this.slide=this.MultimediaPDF[0].URL},methods:{generarPDF:function(){var e=this;this.generando=!0,setTimeout((function(){e.generando=!1}),1500);var t=this.contenidoPDF.replace(/\r?\n/g,"<br>"),a=this.MultimediaPDF.map((function(e){return{IdMultimedia:e.IdMultimedia,URL:e.URL,Tipo:e.Tipo,OrigenMultimedia:e.OrigenMultimedia,Titulo:e.Titulo,Descripcion:e.Descripcion.replace(/\r?\n/g,"<br>")}}));location.href="https://io.docdoc.com.ar/api/multimedia-caso/generar-pdf?Multimedia=".concat(JSON.stringify(a),"&ContenidoPDF=").concat(t)},enviarMail:function(){var e=this.contenidoPDF.replace(/\r?\n/g,"<br>"),t=this.MultimediaPDF.map((function(e){return{IdMultimedia:e.IdMultimedia,URL:e.URL,Tipo:e.Tipo,OrigenMultimedia:e.OrigenMultimedia,Titulo:e.Titulo,Descripcion:e.Descripcion.replace(/\r?\n/g,"<br>")}}));this.$emit("enviarMail",t,e)}}},d=l,u=(a("c8e7"),a("2877")),m=Object(u["a"])(d,o,i,!1,null,null,null);t["a"]=m.exports},3:function(e,t){},3081:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"90vw"}},[a("div",{staticClass:"form__container"},[a("q-toggle",{staticStyle:{"margin-right":"15px","margin-top":"30px"},attrs:{label:"Persona Jurídica",color:"primary","true-value":"S","false-value":"N"},on:{click:function(t){return e.mostrarPersona()}},model:{value:e.persona.EsJuridica,callback:function(t){e.$set(e.persona,"EsJuridica",t)},expression:"persona.EsJuridica"}}),e.persona.EsJuridica&&"N"!==e.persona.EsJuridica?e._e():a("q-toggle",{staticStyle:{"margin-top":"30px"},attrs:{label:"Mostrar Datos Adicionales",color:"primary"},model:{value:e.mostrarDatosAdicionales,callback:function(t){e.mostrarDatosAdicionales=t},expression:"mostrarDatosAdicionales"}})],1),a("div",{staticClass:"form__container"},["N"===e.persona.EsJuridica?a("q-input",{staticClass:"input",attrs:{type:"number",label:"Documento",color:e.persona.validate.Documento()?"red":""},model:{value:e.persona.Documento,callback:function(t){e.$set(e.persona,"Documento",e._n(t))},expression:"persona.Documento"}}):e._e(),a("div",["N"===e.persona.EsJuridica?a("q-btn",{staticStyle:{"margin-top":"30px"},attrs:{color:"accent"},on:{click:function(t){return e.llenarPersona()}}},[e._v("\n        Traer datos\n      ")]):e._e(),a("div",["N"===e.persona.EsJuridica?a("q-input",{staticClass:"input",attrs:{type:"text",label:"Nombres",color:e.persona.validate.Nombres()?"red":""},model:{value:e.persona.Nombres,callback:function(t){e.$set(e.persona,"Nombres",t)},expression:"persona.Nombres"}}):a("q-select",{attrs:{value:e.model,"use-input":"","hide-selected":"","fill-input":"",label:"Razón Social",options:e.opcionesPersonas,color:e.persona.validate.Nombres()?"red":""},on:{filter:e.filterFn,"input-value":e.setModel,input:e.setPersona}}),"N"===e.persona.EsJuridica?a("q-input",{staticClass:"input",attrs:{type:"text",label:"Apellidos/s",color:e.persona.validate.Apellidos()?"red":""},model:{value:e.persona.Apellidos,callback:function(t){e.$set(e.persona,"Apellidos",t)},expression:"persona.Apellidos"}}):e._e(),a("q-input",{staticClass:"input",attrs:{type:"email",label:"Email",color:e.persona.validate.Email()?"red":""},model:{value:e.persona.Email,callback:function(t){e.$set(e.persona,"Email",t)},expression:"persona.Email"}}),a("q-input",{staticClass:"input",attrs:{type:"tel",label:"CUIT",color:e.persona.validate.CUIT()?"red":""},model:{value:e.persona.CUIT,callback:function(t){e.$set(e.persona,"CUIT",t)},expression:"persona.CUIT"}}),e._l(e.Telefonos,(function(t){return a("div",{key:t.id,staticStyle:{display:"flex","align-items":"center"}},[a("q-input",{staticClass:"input",attrs:{type:"tel",label:"Teléfono",color:e.persona.validate.Telefonos()?"red":""},model:{value:t.tel,callback:function(a){e.$set(t,"tel",a)},expression:"t.tel"}}),a("q-input",{staticClass:"input",attrs:{type:"text",label:"Detalle"},model:{value:t.Detalle,callback:function(a){e.$set(t,"Detalle",a)},expression:"t.Detalle"}}),e.Telefonos.length>1&&"actor"===e.rol?a("q-checkbox",{staticStyle:{"margin-left":"10px"},attrs:{label:"Principal"},on:{input:function(a){return e.telefonoPrincipal(t.id)}},model:{value:t.check,callback:function(a){e.$set(t,"check",a)},expression:"t.check"}}):e._e(),t.id===e.Telefonos.length-1?a("q-btn",{staticStyle:{"max-heigth":"1rem","margin-left":"2rem"},attrs:{color:"primary",round:""},on:{click:e.agregarTelefono}},[e._v("\n            +\n            "),a("q-tooltip",[e._v("\n              Agregar Teléfono\n            ")])],1):e._e(),t.id===e.Telefonos.length-1&&e.Telefonos.length>1?a("q-btn",{staticStyle:{"max-heigth":"1rem","margin-left":"1rem"},attrs:{color:"red",round:""},on:{click:e.quitarTelefono}},[e._v("\n            -\n            "),a("q-tooltip",[e._v("\n              Quitar Teléfono\n            ")])],1):e._e()],1)})),a("q-input",{staticClass:"input",attrs:{label:"Domicilio",color:e.persona.validate.Domicilio()?"red":""},model:{value:e.persona.Domicilio,callback:function(t){e.$set(e.persona,"Domicilio",t)},expression:"persona.Domicilio"}})],2)],1)],1),e.mostrarDatosAdicionales?a("div",{staticClass:"form__container",staticStyle:{"max-width":"50vw"}},["N"===e.persona.EsJuridica?a("q-expansion-item",{attrs:{label:" Más Datos Personales"}},[a("q-input",{attrs:{type:"date",color:"Fecha de Nacimiento"},model:{value:e.persona.FechaNacimiento,callback:function(t){e.$set(e.persona,"FechaNacimiento",t)},expression:"persona.FechaNacimiento"}}),a("q-input",{staticClass:"input",attrs:{label:"Oficio"},model:{value:e.persona.Oficio,callback:function(t){e.$set(e.persona,"Oficio",t)},expression:"persona.Oficio"}}),a("p",{staticStyle:{"margin-top":"40px"}},[e._v("Sexo\n    "),a("q-option-group",{attrs:{type:"radio",color:"primary",options:[{label:"Masculino",value:"Masculino"},{label:"Femenino",value:"Femenino"},{label:"Otro",value:"Otro"}]},model:{value:e.persona.Sexo,callback:function(t){e.$set(e.persona,"Sexo",t)},expression:"persona.Sexo"}})],1),a("p",{staticStyle:{"margin-top":"40px"}},[e._v("Estado Civil\n      "),a("q-option-group",{attrs:{type:"radio",color:"primary",options:[{label:"Soltero/a",value:"Soltero"},{label:"Casado/a",value:"Casado"},{label:"Otro",value:"Otro"}]},model:{value:e.persona.EstadoCivil,callback:function(t){e.$set(e.persona,"EstadoCivil",t)},expression:"persona.EstadoCivil"}})],1)],1):e._e(),a("MasDatos",{attrs:{categorias:e.categorias}})],1):e._e(),a("div",{staticStyle:{display:"flex","flex-flow":"row-nowrap","align-items":"center"}},[a("q-btn",{staticStyle:{"margin-right":"15px","margin-top":"30px"},attrs:{flat:"",color:"primary"},on:{click:function(t){return e.$emit("volver")}}},[e._v("\n      Cancelar\n    ")]),a("q-btn",{staticStyle:{"margin-top":"30px"},attrs:{color:"accent"},on:{click:e.control_persona}},[e._v("\n      Listo\n    ")])],1)])},i=[],n=(a("6b54"),a("06db"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form__container",staticStyle:{width:"50vw"}},e._l(e.categorias,(function(t,o){return a("div",{key:o.Parametros},[a("q-expansion-item",{staticStyle:{"margin-top":"2vw"},attrs:{label:o}},e._l(t,(function(t){return a("div",{key:t},["string"===t.TipoDato?a("div",[a("q-input",{staticClass:"input",attrs:{type:"text",label:t.Descripcion},model:{value:t.Valor,callback:function(a){e.$set(t,"Valor",a)},expression:"parametro.Valor"}})],1):e._e(),"integer"===t.TipoDato?a("div",[a("q-input",{staticClass:"input",attrs:{type:"num",label:t.Descripcion},model:{value:t.Valor,callback:function(a){e.$set(t,"Valor",a)},expression:"parametro.Valor"}})],1):e._e()])})),0)],1)})),0)}),s=[],r={props:["categorias","IdRTC"],name:"MasDatos",data:function(){return{}}},c=r,l=(a("a103"),a("2877")),d=Object(l["a"])(c,n,s,!1,null,null,null),u=d.exports,m=a("3a34"),p=a("8daa"),h=a("b628"),v=a("3a5e"),f=a("2a19"),b={props:["personaeditar","editarPersona","idTipoCaso","IdCaso","index","rol"],components:{MasDatos:u,Loading:v["a"],Notify:f["a"]},name:"StepPersona",data:function(){return{persona:m["a"].Personas(),RolTipoCaso:m["a"].RolesTipoCaso(),mostrarDatosAdicionales:!1,roles:[],rolSeleccionado:{},categorias:{},parametros:[],Telefonos:[{id:0,tel:"",Detalle:"",EsPrincipal:"actor"===this.rol?"S":"N",check:!0}],opcionesPersonas:[],model:""}},created:function(){var e=this;p["a"].Get("/tipos-caso/".concat(this.idTipoCaso,"/roles"),{},(function(t){t.Error||(e.roles=t.map((function(e){return{label:e.Rol,value:e.IdRTC}})),e.editarPersona?(e.persona=e.personaeditar,"J"===e.persona.Tipo?e.persona.EsJuridica="S":e.persona.EsJuridica="N",e.persona.Parametros.forEach((function(t){e.categorias[t.Categoria]||(e.categorias[t.Categoria]=[]),e.categorias[t.Categoria].push(t)}))):(e.persona.EsJuridica="N",e.rolSeleccionado.value=0))}))},methods:{llenarPersona:function(){var e=this,t=this.persona.Documento;t&&(8===t.toString().length?p["a"].Get("/personas/padron",{documento:this.persona.Documento},(function(t){t.Error?f["a"].create(t.Error):(e.persona.Nombres=t.Nombres,e.persona.Apellidos=t.Apellidos,e.persona.Domicilio=t.Domicilio)})):(this.$q.notify({color:"primary",timeout:800,message:"El documento ingresado no es valido"}),this.persona.Nombres=""))},agregarTelefono:function(){var e=this.Telefonos[this.Telefonos.length-1].id+1;this.Telefonos.push({id:e,tel:"",Detalle:"",EsPrincipal:"N",check:!1})},quitarTelefono:function(){this.Telefonos.splice(-1,1)},control_persona:function(){this.persona.validate.scenario.Alta()?this.$q.notify({color:"primary",timeout:800,message:"Verifique los datos ingresados"}):"N"===this.persona.EsJuridica?this.persona.Nombres?this.agregar_persona():this.$q.notify({color:"primary",timeout:800,message:"Debe ingresar el nombre para poder continuar."}):this.persona.Nombres?this.agregar_persona():this.$q.notify({color:"primary",timeout:800,message:"Debe ingresar la Razón Social para poder continuar."})},mostrarPersona:function(){var e=[];this.Telefonos.map((function(t){e.push(t.tel)})),this.persona.Telefonos=e},seleccionRol:function(){var e=this;p["a"].Get("/roles-tipo-caso/",{id:this.rolSeleccionado.value},(function(t){var a={Error:null};t.Error?a.Error=t.Error:(e.persona.IdRTC=e.rolSeleccionado.value,e.RolTipoCaso=t,e.RolTipoCaso.Parametros=JSON.parse(e.RolTipoCaso.Parametros),e.RolTipoCaso.Parametros.forEach((function(e){e.Valor=""})),e.RolTipoCaso.Parametros.forEach((function(t){e.categorias[t.Categoria]||(e.categorias[t.Categoria]=[]),e.categorias[t.Categoria].push(t)})))}))},agregar_persona:function(){var e=this,t=[];if(this.Telefonos.map((function(e){t.push({Telefono:e.tel,Detalle:e.Detalle,EsPrincipal:e.EsPrincipal})})),this.persona.Telefonos=t,"tarjeta"===this.editarPersona)p["a"].Get("/casos/".concat(this.IdCaso),{},(function(t){if(!t.Error){var a=t.PersonasCaso[e.index];a.Nombres=e.persona.Nombres,a.Apellidos=e.persona.Apellidos,a.Domicilio=e.persona.Domicilio,a.Email=e.persona.Email,a.Documento=e.persona.Documento,a.CUIT=e.persona.CUIT,a.Observaciones=e.persona.Observaciones,a.Telefonos=e.persona.Telefonos,a.Parametros=e.persona.Parametros}})),this.editarPersona=!1;else{for(var a in this.categorias)this.categorias[a].forEach((function(t){e.parametros.push(t)}));this.persona.Parametros=this.parametros,this.$emit("agregar-persona",this.persona)}},telefonoPrincipal:function(e){this.Telefonos.forEach((function(t){t.id===e?(t.check=!0,t.EsPrincipal="S"):(t.check=!1,t.EsPrincipal="N")}))},filterFn:function(e,t,a){var o=this;e=this.accentFold(e),e.length<3?a():p["a"].Get("/estudios/".concat(h["a"].UsuarioLogueado.IdEstudio,"/buscar-personas"),{Cadena:e,Tipo:"J"},(function(e){e.Error||t((function(){o.opcionesPersonas.splice(0),e.forEach((function(e){o.opcionesPersonas.push({label:e.Nombres,value:e})}))}))}))},accentFold:function(e){var t={"á":"a","é":"e","è":"e","í":"i","ó":"o","ú":"u","Á":"a","É":"e","Í":"i","Ó":"o","Ú":"u"};if(!e)return"";for(var a="",o=0;o<e.length;o++)a+=t[e.charAt(o)]||e.charAt(o);return a},setModel:function(e){this.model=e,this.persona.Nombres=e},setPersona:function(e){var t=e.value;this.persona.Nombres=t.Nombres,this.persona.Email=t.Email,this.persona.CUIT=t.Cuit,this.persona.Telefonos=t.Telefonos,this.persona.Domicilio=t.Domicilio}}},g=b,C=(a("3bbd"),Object(l["a"])(g,o,i,!1,null,null,null));t["a"]=C.exports},3082:function(e,t,a){"use strict";var o=a("ccea"),i=a.n(o);i.a},"351e":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticStyle:{position:"relative"}},[e.MultimediaSeleccionado.length>0?a("div",{staticClass:"botones_container column"},[a("q-btn",{attrs:{label:"Eliminar",color:"negative",push:""},on:{click:function(t){e.modalEliminar=!0}}}),a("q-btn",{staticStyle:{"margin-top":"10px"},attrs:{label:"Enviar por Mail",color:"teal",push:""},on:{click:function(t){e.modalMail=!0}}}),0===e.MultimediaSeleccionado.filter((function(e){return"I"!==e.Tipo})).length?a("q-btn",{staticStyle:{"margin-top":"10px"},attrs:{label:"Generar PDF",color:"teal",push:""},on:{click:function(t){e.modalPDF=!0}}}):e._e()],1):e._e(),a("q-dialog",{attrs:{"prevent-close":""},model:{value:e.modalEliminar,callback:function(t){e.modalEliminar=t},expression:"modalEliminar"}},[a("q-card",{staticStyle:{padding:"1rem"}},[e.eliminando?a("div",{staticStyle:{display:"flex","justify-content":"center","text-align":"center","margin-left":"15px","margin-right":"15px",padding:"35px"}},[e._v("\n        Espere unos instantes, se estan eliminando los archivos.\n        "),a("br"),e._v("\n        Esto puede tardar algunos segundos.\n      ")]):a("div",[a("span",{staticClass:"text-h6"},[e._v("Eliminar Archivos")]),a("span",[a("p",[e._v("\n            Al eliminar archivos, estos no podrán ser recuperados en el futuro.\n            "),a("br"),e._v("\n            ¿Está seguro que desea eliminar estos archivos?\n          ")])]),a("div",{staticStyle:{float:"right"}},[a("q-btn",{attrs:{color:"negative",label:"Eliminar"},on:{click:function(t){return e.eliminarArchivos()}}}),a("q-btn",{attrs:{flat:"",label:"Cancelar"},on:{click:function(t){e.modalEliminar=!1}}})],1)])])],1),a("q-dialog",{model:{value:e.modalMail,callback:function(t){e.modalMail=t},expression:"modalMail"}},[a("EnviarMail",{attrs:{Multimedia:e.MultimediaSeleccionado,ContenidoPDF:e.ContenidoPDF,asunto:e.datosCaso.Caratula},on:{mailEnviado:e.mailEnviado,cerrar:function(t){e.modalMail=!1}}})],1),a("q-dialog",{model:{value:e.modalPDF,callback:function(t){e.modalPDF=t},expression:"modalPDF"}},[a("GenerarPDF",{attrs:{Multimedia:e.MultimediaSeleccionado},on:{enviarMail:e.enviarPDF,cerrar:function(t){e.modalPDF=!1}}})],1),a("q-splitter",{staticStyle:{height:"100%"},scopedSlots:e._u([{key:"before",fn:function(){return[a("q-tabs",{staticClass:"text-teal",attrs:{vertical:"","inline-label":"",align:"left"},on:{input:e.changeTab},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab",{staticStyle:{"justify-content":"initial"},attrs:{name:"caso",icon:e.folderIcon("caso"),label:"Caso"}}),a("q-tab",{staticStyle:{"justify-content":"initial"},attrs:{name:"movimientos",icon:e.folderIcon("movimientos"),label:"Movimientos"}}),a("q-tab",{staticStyle:{"justify-content":"initial"},attrs:{name:"cliente",icon:e.folderIcon("cliente"),label:"Chat / Cliente"}})],1),a("q-separator"),a("q-uploader",{staticStyle:{width:"97%","margin-top":"10px"},attrs:{label:"Multimedia","auto-upload":"",multiple:"",factory:e.factoryFn},on:{uploaded:e.uploadedFile,finish:e.finishUpload,failed:e.verErrorUpload,"factory-failed":e.verErrorUpload}}),e._v('\n      * Para subir archivos posicionece en la carpeta "Caso" o "Chat/Cliente"  y luego suba los archivos que desee.\n      '),a("br"),e._v('\n      * Los archivos que se intenten subir en la carpeta "Movimientos" se subiran en la carpeta "Caso".\n\n      '),"/ArchivosCaso"!==e.$route.path?a("q-separator"):e._e(),"/ArchivosCaso"!==e.$route.path?a("q-btn",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{label:"Ver en otra pestaña",color:"teal",push:""},on:{click:function(t){e.abrirNuevaPestaña()}}}):e._e()]},proxy:!0},{key:"separator",fn:function(){return[a("q-avatar",{staticStyle:{top:"400px"},attrs:{color:"teal","text-color":"white",size:"35px",icon:"drag_indicator"}})]},proxy:!0},{key:"after",fn:function(){return[a("q-tabs",{staticClass:"text-grey-5 bg-teal",attrs:{"indicator-color":"transparent","active-color":"white",align:"justify"},on:{input:e.changeTabCarpeta},model:{value:e.tabCarpeta,callback:function(t){e.tabCarpeta=t},expression:"tabCarpeta"}},[a("q-tab",{attrs:{name:"todo",label:"Todo"}}),a("q-tab",{attrs:{name:"imagenes",label:"Imagenes"}}),a("q-tab",{attrs:{name:"videos",label:"Videos"}}),a("q-tab",{attrs:{name:"otros",label:"Otros Archivos"}})],1),a("q-tab-panels",{staticClass:"bg-transparent",attrs:{animated:"",vertical:"","transition-prev":"jump-up","transition-next":"jump-up"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.tabs,(function(t){return a("q-tab-panel",{key:t,staticClass:"row",attrs:{name:t}},[e.loading?a("div",{staticClass:"col-12"},[a("Loading")],1):0===e.filtroCarpeta.length?a("div",[e._v("\n            No hay archivos añadidos en esta carpeta.\n          ")]):e._l(e.filtroCarpeta,(function(t){return a("div",{key:t.URL,staticClass:"col-grow-3 container_multimedia items-end",style:t.check?"border-color: red":""},[a("q-checkbox",{staticClass:"check_multimedia",attrs:{color:"red"},on:{input:function(a){return e.selectArchive(t)}},model:{value:t.check,callback:function(a){e.$set(t,"check",a)},expression:"m.check"}}),a("q-item",{staticClass:"column"},["A"===t.Tipo?a("div",[a("q-avatar",{attrs:{size:"200px",color:"black","text-color":"yellow",icon:"graphic_eq"}}),a("audio",{attrs:{controls:""}},[a("source",{attrs:{src:"https://io.docdoc.com.ar/api/multimedia?file="+t.URL}})])],1):"V"===t.Tipo?a("video",{staticClass:"img--multimedia",attrs:{src:"https://io.docdoc.com.ar/api/multimedia?file="+t.URL,controls:""}}):"I"===t.Tipo?a("img",{staticClass:"img--multimedia",attrs:{src:"https://io.docdoc.com.ar/api/multimedia?file="+t.URL}}):a("q-avatar",{attrs:{square:"",rounded:"",size:"200px",color:"white","text-color":"black"}},[e._v("\n                "+e._s(e.format(t.URL))+"\n              ")]),a("q-item",{staticClass:"nombre_multimedia",attrs:{clickable:""}},[e._v("\n                "+e._s(t.Nombre)+"\n                "),a("q-menu",{model:{value:t.showing,callback:function(a){e.$set(t,"showing",a)},expression:"m.showing"}},[a("q-list",{staticStyle:{"min-width":"100px"}},[a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(a){return e.descargarArchivo(t.URL,t.Nombre)}}},[a("q-item-section",[e._v("Descargar")])],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(a){return e.abrirVisor(t)}}},[a("q-item-section",[e._v("Ver Archivo")])],1),a("q-separator"),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(a){return e.editarNombre(!1,t.Nombre,t.IdMultimedia)}}},[a("q-item-section",[e._v("Editar Nombre")])],1)],1)],1)],1)],1)],1)}))],2)})),1)]},proxy:!0}]),model:{value:e.splitterModel,callback:function(t){e.splitterModel=t},expression:"splitterModel"}}),a("q-dialog",{model:{value:e.modalVisor,callback:function(t){e.modalVisor=t},expression:"modalVisor"}},[a("VisorArchivo",{attrs:{archivo:e.archivoVer},on:{cerrar:function(t){e.modalVisor=!1}}})],1),a("q-dialog",{model:{value:e.modalNombre,callback:function(t){e.modalNombre=t},expression:"modalNombre"}},[a("q-card",{staticStyle:{padding:"1em",width:"70%",display:"grid"}},[a("q-input",{staticClass:"input",attrs:{type:"text"},model:{value:e.nombreEditar,callback:function(t){e.nombreEditar=t},expression:"nombreEditar"}}),a("q-btn",{staticStyle:{"justify-self":"center","margin-top":"10px"},attrs:{color:"teal",label:"Aceptar"},on:{click:function(t){return e.editarNombre(!0)}}})],1)],1)],1)},i=[],n=(a("20d6"),a("28a5"),a("6762"),a("2fdb"),a("b628")),s=a("8daa"),r=a("3a5e"),c=a("38b4"),l=a("5181"),d=a("2f12"),u=a("adad"),m=a("823b"),p=a("7460"),h=a("429b"),v=a("8562"),f=a("0d59"),b={name:"ArchivosCaso",components:{QTabPanels:u["a"],QTabPanel:m["a"],QTab:p["a"],QTabs:h["a"],QSplitter:v["a"],QSpinner:f["a"],Loading:r["a"],VisorArchivo:c["a"],EnviarMail:l["a"],GenerarPDF:d["a"]},data:function(){return{id:0,check:!1,enviando:!1,loading:!0,tab:"caso",tabCarpeta:"todo",tabs:["caso","movimientos","cliente"],splitterModel:15,CarpetaCaso:[],CarpetaMovimientos:[],CarpetaCliente:[],Multimedia:[],MultimediaSeleccionado:[],datosCaso:{},modalEliminar:!1,eliminando:!1,modalVisor:!1,archivoVer:{},modalNombre:!1,nombreEditar:"",IdMultimedia:0,modalMail:!1,modalPDF:!1,ContenidoPDF:""}},created:function(){var e=this;this.$route.query.id?(this.id=this.$route.query.id,s["a"].Get("/casos",{id:this.id},(function(t){t.Error?console.log("Hubo un error al traer el caso."):(e.caso=t,e.datosCaso={Caratula:t.Caratula,Carpeta:t.Carpeta,IdCaso:t.IdCaso,Estado:t.Estado,FechaAlta:t.FechaAlta,FechaEstado:t.FechaEstado,FechaUltVisita:t.FechaUltVisita,NroExpediente:t.NroExpediente,Competencia:t.Competencia,IdCompetencia:t.IdCompetencia,TipoCaso:t.TipoCaso,IdTipoCaso:t.IdTipoCaso,Juzgado:t.Juzgado,IdJuzgado:t.IdJuzgado,Nominacion:t.Nominacion,IdNominacion:t.IdNominacion,EstadoAmbitoGestion:t.EstadoAmbitoGestion,IdEstadoAmbitoGestion:t.IdEstadoAmbitoGestion,Origen:t.Origen,IdOrigen:t.IdOrigen,IdMediacion:t.IdMediacion},e.personas=t.PersonasCaso?t.PersonasCaso:[])})),s["a"].Get("/multimedia-caso",{IdCaso:this.id},(function(t){t.Error?e.$q.notify(t.Error):(t.forEach((function(t){switch(t.check=!1,t.showing=!1,t.OrigenMultimedia){case"M":e.CarpetaMovimientos.push(t);break;case"R":e.CarpetaCliente.push(t);break;case"C":e.CarpetaCaso.push(t);break;default:break}})),e.loading=!1)}))):this.$router.push("GrillaCasos")},computed:{filtroCarpeta:function(){var e=this.tab,t="Carpeta"+e[0].toUpperCase()+e.slice(1);switch(this.tabCarpeta){case"todo":return this[t];case"imagenes":return this[t].filter((function(e){return"I"===e.Tipo}));case"videos":return this[t].filter((function(e){return"V"===e.Tipo}));case"otros":return this[t].filter((function(e){return"A"===e.Tipo||"O"===e.Tipo||"D"===e.Tipo}));default:break}}},methods:{factoryFn:function(){return{url:"https://io.docdoc.com.ar/api/multimedia",method:"POST",headers:[{name:"Authorization",value:"Bearer ".concat(n["a"].Token)}]}},uploadedFile:function(e){var t=e.files,a=e.xhr,o=JSON.parse(a.response);console.log(o);for(var i=0;i<t.length;i++){var n=t[i].type;this.Multimedia.push({URL:o.Urls[0],Nombre:o.Names[0],Tipo:n.includes("application")?"O":n.substring(0,1).toUpperCase(),OrigenMultimedia:"cliente"===this.tab?"R":"C"})}},finishUpload:function(){var e=this;s["a"].Post("/multimedia-caso/alta",{IdCaso:this.id,Multimedia:this.Multimedia},(function(t){t.Error?e.$q.notify(t.Error):("cliente"===e.tab?e.Multimedia.forEach((function(t){t.check=!1,e.CarpetaCliente.push(t)})):e.Multimedia.forEach((function(t){t.check=!1,e.CarpetaCaso.push(t)})),e.$q.notify("Los archivos se han terminado de subir con exito.")),e.Multimedia=[]}))},abrirVisor:function(e){this.archivoVer={URL:e.URL,Tipo:e.Tipo,Formato:this.format(e.URL)},this.modalVisor=!0},folderIcon:function(e){return e===this.tab?"folder_open":"folder"},format:function(e){return e.split(".").reverse()[0]},selectArchive:function(e){if(e.check)this.MultimediaSeleccionado.push({IdMultimedia:e.IdMultimedia,URL:e.URL,OrigenMultimedia:e.OrigenMultimedia,Tipo:e.Tipo});else{var t=this.MultimediaSeleccionado.findIndex((function(t){return t.IdMultimedia===e.IdMultimedia}));this.MultimediaSeleccionado.splice(t,1)}},changeTab:function(e){var t="Carpeta"+e[0].toUpperCase()+e.slice(1);this.tabCarpeta="todo",this.MultimediaSeleccionado=[],this[t].forEach((function(e){e.check=!1}))},changeTabCarpeta:function(e){var t="Carpeta"+this.tab[0].toUpperCase()+this.tab.slice(1);this.MultimediaSeleccionado=[],this[t].forEach((function(e){e.check=!1}))},eliminarArchivos:function(){var e=this,t=this.tab,a="Carpeta"+t[0].toUpperCase()+t.slice(1),o=this.MultimediaSeleccionado,i=this.id;this.eliminando=!0,s["a"].Post("/multimedia-caso/eliminar",{IdCaso:i,Multimedia:JSON.stringify(o)},(function(t){if(t.Error)e[a].forEach((function(e){e.check=!1})),e.$q.notify(t.Error);else{for(var i=function(t){var i=e[a][t].IdMultimedia,n=o.findIndex((function(e){return e.IdMultimedia===i}));n>=0&&e[a].splice(t,1)},n=e[a].length-1;n>=0;n--)i(n);e.$q.notify("Los archivos se han eliminado con exito.")}e.eliminando=!1,e.modalEliminar=!1,e.MultimediaSeleccionado=[]}))},mailEnviado:function(){var e=this.tab,t="Carpeta"+e[0].toUpperCase()+e.slice(1);this[t].forEach((function(e){e.check=!1})),this.modalMail=!1,this.MultimediaSeleccionado=[],this.ContenidoPDF=""},enviarPDF:function(e,t){this.MultimediaSeleccionado=e,this.ContenidoPDF=t,this.modalMail=!0,this.modalPDF=!1},"abrirNuevaPestaña":function(){var e=this.$router.resolve({path:"/ArchivosCaso?id=".concat(this.id)});window.open(e.href,"_blank")},descargarArchivo:function(e,t){location.href="https://io.docdoc.com.ar/api/multimedia?file=".concat(e,"&download=true&name=").concat(t)},verErrorUpload:function(e){console.log(e)},editarNombre:function(e,t,a){var o=this;if(e){var i=this.tab,n="Carpeta"+i[0].toUpperCase()+i.slice(1);s["a"].Post("/multimedia-caso/editar-nombre",{IdCaso:this.id,IdMultimedia:this.IdMultimedia,Nombre:this.nombreEditar},(function(e){if(e.Error)o.$q.notify(e.Error);else{var t=o[n].findIndex((function(e){return parseInt(e.IdMultimedia)===parseInt(o.IdMultimedia)}));o[n][t].Nombre=o.nombreEditar,o.$q.notify("Se ha editado el archivo con exito.")}o.modalNombre=!1,o.nombreEditar="",o.IdMultimedia=0}))}else this.modalNombre=!0,this.nombreEditar=t,this.IdMultimedia=a}}},g=b,C=(a("7bae"),a("2877")),y=Object(C["a"])(g,o,i,!1,null,null,null);t["a"]=y.exports},"37ad":function(e,t,a){"use strict";var o=a("ee9f"),i=a.n(o);i.a},"38b4":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-card",{staticStyle:{"background-color":"white","max-width":"2600px !important",position:"relative"}},[a("span",{staticClass:"btn_salir",on:{click:function(t){return e.$emit("cerrar")}}},[a("q-tooltip",[e._v("Salir")]),e._v("\n    X\n  ")],1),a("div",{staticClass:"_container column"},["A"===e.archivo.Tipo?a("div",{staticClass:"column align-center"},[a("q-avatar",{staticClass:"icon_mult",attrs:{size:"200px",color:"black","text-color":"yellow",icon:"graphic_eq"}}),a("audio",{attrs:{controls:""}},[a("source",{attrs:{src:e.src}})])],1):"V"===e.archivo.Tipo?a("video",{staticStyle:{"max-height":"600px"},attrs:{src:e.src,controls:""}}):"I"===e.archivo.Tipo?a("img",{attrs:{src:e.src}}):"pdf"===e.archivo.Formato||"PDF"===e.archivo.Formato?e._l(e.numPagesComp,(function(t){return a("pdf",{key:t,staticStyle:{display:"inline-block",width:"600px"},attrs:{src:e.src,page:t},on:{"num-pages":function(t){e.numPages=t&&t>e.numPages?t:e.numPages}}})})):a("iframe",{attrs:{width:e.isMobile()?"500px":"2480px",height:e.isMobile()?"500px":"800px",scrolling:"auto",src:e.src,frameborder:"0"}})],2)])},i=[],n=a("a34a"),s=a.n(n),r=(a("96cf"),a("c973")),c=a.n(r),l=a("858e"),d={name:"VisorArchivo",props:["archivo"],components:{pdf:l["a"]},data:function(){return{src:"",numPages:1}},created:function(){var e=this;return c()(s.a.mark((function t(){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.archivo.Formato;case 2:if(t.t0=t.sent,"pdf"!==t.t0){t.next=7;break}t.t1=l["a"].createLoadingTask("https://io.docdoc.com.ar/api/multimedia?file=".concat(e.archivo.URL)),t.next=8;break;case 7:t.t1="https://io.docdoc.com.ar/api/multimedia?file=".concat(e.archivo.URL);case 8:e.src=t.t1;case 9:case"end":return t.stop()}}),t)})))()},computed:{numPagesComp:function(){for(var e=[],t=1;t<=this.numPages;t++)e[t-1]=t;return e}},methods:{isMobile:function(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}}},u=d,m=(a("6b61"),a("2877")),p=Object(m["a"])(u,o,i,!1,null,null,null);t["a"]=p.exports},"3a34":function(e,t,a){"use strict";a("6762"),a("2fdb"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("28a5");function o(e,t,a){var o=e[t];if(!o)return"";var i="";switch(a.trim()){case"int":"number"!==typeof o&&(i="El campo ".concat(t," debe ser un número."));break;case"email":var n=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;n.test(String(o).toLowerCase())||(i="El email no es válido.");break;case"trim":o=String(o).trim();break;default:if(a.includes("max")){var s=parseInt(a.split(" ")[1]);o.length>s&&(i="El campo ".concat(t," no puede tener más de ").concat(s," caracteres."))}else if(a.includes("min")){var r=parseInt(a.split(" ")[1]);o.length<r&&(i="El campo ".concat(t," no puede tener menos de ").concat(r," caracteres."))}}return e[t]=o,i}function i(e){var t=this;this.validate={};var a=function(a){t[a]=void 0,t.validate[a]=function(){for(var i="",n=0;n<e.Props[a].length;n++)if(i=o(t,a,e.Props[a][n]),i)break;return i}};for(var i in e.Props)a(i);this.validate.scenario={};var n=function(a){t.validate.scenario[a]=function(){for(var o=null,i=0;i<e.Scenarios[a].length;i++){var n=e.Scenarios[a][i],s=t.validate[n]();s&&(o||(o={}),o[n]=s)}return o}};for(var s in e.Scenarios)n(s);this.validate.all=function(){var a={};for(var o in e.Props){var i=t.validate[o]();t.validate[o]()&&(a||(a={}),a[o]=i)}return a};var r=function(a){l=t,["Scenarios","Props"].includes(a)||Object.defineProperty(t,a,{get:function(){if("function"===typeof e[a]&&e.Scenarios[a]){var t=e[a];e[a]=function(){l.validate.scenario[a]()||t.apply(this,arguments)}}return e[a]}})};for(var c in e){var l;r(c)}this.copyProps=function(e){var a=Object.keys(e);a.forEach((function(a){t[a]=e[a]}))}}function n(e){return function(){return new i(e)}}var s=a("8daa"),r={Props:{IdUsuario:["int"],IdRol:["int"],Nombres:["max 30"],Apellidos:["max 30"],Usuario:["max 120"],Password:["max 255"],Token:["max 500"],Email:["email","max 120"],IntentosPass:["int"],FechaUltIntento:["datetime"],FechaAlta:["datetime"],DebeCambiarPass:["max 1","min 1"],Estado:["max 1","min 1"],Observaciones:["max 255"]},Scenarios:{Login:["Usuario","Password"]},Dame:function(e){var t=this;s["a"].Get("/usuarios",{id:this.IdUsuario},(function(a){var o={Error:null};a.Error?o.Error=a.Error:t.copyProps(a),e(o)}))}},c=r,l={Props:{IdRTC:["int"],IdTipoCaso:["int"],Rol:["trim","max 100"],Parametros:["object"]},Scenarios:{Dame:["IdRTC"]},Dame:function(e){var t=this;s["a"].Get("/roles-tipo-caso/",{id:this.IdRTC},(function(a){var o={Error:null};a.Error?o.Error=a.Error:t.copyProps(a),e(o)}))}},d=l,u={Props:{Nombres:["max 30"],Apellidos:["max 30"],Domicilio:["max 120"],Email:["email","max 120"],EsJuridica:["boolean"],EsPrincipal:["max 1","min 1"],IdRTC:["int"],Documento:["int"],CUIT:["max 11","min 11"],Telefonos:["max 30"],RazonSocial:["max 120"],FechaNacimiento:["datetime"],Sexo:["max 1","min 1"],Oficio:["max 50"],EstadoCivil:["max 30"],Parametros:["object"],Categorias:["object"]},Scenarios:{Dame:["Documento"],Alta:["Nombres","Apellidos","Domicilio","Email","Documento","CUIT","Telefonos"]},Dame:function(e){var t=this;s["a"].Get("/casos/Personas",{id:this.Documento},(function(a){var o={Error:null};a.Error?o.Error=a.Error:t.copyProps(a),e(o)}))}},m=u;t["a"]={Usuarios:n(c),RolesTipoCaso:n(d),Personas:n(m)}},"3a5e":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("object",{staticStyle:{position:"relative",display:"block","margin-left":"35%"},attrs:{type:"image/svg+xml",data:"statics/docdoc-loading.svg",alt:"Docdoc! Gestión",width:"200",height:"100"}})},i=[],n={data:function(){return{}}},s=n,r=a("2877"),c=Object(r["a"])(s,o,i,!1,null,null,null);t["a"]=c.exports},"3bbd":function(e,t,a){"use strict";var o=a("b357"),i=a.n(o);i.a},"3e71":function(e,t,a){},4:function(e,t){},4678:function(e,t,a){var o={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"73332","./en-il.js":"73332","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df48","./fa.js":"8df48","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b46","./gd.js":"f6b46","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(e){var t=n(e);return a(t)}function n(e){if(!a.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}i.keys=function(){return Object.keys(o)},i.resolve=n,e.exports=i,i.id="4678"},"497a":function(e,t,a){},5:function(e,t){},5181:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-card",[a("q-item",{staticStyle:{"background-color":"black"}},[a("span",{staticClass:"q-subheading",staticStyle:{color:"white"}},[e._v("Enviar archivos por mail")])]),a("div",{staticStyle:{padding:"1rem"}},[a("span",[a("p",[e._v("\n        Ingrese el email de la persona con la que desea compartir los archivos o busque en los contactos del estudio.\n      ")])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-10"},[a("q-select",{staticStyle:{"margin-top":"10px",width:"100%"},attrs:{filled:"","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",label:"Buscar Contactos",options:e.contactos,hint:"Escriba 4 letras para comenzar la busqueda. Se mostraran los primeros 10 resultados."},on:{filter:e.filterFn,input:function(t){e.email=t.value}},scopedSlots:e._u([{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey"},[e._v("\n                    No se encontraron elementos que coincidan con la busqueda\n                ")])],1)]},proxy:!0}]),model:{value:e.contactoEnviar,callback:function(t){e.contactoEnviar=t},expression:"contactoEnviar"}})],1),a("div",{staticClass:"col-2 self-center justify-center",staticStyle:{display:"flex"}},[a("q-btn",{staticStyle:{"margin-right":"7px"},attrs:{color:"primary self-center",round:"",size:"l"},on:{click:function(t){e.modalContacto=!0,e.enviando=!1}}},[e._v("\n          +\n          "),a("q-tooltip",[e._v("\n            Agregar Contacto\n          ")])],1)],1)]),a("br"),a("br"),a("q-input",{staticClass:"input",attrs:{type:"email",label:e.validarEmail()?"Email":"Ingrese un Email válido"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("br"),a("br"),a("span",[a("p",[e._v("\n        Ingrese el asunto y el contenido del mail.\n      ")])]),a("q-input",{staticStyle:{width:"100%","margin-top":"15px"},attrs:{label:"Asunto",type:"text"},model:{value:e.asuntoMail,callback:function(t){e.asuntoMail=t},expression:"asuntoMail"}}),a("q-input",{staticStyle:{width:"100%","margin-top":"15px","margin-bottom":"10px"},attrs:{label:"Contenido",type:"textarea",rows:4},model:{value:e.contenidoMail,callback:function(t){e.contenidoMail=t},expression:"contenidoMail"}}),e.hayImagenes()?a("span",{staticStyle:{color:"#ed1b24"}},[e._v("* Se generara un PDF con todas las imagenes en un solo archivo.")]):e._e(),a("div",{staticStyle:{float:"right","margin-top":"15px","margin-bottom":"15px"}},[e.enviando?a("q-spinner",{staticClass:"self-center",staticStyle:{"margin-right":"10px"},attrs:{color:"primary",size:"2em"}}):a("q-btn",{attrs:{color:"teal",label:"Enviar"},on:{click:function(t){return e.compartirArchivos()}}}),a("q-btn",{attrs:{flat:"",label:"Cancelar"},on:{click:function(t){return e.$emit("cerrar")}}})],1)],1),a("q-dialog",{model:{value:e.modalContacto,callback:function(t){e.modalContacto=t},expression:"modalContacto"}},[a("ModalContacto",{on:{altaContacto:e.altaContacto,cerrar:function(t){e.modalContacto=!1}}})],1)],1)},i=[],n=(a("a481"),a("8daa")),s=a("fde3"),r=a("0d59"),c={name:"EnviarMail",components:{QSpinner:r["a"],ModalContacto:s["a"]},props:["Multimedia","ContenidoPDF","asunto"],data:function(){return{contactoEnviar:"",asuntoMail:this.asunto?this.asunto:"",contenidoMail:"",email:"",enviando:!1,contactos:[],modalContacto:!1}},methods:{filterFn:function(e,t,a){var o=this;e.length>=4?n["a"].Get("/contactos/buscar-contacto",{offset:0,limit:10,cadena:e},(function(a){t((function(){o.contactos=a.map((function(e){return{label:e.Apellidos+", "+e.Nombres,value:e.Email}}))}),(function(t){e.length>=4&&t.options.length>0&&(t.setOptionIndex(-1),t.moveOptionSelection(1,!0))}))})):this.contactos=[]},validarEmail:function(){if(""===this.email)return!0;var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return!!e.test(String(this.email).toLowerCase())},hayImagenes:function(){return this.Multimedia.filter((function(e){return"I"===e.Tipo})).length},altaContacto:function(e){this.contactoEnviar={label:e.Apellidos+", "+e.Nombres,value:e.Email},this.email=e.Email},compartirArchivos:function(){var e=this;this.email&&this.validarEmail()?this.asuntoMail&&this.contenidoMail?(this.enviando=!0,this.contenidoMail=this.contenidoMail.replace(/\r?\n/g,"<br>"),n["a"].Post("/multimedia-caso/enviar-email",{Email:this.email,Asunto:this.asuntoMail,Contenido:this.contenidoMail,Multimedia:JSON.stringify(this.Multimedia),ContenidoPDF:this.ContenidoPDF},(function(t){t.Error?e.$q.notify(t.Error):e.$q.notify("Los archivos se han enviado con exito."),e.enviando=!1,e.email="",e.asuntoMail="",e.contenidoMail="",e.$emit("mailEnviado")}))):this.$q.notify("Debe llenar todos los campos para continuar"):this.$q.notify("Debe ingresar un email válido")}}},l=c,d=a("2877"),u=Object(d["a"])(l,o,i,!1,null,null,null);t["a"]=u.exports},5391:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-card",[a("q-item",{staticStyle:{"background-color":"black",color:"white",display:"flex","align-items":"center"}},[a("q-icon",{staticStyle:{"margin-right":"1rem"},attrs:{color:"white",name:"share",size:"sm"}}),a("span",{staticClass:"q-subheading"},[e._v("Compartir Caso")])],1),a("q-separator"),e.enviando?a("div",{staticStyle:{display:"flex","justify-content":"center","text-align":"center","margin-left":"15px","margin-right":"15px",padding:"35px"}},[e._v("\n        Espere unos instantes, se estan cargando los datos.\n        "),a("br"),e._v("\n        Esto puede tardar varios segundos.\n    ")]):a("div",[a("div",{staticStyle:{"margin-top":"10px",display:"flex","justify-content":"center"}},[a("q-radio",{attrs:{val:"estudio",label:"Por Estudio"},model:{value:e.check,callback:function(t){e.check=t},expression:"check"}}),a("q-radio",{attrs:{val:"email",label:"Por Email o Telefono"},model:{value:e.check,callback:function(t){e.check=t},expression:"check"}})],1),"estudio"===e.check?a("div",{staticStyle:{padding:"2rem 2rem 0"}},[e._v("\n        Seleccione los Estudios con los que desea compartir el caso:\n        "),a("Select",{attrs:{multiple:!0,label:"Buscar Estudios",hint:"Seleccione uno o más estudios.",tooltip:!1,opciones:e.opcionesEstudios},on:{seleccion:e.estudiosSeleccionados}}),e.IdsEstudios.length>0?a("div",{staticStyle:{"margin-top":"10px",width:"100%"}},[e._v("\n          Estudios con los que se compartira el caso:\n          "),a("br"),a("b",[e._v(e._s(e.lista))])]):e._e()],1):e._e(),"email"===e.check?a("div",{staticStyle:{padding:"2rem 2rem 0"}},[e._v("\n        Ingrese el Email y/o el Telefono de la persona con la que desea compartir el caso:\n        "),a("q-input",{staticClass:"input",attrs:{type:"email",label:e.validarEmail()?"Email":"Ingrese un Email válido"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.verificar()}},model:{value:e.emailCompartir,callback:function(t){e.emailCompartir=t},expression:"emailCompartir"}}),a("q-input",{staticClass:"input",attrs:{type:"tel",label:"Telefono"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.verificar()}},model:{value:e.telCompartir,callback:function(t){e.telCompartir=t},expression:"telCompartir"}})],1):e._e(),a("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-botton":"2rem"}},[a("q-btn",{staticStyle:{"margin-top":"30px","margin-bottom":"2rem"},attrs:{color:"accent"},on:{click:function(t){"email"===e.check?e.verificar():e.compartirPorEstudio()}}},[e._v("Compartir")]),a("q-btn",{staticStyle:{"margin-right":"15px","margin-top":"30px","margin-bottom":"2rem"},attrs:{flat:"",color:"black"},on:{click:function(t){return e.$emit("compartir")}}},[e._v("Cancelar")])],1)])],1)},i=[],n=(a("20d6"),a("8daa")),s=a("a6d8"),r=a("3786"),c=a("b628"),l={name:"CompartirCaso",components:{QRadio:r["a"],Select:s["a"]},data:function(){return{emailCompartir:"",telCompartir:"",enviando:!1,Estudios:[],check:"estudio",opcionesEstudios:[],IdsEstudios:[],lista:""}},props:["caso"],created:function(){var e=this,t=c["a"].UsuarioLogueado.IdEstudio;n["a"].Get("/estudios/listar",{},(function(a){if(a.Error)e.$q.notify(a.Error);else{e.Estudios=a;var o=e.Estudios.findIndex((function(e){return e.IdEstudio===t}));e.Estudios.splice(o,1),e.opcionesEstudios=e.Estudios.map((function(e){return{label:e.Estudio+", "+e.Domicilio+", "+e.Ciudad+", "+e.Provincia,value:e.IdEstudio}}))}}))},methods:{estudiosSeleccionados:function(e){var t=this;this.IdsEstudios.splice(0),e.forEach((function(e){t.IdsEstudios.push(e.value)})),this.lista=this.listarEstudios()},listarEstudios:function(){var e=this,t=[];this.Estudios.forEach((function(a){e.IdsEstudios.indexOf(a.IdEstudio)>-1&&t.push(a.Estudio)}));var a="";return t.forEach((function(e){a=a+e+", "})),a.slice(0,-2)+"."},validarEmail:function(){if(""===this.emailCompartir)return!0;var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return!!e.test(String(this.emailCompartir).toLowerCase())},verificar:function(){this.emailCompartir||this.telCompartir?this.emailCompartir?this.verificarMail():this.compartirCaso():this.$q.notify("Debe ingresar un telefono o email válido")},verificarMail:function(){this.validarEmail()?this.compartirCaso():this.$q.notify("Debe ingresar un email válido")},compartirCaso:function(){var e=this,t={Email:this.emailCompartir,Telefono:this.telCompartir,IdCaso:this.caso.IdCaso};this.enviando=!0,n["a"].Post("/casos/compartir",t,(function(t){t.Error?(e.enviando=!1,e.$q.notify(t.Error)):(e.$emit("compartir"),e.$q.notify({color:"green",message:"Se compartió el caso '".concat(e.caso.Caratula,"' correctamente")}))}))},compartirPorEstudio:function(){var e=this;0===this.IdsEstudios.length?this.$q.notify({color:"red",message:"Debe seleccionar por lo menos un estudio"}):n["a"].Post("/casos/compartir-por-estudio/".concat(this.caso.IdCaso),{IdsEstudios:JSON.stringify(this.IdsEstudios)},(function(t){if(0!==t.length){var a=[];e.Estudios.forEach((function(e){t[e.IdEstudio]&&a.push(e.Estudio)}));var o="";a.forEach((function(e){o=o+e+", "})),e.$q.notify({color:"red",message:"Ha ocurrido un error al intentar compartir el caso con los siguientes estudios: "+o.slice(0,-2)+"."}),e.Estudios.forEach((function(a){t[a.IdEstudio]&&e.$q.notify({color:"red",message:"Orurrio un error con el estudio "+a.Estudio+" al "+t[a.IdEstudio]+"."})}))}else e.$emit("compartir"),e.$q.notify({color:"green",message:"Se compartió el caso '".concat(e.caso.Caratula,"' correctamente")})}))}}},d=l,u=a("2877"),m=Object(u["a"])(d,o,i,!1,null,null,null);t["a"]=m.exports},5677:function(e,t,a){"use strict";var o=a("5a64"),i=a.n(o);i.a},"5a64":function(e,t,a){},6:function(e,t){},"6b61":function(e,t,a){"use strict";var o=a("0f2e"),i=a.n(o);i.a},"755a":function(e,t,a){},"7a13":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tarjeta__caso",class:e.clases},[a("q-card",{staticStyle:{"background-color":"white"}},[a("div",{staticClass:"ver_caso_button_container"},[a("q-btn",{staticClass:"ver_caso_button",attrs:{color:"accent",to:e.enlaceVerCaso}},[a("span",{staticClass:"text-capitalize text-caption"},[e._v("Ver caso completo")])])],1),a("q-item",{staticClass:"bg-primary",staticStyle:{color:"white",display:"flex","align-items":"center","justify-content":"space-between"}},[a("q-icon",{attrs:{color:"white",name:e.ParamsTipoCaso[e.caso.TipoCaso]?e.ParamsTipoCaso[e.caso.TipoCaso].icon:"description",size:"sm"}},[a("q-tooltip",[e._v(e._s(e.caso.TipoCaso||"Tipo de Caso"))])],1),a("q-item-label",[a("span",{staticClass:"q-subheading",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.mostrarPersonas()}}},[e._v(e._s(e.caso.Caratula?e.caso.Caratula:"(Sin Carátula)"))])]),a("q-btn",{attrs:{icon:"person",color:"white",flat:"",round:""},on:{click:function(t){e.mostrandoModalPermisos=!0}}})],1),a("q-separator"),a("q-item",{style:"casos__grilla"===e.clases?"padding: 15px;display:flex; align-items:center;justify-content:space-between":"padding: 15px;display:flex; align-items:center;justify-content:flex-start"},[a("q-item-label",{style:"casos__grilla"===e.clases?"text-align:center;display:flex; flex-flow:column; align-items:center;":"",attrs:{header:""}},[a("span",[e._v(e._s(""+e.caso.Juzgado))]),"casos__listado"===e.clases?a("span",[e._v("-")]):e._e(),a("span",[e._v(e._s(""+(e.caso.Nominacion||"(Sin nominación)")))])]),"casos__listado"===e.clases?a("q-item-label",[e._v("|")]):e._e(),a("q-item-label",{style:"casos__grilla"===e.clases?"text-align:center;display:flex; flex-flow:column; align-items:center;":"",attrs:{header:""}},[a("span",[e._v(e._s(""+e.caso.TipoCaso))]),a("span",[e._v(e._s(""+(e.caso.EstadoCaso||"Estado del Caso")))]),a("span",[e._v(e._s(""+(e.caso.NroExpediente||"(Sin expediente)")))])])],1),a("q-separator"),e.comparticionesEnviadas.length>0?a("div",[a("q-list",{attrs:{highlight:""}},[a("q-item",[a("strong",[e._v("Compartidas por mí estudio")])]),e._l(e.comparticionesEnviadas,(function(t){return a("q-item",{key:t.IdComparticion,staticStyle:{display:"flex","justify-content":"space-evenly"}},e._l(e.datosComparticion(t),(function(t,o){return a("span",{key:t,staticClass:"tablaComparticion"},[a("strong",[e._v(e._s(o))]),a("br"),e._v("\n            "+e._s(t)+"\n          ")])})),0)}))],2)],1):e._e(),e.comparticionesRecibidas.length>0?a("div",[a("q-list",{attrs:{highlight:""}},[a("q-item",[a("strong",[e._v("Compartidas de otros estudios")])]),e._l(e.comparticionesRecibidas,(function(t){return a("q-item",{key:t.IdComparticion,staticStyle:{display:"flex","justify-content":"space-evenly"}},e._l(e.datosComparticion(t),(function(t,o){return a("span",{key:t,staticClass:"tablaComparticion"},[a("strong",[e._v(e._s(o))]),a("br"),e._v("\n            "+e._s(t)+"\n          ")])})),0)}))],2)],1):e._e(),e.movimientosCaso.length>0?a("div",e._l(e.movimientosCaso.slice(0,3),(function(t){return a("a",{key:t.IdMovimientoCaso,staticStyle:{cursor:"pointer"},on:{click:function(a){return e.mostrarMovimiento(t)}}},[a("q-list",{attrs:{highlight:"","inset-separator":""}},[t.FechaRealizado?a("q-item",{staticStyle:{display:"flex","align-items":"center"}},[a("q-icon",{staticStyle:{"margin-right":"1rem"},attrs:{name:"check_box",size:"sm",color:"green"}},[a("q-tooltip",{attrs:{anchor:"top left",self:"bottom left"}},[e._v("Realizado el "+e._s(e.parseDate(t.FechaRealizado)))])],1),a("span",[e._v(e._s(t.Detalle)+" - "+e._s(e.diasRestantes(t)))])],1):e._e(),t.FechaRealizado?e._e():a("q-item",[e._v(e._s(t.Detalle)+" - "+e._s(e.diasRestantes(t)))])],1)],1)})),0):a("div",[e.cargandoMovimientos?a("div",[a("Loading")],1):a("div",[a("div",{staticStyle:{"margin-top":"15px","margin-bottom":"15px","margin-left":"15px"}},[e._v("No hay movimientos")]),a("q-separator")],1)]),a("q-card-actions",{staticClass:"text-primary",style:e.isMobile()?"display:flex; flex-direction:column; font-weight:500; font-size:14; background-color: #E8EAF6;":"font-weight:500; font-size:14; background-color: #E8EAF6;",attrs:{align:"right"}},[a("div",{style:e.isMobile()?"margin-left: auto; margin-right: auto;":"margin-right: auto;"},[a("q-dialog",{staticStyle:{"background-color":"white"},model:{value:e.mostrarUnMovimiento,callback:function(t){e.mostrarUnMovimiento=t},expression:"mostrarUnMovimiento"}},[a("q-card",{staticStyle:{"min-width":"95vw"}},[e.mostrarUnMovimiento?a("TarjetaMovimiento",{staticStyle:{"margin-left":"auto","margin-right":"auto"},attrs:{movimiento:e.MovimientoAMostrar}}):e._e(),a("q-btn",{staticStyle:{"padding-top":"30px",float:"right","margin-bottom":"20px","margin-right":"20px"},attrs:{flat:""},on:{click:function(t){e.mostrarUnMovimiento=!1}}},[e._v("Cancelar")])],1)],1),a("div",{staticStyle:{"margin-left":"auto","margin-right":"auto","text-align":"center"}},[a("q-btn",{staticClass:"q-subheading",attrs:{round:"",color:"accent",icon:"add",size:"sm"},on:{click:function(t){e.altaMovimientosModal=!0}}}),a("span",{staticStyle:{"margin-left":"5px"}},[e._v("Nuevo Movimiento")])],1)],1),a("div",{style:e.isMobile()?"margin-left: auto; margin-right: auto; margin-top:0.5rem;":""},[a("q-btn",{attrs:{icon:"assignment",color:"primary",flat:"",rounded:"",outline:""},on:{click:e.abrirMovimientosModal}},[a("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Ver Movimientos")])],1),a("q-dialog",{model:{value:e.altaMovimientosModal,callback:function(t){e.altaMovimientosModal=t},expression:"altaMovimientosModal"}},[a("q-card",[a("q-item",{staticStyle:{"background-color":"black",color:"white",display:"flex","align-items":"center"}},[a("q-icon",{staticStyle:{"margin-right":"1rem"},attrs:{color:"white",name:"assignment",size:"sm"}}),a("span",{staticClass:"q-subheading"},[e._v("Nuevo Movimiento")])],1),e.altaMovimientosModal?a("AltaMovimientos",{attrs:{altaDesdeTarjetaCaso:!0,casoRecibido:e.caso.IdCaso},on:{cancelar:function(t){e.altaMovimientosModal=!1},exito:e.exitoAltaMovimiento}}):e._e()],1)],1),a("q-dialog",{model:{value:e.movimientosModal,callback:function(t){e.movimientosModal=t},expression:"movimientosModal"}},[a("q-card",{staticStyle:{"min-width":"95vw"}},[a("q-item",{staticStyle:{"background-color":"black",color:"white",display:"flex","justify-content":"space-between","align-items":"center"}},[a("q-icon",{attrs:{color:"white",name:"assignment",size:"sm"}}),a("q-item-label",[a("span",{staticClass:"q-subheading"},[e._v("Movimientos del Caso")])]),a("q-btn",{staticClass:"q-subheading",staticStyle:{color:"black"},attrs:{round:"",color:"primary",size:"sm"},on:{click:function(t){e.altaMovimientosModal=!0}}},[a("q-icon",{attrs:{name:"add",color:"black;"}}),a("q-tooltip",[e._v("Nuevo Movimiento")])],1)],1),e.movimientosCaso.length>0?a("div",e._l(e.movimientosCaso,(function(t,o){return a("TarjetaMovimiento",{key:o,staticStyle:{"margin-right":"auto","margin-left":"auto"},attrs:{movimiento:t,tarjetaCaso:!0},on:{borrar:function(a){return e.borrarMovimiento(t)}}})})),1):a("q-item",[a("q-item-label",[e._v("No se asignaron movimientos al caso")])],1),a("q-btn",{staticStyle:{float:"right",margin:"10px 10px 20px"},attrs:{flat:""},on:{click:function(t){e.movimientosModal=!1}}},[e._v("Cancelar")])],1)],1),a("q-btn",{attrs:{icon:"timeline",color:"primary",flat:"",rounded:"",outline:""},on:{click:e.mostrarObjetivos}},[a("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Ver Objetivos")])],1),a("q-dialog",{model:{value:e.objetivosModal,callback:function(t){e.objetivosModal=t},expression:"objetivosModal"}},[a("q-card",[a("q-item",{staticStyle:{"background-color":"black",color:"white",display:"flex","align-items":"center"}},[a("q-icon",{attrs:{color:"white",name:"timeline",size:"sm"}}),a("span",{staticClass:"q-subheading",staticStyle:{"margin-left":"1rem"}},[e._v("Objetivos del Caso")])],1),a("q-separator"),a("q-dialog",{model:{value:e.altaObjetivosModal,callback:function(t){e.altaObjetivosModal=t},expression:"altaObjetivosModal"}},[a("q-card",[a("q-item",{staticStyle:{"background-color":"black",display:"flex","align-items":"center",color:"white"}},[a("q-icon",{staticStyle:{"margin-right":"1rem"},attrs:{color:"white",name:"timeline",size:"sm"}}),a("span",{staticClass:"q-subheading"},[e._v("Nuevo Objetivo")])],1),a("q-separator"),a("q-item",[a("q-input",{attrs:{label:"Nombre del objetivo"},model:{value:e.nuevoObjetivo.Objetivo,callback:function(t){e.$set(e.nuevoObjetivo,"Objetivo",t)},expression:"nuevoObjetivo.Objetivo"}})],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{flat:"",color:"primary",label:"Aceptar"},on:{click:e.crearNuevoObjetivo}}),a("q-btn",{attrs:{flat:"",color:"primary",label:"Cancelar"},on:{click:function(t){e.altaObjetivosModal=!1}}})],1)],1)],1),e.perentorioHome?a("div",[e.objetivosCaso.length?a("div",e._l(e.objetivosCaso,(function(t){return a("q-item",{key:t.IdObjetivo,staticStyle:{padding:"15px"}},[a("q-item-section",{staticStyle:{"margin-right":"5px"},attrs:{color:"primary",icon:"label"}}),a("q-item-label",{attrs:{header:""}},[e._v(e._s(t.Objetivo))]),a("q-btn",{attrs:{icon:"edit",color:"primary",flat:"",rounded:"",outline:""},on:{click:function(a){return e.edicionObjetivo(t)}}},[a("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Editar Objetivo")])],1),a("q-dialog",{model:{value:e.editarObjetivo,callback:function(t){e.editarObjetivo=t},expression:"editarObjetivo"}},[a("q-card",[a("q-item",{staticStyle:{"background-color":"black",display:"flex","align-items":"center",color:"white"}},[a("q-icon",{staticStyle:{"margin-right":"1rem"},attrs:{color:"white",name:"timeline",size:"sm"}}),a("span",{staticClass:"q-subheading"},[e._v("Editar Objetivo")])],1),a("q-separator"),a("q-item",[a("q-input",{staticStyle:{margin:"2rem"},attrs:{type:"textarea",rows:"1","max-height":50,label:"Objetivo"},model:{value:e.objetivoEditar.Objetivo,callback:function(t){e.$set(e.objetivoEditar,"Objetivo",t)},expression:"objetivoEditar.Objetivo"}})],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){return e.finalizarEdicionObjetivo()}}},[e._v("Guardar")]),a("q-btn",{attrs:{flat:""},on:{click:function(t){e.editarObjetivo=!1}}},[e._v("Cancelar")])],1)],1)],1),a("q-dialog",{attrs:{"prevent-close":""},model:{value:e.mostrandoModalEditarObjetivo,callback:function(t){e.mostrandoModalEditarObjetivo=t},expression:"mostrandoModalEditarObjetivo"}},[a("q-card",{staticStyle:{padding:"1rem"}},[a("span",{staticClass:"text-h6 white"},[e._v("Editar Objetivo")]),a("span",[a("p",[e._v("Al salir se descartarán los cambios. ¿Está seguro?")])]),a("div",{staticStyle:{float:"right"}},[a("q-btn",{attrs:{color:"primary",label:"Aceptar"},on:{click:function(t){e.editarObjetivo=!1,e.mostrandoModalEditarObjetivo=!1}}}),a("q-btn",{attrs:{flat:"",label:"Cancelar"},on:{click:function(t){e.mostrandoModalEditarObjetivo=!1}}})],1)])],1),a("q-btn",{attrs:{icon:"delete",color:"primary",flat:"",rounded:"",outline:""},on:{click:function(a){return e.borrarObjetivo(t)}}},[a("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Eliminar Objetivo")])],1),a("q-dialog",{attrs:{"prevent-close":""},model:{value:e.mostrandoModalBorrarObjetivo,callback:function(t){e.mostrandoModalBorrarObjetivo=t},expression:"mostrandoModalBorrarObjetivo"}},[a("q-card",{staticStyle:{padding:"1rem"}},[a("span",{staticClass:"text-h6"},[e._v("Eliminar Objetivo")]),a("span",[a("p",[e._v("\n                          Al eliminar un objetivo, este no podrá ser recuperado en el futuro.\n                          ¿Está seguro que desea eliminar este objetivo?\n                        ")])]),a("div",{staticStyle:{float:"right"}},[a("q-btn",{attrs:{color:"primary",label:"Eliminar"},on:{click:function(t){return e.finalizarBorradoObjetivo()}}}),a("q-btn",{attrs:{flat:"",label:"Cancelar"},on:{click:function(t){e.mostrandoModalBorrarObjetivo=!1}}})],1)])],1)],1)})),1):a("q-item",[a("q-item-label",[e._v("No se asignaron objetivos al caso")])],1)],1):a("div",[e.caso.Objetivos&&e.caso.Objetivos.length>0?a("div",e._l(e.caso.Objetivos,(function(t){return a("q-item",{key:t.IdObjetivo,staticStyle:{padding:"15px"}},[a("q-item-section",{staticStyle:{"margin-right":"5px"},attrs:{color:"primary",icon:"label"}}),a("q-item-label",{attrs:{header:""}},[e._v(e._s(t.Objetivo))]),a("q-btn",{attrs:{icon:"edit",color:"primary",flat:"",rounded:"",outline:""},on:{click:function(a){return e.edicionObjetivo(t)}}},[a("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Editar Objetivo")])],1),a("q-dialog",{model:{value:e.editarObjetivo,callback:function(t){e.editarObjetivo=t},expression:"editarObjetivo"}},[a("q-card",[a("q-item",{staticStyle:{"background-color":"black",display:"flex","align-items":"center",color:"white"}},[a("q-icon",{staticStyle:{"margin-right":"1rem"},attrs:{color:"white",name:"timeline",size:"sm"}}),a("span",{staticClass:"q-subheading"},[e._v("Editar Objetivo")])],1),a("q-separator"),a("q-item",[a("q-input",{staticStyle:{margin:"2rem"},attrs:{type:"textarea",rows:"1","max-height":50,label:"Objetivo"},model:{value:e.objetivoEditar.Objetivo,callback:function(t){e.$set(e.objetivoEditar,"Objetivo",t)},expression:"objetivoEditar.Objetivo"}})],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){return e.finalizarEdicionObjetivo()}}},[e._v("Guardar")]),a("q-btn",{attrs:{flat:""},on:{click:function(t){e.editarObjetivo=!1}}},[e._v("Cancelar")])],1)],1)],1),a("q-dialog",{attrs:{"prevent-close":""},model:{value:e.mostrandoModalEditarObjetivo,callback:function(t){e.mostrandoModalEditarObjetivo=t},expression:"mostrandoModalEditarObjetivo"}},[a("q-card",{staticStyle:{padding:"1rem"}},[a("span",{staticClass:"text-h6 white"},[e._v("Editar Objetivo")]),a("span",[a("p",[e._v("Al salir se descartarán los cambios. ¿Está seguro?")])]),a("div",{staticStyle:{float:"right"}},[a("q-btn",{attrs:{color:"primary",label:"Aceptar"},on:{click:function(t){e.editarObjetivo=!1,e.mostrandoModalEditarObjetivo=!1}}}),a("q-btn",{attrs:{flat:"",label:"Cancelar"},on:{click:function(t){e.mostrandoModalEditarObjetivo=!1}}})],1)])],1),a("q-btn",{attrs:{icon:"delete",color:"primary",flat:"",rounded:"",outline:""},on:{click:function(a){return e.borrarObjetivo(t)}}},[a("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Eliminar Objetivo")])],1),a("q-dialog",{attrs:{"prevent-close":""},model:{value:e.mostrandoModalBorrarObjetivo,callback:function(t){e.mostrandoModalBorrarObjetivo=t},expression:"mostrandoModalBorrarObjetivo"}},[a("q-card",{staticStyle:{padding:"1rem"}},[a("span",{staticClass:"text-h6"},[e._v("Eliminar Objetivo")]),a("span",[a("p",[e._v("\n                          Al eliminar un objetivo, este no podrá ser recuperado en el futuro.\n                          ¿Está seguro que desea eliminar este objetivo?\n                        ")])]),a("div",{staticStyle:{float:"right"}},[a("q-btn",{attrs:{color:"primary",label:"Eliminar"},on:{click:function(t){return e.finalizarBorradoObjetivo()}}}),a("q-btn",{attrs:{flat:"",label:"Cancelar"},on:{click:function(t){e.mostrandoModalBorrarObjetivo=!1}}})],1)])],1)],1)})),1):a("q-item",[a("q-item-label",[e._v("No se asignaron objetivos al caso")])],1)],1),a("div",{staticStyle:{"padding-top":"20px","padding-left":"20px",float:"right"}},[a("q-btn",{staticStyle:{"margin-top":"10px","margin-bottom":"20px","margin-right":"10px"},attrs:{rounded:"",color:"accent",icon:"add",label:"Nuevo Objetivo"},on:{click:function(t){e.altaObjetivosModal=!0}}}),a("q-btn",{staticStyle:{"margin-top":"10px","margin-bottom":"20px","margin-right":"10px"},attrs:{flat:""},on:{click:function(t){e.objetivosModal=!1}}},[e._v("Cancelar")])],1)],1)],1),a("q-btn",{attrs:{icon:"people",color:"primary",flat:"",rounded:"",outline:""},on:{click:function(t){return e.mostrarPersonas()}}},[a("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Ver Personas")])],1),a("q-dialog",{model:{value:e.personas,callback:function(t){e.personas=t},expression:"personas"}},[a("q-card",{staticStyle:{width:"100%"}},[a("q-item",{staticStyle:{"background-color":"black",color:"white",display:"flex","align-items":"center"}},[a("q-icon",{attrs:{color:"white",name:"people",size:"sm"}}),a("span",{staticClass:"q-subheading",staticStyle:{"margin-left":"1rem"}},[e._v("Personas del Caso")])],1),a("q-separator"),e.cargandoPersonas?a("div",[a("Loading")],1):e.personas?a("div",e._l(e.personasCaso,(function(t){return a("q-item",{key:t.Documento,staticStyle:{padding:"15px",display:"flex","align-items":"center","justify-content":"space-between"}},[a("q-icon",{staticStyle:{"margin-right":"5px"},attrs:{color:t.EsPrincipal?"yellow":"white",name:"star"}}),a("q-item-label",{attrs:{header:""}},[e._v(e._s(t.Apellidos?t.Apellidos+", ":"")+" "+e._s(t.Nombres))]),a("q-item-label",{staticStyle:{"margin-top":"0"},attrs:{subheader:""}},[e._v("DNI: "+e._s(""+(t.Documento||"-")))]),null!=t.Telefono?a("q-item-label",{staticStyle:{"margin-left":"1rem","margin-top":"0"},attrs:{subheader:""}},[e._v("Tel.: "+e._s(t.Telefono))]):e._e(),a("q-btn",{staticStyle:{"margin-left":"5px"},attrs:{color:"primary",icon:"edit",flat:"",round:"",outline:""},on:{click:function(a){return e.editarPersona(t)}}}),a("q-dialog",{staticStyle:{padding:"2rem"},model:{value:e.editarPers,callback:function(t){e.editarPers=t},expression:"editarPers"}},[a("q-card",[a("div",{staticClass:"form__container",staticStyle:{padding:"1rem 2rem 0 2rem"}},["F"===e.personaEditar.Tipo?a("q-input",{staticClass:"input",attrs:{type:"number",label:"Documento"},model:{value:e.documento,callback:function(t){e.documento=t},expression:"documento"}}):e._e(),a("q-input",{staticClass:"input",attrs:{type:"text",label:"F"===e.personaEditar.Tipo?"Nombres/s":"Razón Social"},model:{value:e.personaEditar.Nombres,callback:function(t){e.$set(e.personaEditar,"Nombres",t)},expression:"personaEditar.Nombres"}}),"F"===e.personaEditar.Tipo?a("q-input",{staticClass:"input",attrs:{type:"text",label:"Apellidos/s"},model:{value:e.personaEditar.Apellidos,callback:function(t){e.$set(e.personaEditar,"Apellidos",t)},expression:"personaEditar.Apellidos"}}):e._e(),a("q-input",{staticClass:"input",attrs:{type:"email",label:"Email"},model:{value:e.personaEditar.Email,callback:function(t){e.$set(e.personaEditar,"Email",t)},expression:"personaEditar.Email"}}),a("q-input",{staticClass:"input",attrs:{type:"tel",label:"CUIT"},model:{value:e.personaEditar.Cuit,callback:function(t){e.$set(e.personaEditar,"Cuit",t)},expression:"personaEditar.Cuit"}}),a("q-input",{staticClass:"input",attrs:{type:"tel",label:"Teléfono"},model:{value:e.personaEditar.Telefono,callback:function(t){e.$set(e.personaEditar,"Telefono",t)},expression:"personaEditar.Telefono"}}),e._e(),a("q-input",{staticClass:"input",attrs:{label:"Domicilio"},model:{value:e.personaEditar.Domicilio,callback:function(t){e.$set(e.personaEditar,"Domicilio",t)},expression:"personaEditar.Domicilio"}})],1),a("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-botton":"2rem"}},[a("q-btn",{staticStyle:{"margin-right":"15px","margin-top":"30px","margin-bottom":"2rem"},attrs:{flat:"",color:"primary"},on:{click:function(t){e.editarPers=!1}}},[e._v("Cancelar")]),a("q-btn",{staticStyle:{"margin-top":"30px","margin-right":"2rem","margin-bottom":"2rem"},attrs:{color:"accent"},on:{click:function(t){return e.guardarPersona(e.personaEditar)}}},[e._v("Listo")])],1)])],1)],1)})),1):e._e(),a("q-btn",{staticStyle:{float:"right","margin-top":"10px","margin-bottom":"20px","margin-right":"10px"},attrs:{flat:""},on:{click:function(t){e.personas=!1}}},[e._v("Cancelar")])],1)],1),a("q-btn",{attrs:{icon:"edit",color:"primary",flat:"",rounded:"",outline:""},on:{click:function(t){e.editar=!0}}},[a("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Editar")])],1),a("q-dialog",{attrs:{"no-backdrop-dismiss":"","no-esc-dismiss":""},model:{value:e.editar,callback:function(t){e.editar=t},expression:"editar"}},[a("q-card",[this.editar?a("EditarCaso",{attrs:{casoRecibido:this.caso,EstadosCaso:e.EstadosCaso},on:{edicionTerminada:function(t){return e.edicionTerminada()},"cancelar-edicion":function(t){e.editar=!1}}}):e._e()],1)],1),a("q-btn",{attrs:{icon:"share",color:"primary",flat:"",rounded:"",outline:""},on:{click:function(t){e.compartir=!0}}},[a("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Compartir")])],1),a("q-dialog",{staticStyle:{width:"auto",height:"auto"},model:{value:e.compartir,callback:function(t){e.compartir=t},expression:"compartir"}},[a("CompartirCaso",{attrs:{caso:e.caso},on:{compartir:function(t){e.compartir=!1}}})],1),a("q-btn",{attrs:{icon:"archive",color:"primary",flat:"",rounded:"",outline:""},on:{click:function(t){e.mostrandoModalArchivar=!0}}},[a("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Archivar")])],1),a("q-btn",{attrs:{icon:"delete",color:"primary",flat:"",rounded:"",outline:""},on:{click:e.mostrarBorrarCaso}},[a("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[e._v("Eliminar")])],1)],1)])],1),a("q-dialog",{model:{value:e.mostrandoModalPermisos,callback:function(t){e.mostrandoModalPermisos=t},expression:"mostrandoModalPermisos"}},[a("q-card",[e.mostrandoModalPermisos?a("TarjetaPermisos",{attrs:{idcaso:e.caso.IdCaso},model:{value:e.caso.UsuariosCaso,callback:function(t){e.$set(e.caso,"UsuariosCaso",t)},expression:"caso.UsuariosCaso"}}):e._e()],1)],1),a("q-dialog",{attrs:{"prevent-close":""},model:{value:e.mostrandoModalArchivar,callback:function(t){e.mostrandoModalArchivar=t},expression:"mostrandoModalArchivar"}},[a("q-card",{staticStyle:{padding:"1rem"}},[a("span",{staticClass:"text-h6"},[e._v("Archivar Caso")]),a("span",[a("p",[e._v("\n          Al archivar un caso, este se ocultará de la lista.\n          Puede volver a ver el caso filtrando la búsqueda en la Página Casos\n        ")])]),a("div",{staticStyle:{float:"right"}},[a("q-btn",{attrs:{color:"primary",label:"Archivar"},on:{click:function(t){return e.archivarCaso()}}}),a("q-btn",{attrs:{flat:"",label:"Cancelar"},on:{click:function(t){e.mostrandoModalArchivar=!1}}})],1)])],1),a("q-dialog",{attrs:{"prevent-close":""},model:{value:e.mostrandoModalBorrar,callback:function(t){e.mostrandoModalBorrar=t},expression:"mostrandoModalBorrar"}},[a("q-card",{staticStyle:{padding:"1rem"}},[a("span",{staticClass:"text-h6"},[e._v("Eliminar Caso")]),a("span",[a("p",[e._v("\n          Al eliminar un caso, este no podrá ser recuperado en el futuro.\n          ¿Está seguro que desea eliminar este caso?\n        ")]),a("div",[a("strong",[e._v("Al eliminarse el caso se eliminarán también los siguientes elementos:")])]),e._l(e.infoBorrar,(function(t,o){return a("div",{key:o},[e._v(e._s(e.mapBorrado[o])+" : "+e._s(t))])}))],2),a("div",{staticStyle:{float:"right"}},[a("q-btn",{attrs:{color:"primary",label:"Eliminar"},on:{click:function(t){return e.bajaCaso()}}}),a("q-btn",{attrs:{flat:"",label:"Cancelar"},on:{click:function(t){e.mostrandoModalBorrar=!1}}})],1)])],1)],1)},i=[],n=(a("f751"),a("28a5"),a("2ef0")),s=a("dd31"),r=a("c391"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"edicion"},[a("q-input",{attrs:{label:"Caratula"},model:{value:e.casoRecibido.Caratula,callback:function(t){e.$set(e.casoRecibido,"Caratula",t)},expression:"casoRecibido.Caratula"}}),a("q-select",{attrs:{label:"Juzgado",options:e.opcionesJuzgados},on:{blur:function(t){return e.obtenerNominaciones()}},model:{value:e.Juzgado,callback:function(t){e.Juzgado=t},expression:"Juzgado"}}),a("q-select",{attrs:{label:"Nominación",options:e.opcionesNominaciones},model:{value:e.Nominacion,callback:function(t){e.Nominacion=t},expression:"Nominacion"}}),a("q-select",{attrs:{label:"Estado del Caso",options:e.opcionesEstadoCaso},model:{value:e.EstadoCaso,callback:function(t){e.EstadoCaso=t},expression:"EstadoCaso"}}),a("q-input",{attrs:{label:"Número de Expediente",type:"tel"},model:{value:e.casoRecibido.NroExpediente,callback:function(t){e.$set(e.casoRecibido,"NroExpediente",t)},expression:"casoRecibido.NroExpediente"}}),a("q-input",{attrs:{label:"Carpeta"},model:{value:e.casoRecibido.Carpeta,callback:function(t){e.$set(e.casoRecibido,"Carpeta",t)},expression:"casoRecibido.Carpeta"}}),a("q-input",{attrs:{label:"Observaciones"},model:{value:e.casoRecibido.Observaciones,callback:function(t){e.$set(e.casoRecibido,"Observaciones",t)},expression:"casoRecibido.Observaciones"}}),a("div",{staticStyle:{"padding-top":"30px","text-align":"right"}},[a("q-btn",{attrs:{color:"primary"},on:{click:function(t){return e.editarCaso()}}},[e._v("Guardar")]),a("q-btn",{attrs:{flat:""},on:{click:function(t){return e.$emit("cancelar-edicion")}}},[e._v("Cancelar")])],1)],1)},l=[],d=a("8daa"),u=a("b628"),m=a("2a19"),p={data:function(){return{EstadosCaso:[],Nominaciones:[],Juzgados:[],Juzgado:{label:this.casoRecibido.Juzgado,value:this.casoRecibido.IdJuzgado},Nominacion:{label:this.casoRecibido.Nominacion,value:this.casoRecibido.IdNominacion},EstadoCaso:{label:this.casoRecibido.EstadoCaso,value:this.casoRecibido.IdEstadoCaso}}},props:["casoRecibido"],computed:{opcionesEstadoCaso:function(){var e=[];return this.EstadosCaso&&this.EstadosCaso.length&&(e=this.EstadosCaso.map((function(e){return{label:e.EstadoCaso,value:e.IdEstadoCaso}}))),e},opcionesJuzgados:function(){var e=[];return this.Juzgados&&this.Juzgados.length&&(e=this.Juzgados.map((function(e){return{label:e.Juzgado,value:e.IdJuzgado}}))),e},opcionesNominaciones:function(){var e=[];return this.Nominaciones&&this.Nominaciones.length&&(e=this.Nominaciones.map((function(e){return{label:e.Nominacion,value:e.IdNominacion}}))),e}},created:function(){var e=this;d["a"].Get("/estudios/".concat(u["a"].UsuarioLogueado.IdEstudio,"/estados-caso"),{},(function(t){t.Error||(e.EstadosCaso=t)})),d["a"].Get("/juzgados?IncluyeBajas=N",{},(function(t){t.Error?m["a"].create(t.Error):e.Juzgados=t})),this.obtenerNominaciones()},methods:{editarCaso:function(){var e=this,t={IdNominacion:this.Nominacion.value,IdJuzgado:this.Juzgado.value,IdEstadoCaso:this.EstadoCaso.value,Caratula:this.casoRecibido.Caratula,NroExpediente:this.casoRecibido.NroExpediente,Carpeta:this.casoRecibido.Carpeta,Observaciones:this.casoRecibido.Observaciones,IdCompetencia:this.casoRecibido.IdCompetencia,IdEstadoAmbitoGestion:this.casoRecibido.IdEstadoAmbitoGestion,IdCaso:this.casoRecibido.IdCaso,IdOrigen:this.casoRecibido.IdOrigen,IdTipoCaso:this.casoRecibido.IdTipoCaso};this.casoRecibido.Juzgado=this.opcionesJuzgados.filter((function(t){return t.value===e.Juzgado.value}))[0].label,this.opcionesEstadoCaso.filter((function(t){return t.value===e.casoRecibido.IdEstadoCaso}))[0]&&(this.casoRecibido.EstadoCaso=this.opcionesEstadoCaso.filter((function(t){return t.value===e.EstadoCaso.value}))[0].label),this.Nominaciones&&this.Nominaciones.length?this.casoRecibido.Nominacion=this.opcionesNominaciones.filter((function(t){return t.value===e.Nominacion.value}))[0].label:t.IdNominacion="",d["a"].Put("/casos/".concat(this.casoRecibido.IdCaso),t,(function(t){t.Error?m["a"].create(t.Error):e.$emit("edicionTerminada")}))},obtenerNominaciones:function(){var e=this;this.Nominaciones=[],d["a"].Get("/nominaciones?IdsJuzgado=".concat(JSON.stringify([String(this.Juzgado.value)]),"&IncluyeBajas=N"),{},(function(t){t.Error?m["a"].create(t.Error):e.Nominaciones=t[[String(e.Juzgado.value)]]}))}}},h=p,v=(a("8eee"),a("2877")),f=Object(v["a"])(h,c,l,!1,null,null,null),b=f.exports,g=a("8a42"),C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-item",{staticStyle:{"background-color":"#E8EAF6"}},[a("q-item-section",{attrs:{color:"primary",icon:"person"}}),a("span",{staticClass:"q-subheading"},[e._v("Permisos del Caso")])],1),a("div",{staticStyle:{display:"flex"}},[a("q-field",[a("q-select",{attrs:{filled:"",label:"Agregar usuario",options:e.opciones,"use-input":"",clearable:"","input-debounce":"0"},on:{filter:e.search,input:e.selected},model:{value:e.usuario,callback:function(t){e.usuario=t},expression:"usuario"}})],1),a("q-btn",{attrs:{icon:"edit",size:"sm",color:"primary"}},[a("q-menu",[a("q-list",{staticStyle:{"min-width":"180px"},attrs:{separator:"",link:""}},[a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],nativeOn:{click:function(t){e.permiso="A"}}},[a("q-item-section",[e._v("Administrador")]),"A"===e.permiso?a("div",[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{icon:"check"}})],1)],1):e._e()],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],nativeOn:{click:function(t){e.permiso="E"}}},[a("q-item-section",[e._v("Edición")]),"E"===e.permiso?a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{icon:"check"}})],1):e._e()],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],nativeOn:{click:function(t){e.permiso="L"}}},[a("q-item-section",[e._v("Sólo Lectura")]),"L"===e.permiso?a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{icon:"check"}})],1):e._e()],1)],1)],1)],1)],1),a("q-list",{attrs:{highlight:""}},[a("q-item-label",{attrs:{header:""}},[e._v("Usuarios del Caso")]),e._l(e.UsuariosCaso,(function(t){return a("q-item",{key:t.IdUsuario},[a("q-item-label",[e._v("\n      "+e._s(t.Apellidos)+", "+e._s(t.Nombres)+"\n    ")]),a("q-item-section",{attrs:{right:""}},[a("q-btn",{staticStyle:{width:"30px",position:"absolute",right:"10px"},attrs:{icon:"edit",size:"sm",color:"primary"}},[a("q-menu",[a("q-list",[a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],nativeOn:{click:function(a){return e.setPermiso("A",t)}}},[a("q-item-section",[e._v("Administrador")]),"A"===t.Permiso?a("div",[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{icon:"check"}})],1)],1):e._e()],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],nativeOn:{click:function(a){return e.setPermiso("E",t)}}},[a("q-item-section",[e._v("Edición")]),"E"===t.Permiso?a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{icon:"check"}})],1):e._e()],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],nativeOn:{click:function(a){return e.setPermiso("L",t)}}},[a("q-item-section",[e._v("Sólo Lectura")]),"L"===t.Permiso?a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{icon:"check"}})],1):e._e()],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],nativeOn:{click:function(a){return e.eliminarUsuario(t)}}},[a("q-item-section",{attrs:{color:"red"}},[e._v("Eliminar")])],1)],1)],1)],1)],1)],1)}))],2)],1)},y=[],x=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("9523")),E=a.n(x);a("6762"),a("2fdb");function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(Object(a),!0).forEach((function(t){E()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var _={props:["caso","value","idcaso"],data:function(){return{UsuariosEstudio:[],UsuariosCaso:[],IdResponsable:0,IdEstudio:0,usuario:"",permiso:"L",opciones:[]}},created:function(){var e=this;"string"===typeof this.value?this.UsuariosCaso=JSON.parse(this.value):this.UsuariosCaso=this.value,this.IdResponsable=u["a"].UsuarioLogueado.IdUsuario,this.IdEstudio=u["a"].UsuarioLogueado.IdEstudio,d["a"].Get("/estudios/".concat(this.IdEstudio,"/usuarios"),{},(function(t){t.Error?e.$q.notify(t.Error):t.length&&(e.UsuariosEstudio=t)}))},computed:{usuariosEstudioSearch:function(){var e={};return this.UsuariosEstudio.forEach((function(t){e["".concat(t.Apellidos,", ").concat(t.Nombres," (").concat(t.Usuario,")")]=t})),e}},watch:{UsuariosCaso:function(e){e&&this.$emit("input",e)},UsuariosEstudio:function(){this.opciones=this.UsuariosEstudio.map((function(e){return"".concat(e.Apellidos,", ").concat(e.Nombres," (").concat(e.Usuario,")")}))}},methods:{search:function(e,t){var a=this;if(""!==e){var o=this.opciones.filter((function(t){return t.toLowerCase().includes(e.toLowerCase())}));t((function(){a.opciones=o}))}else t((function(){a.opciones=a.UsuariosEstudio.map((function(e){return"".concat(e.Apellidos,", ").concat(e.Nombres," (").concat(e.Usuario,")")}))}))},selected:function(e){if(this.usuariosEstudioSearch[e]){var t=this.usuariosEstudioSearch[e];t.Permiso=this.permiso,this.setPermiso(this.permiso,t)}},setPermiso:function(e,t){var a=this;d["a"].Post("/casos/usuarios",{Permiso:e,IdUsuario:t.IdUsuario,IdCaso:this.idcaso},(function(o){if(o.Error)a.$q.notify(o.Error);else{if(a.UsuariosCaso.filter((function(e){return String(e.IdUsuario)===String(t.IdUsuario)})).length)return void a.UsuariosCaso.filter((function(e){return String(e.IdUsuario)===String(t.IdUsuario)})).forEach((function(t){t.Permiso=e}));var i=q(q({},t),{},{IdUsuarioCaso:o.IdUsuario});a.UsuariosCaso.push(i),a.terms=""}}))},eliminarUsuario:function(e){var t=this;d["a"].Post("/casos/eliminar-usuario",{IdUsuario:e.IdUsuario,IdCaso:this.idcaso},(function(a){a.Error?t.$q.notify(a.Error):t.UsuariosCaso.splice(t.UsuariosCaso.indexOf(e),1)}))},verificarPermiso:function(e,t){if(this.UsuariosCaso[this.UsuariosCaso.indexOf(t)].Permiso===e)return!0}}},k=_,j=Object(v["a"])(k,C,y,!1,null,null,null),S=j.exports,I=a("3a5e"),P=a("3081"),A=a("5391"),F=a("bf6b"),T=a("24e8"),D=a("a026"),w={components:{AltaCasos:s["default"],AltaMovimientos:r["default"],TarjetaMovimiento:g["a"],TarjetaPermisos:S,StepPersona:P["a"],EditarCaso:b,Loading:I["a"],QDialog:T["a"],CompartirCaso:A["a"]},data:function(){return{enlaceVerCaso:"/Caso?id=".concat(this.caso.IdCaso),objetivosCaso:[],documento:"",newTel:"",ParamsTipoCaso:F["a"],personas:!1,objetivosModal:!1,altaObjetivosModal:!1,movimientosModal:!1,altaMovimientosModal:!1,verMovimientoModal:!1,editar:!1,editarObjetivo:!1,compartir:!1,movimientosCaso:[],MovimientoAMostrar:{},Juzgado:"",TipoCaso:"",editarPers:!1,personaEditar:{},personasCaso:[],cargandoMovimientos:!0,cargandoPersonas:!0,mostrandoModalArchivar:!1,mostrandoModalBorrar:!1,mostrandoModalEditar:!1,mostrandoModalEditarObjetivo:!1,mostrarUnMovimiento:!1,mostrandoModalBorrarObjetivo:!1,mostrandoModalPermisos:!1,infoBorrar:null,index:0,EstadosCaso:[],mapBorrado:{CantPersonas:"Cantidad de personas",CantMovimientos:"Cantidad de movimientos",CantUsuariosCaso:"Cantidad de usuarios del caso",CantMultimedia:"Cantidad de archivos multimedia"},nuevoObjetivo:{Objetivo:"",IdCaso:this.caso.IdCaso},objetivoEditar:{},objetivoBorrar:{},emailCompartir:""}},props:["caso","clases","perentorioHome"],created:function(){var e=this;this.perentorioHome?(this.movimientosCaso=this.caso.UltimosMovimientos?Object(n["reverse"])(Object(n["sortBy"])(JSON.parse(this.caso.UltimosMovimientos),"FechaAlta")):Object(n["reverse"])(Object(n["sortBy"])(this.caso.Movimientos,"FechaAlta")),this.cargandoMovimientos=!1):(d["a"].Get("/casos/".concat(this.caso.IdCaso,"/movimientos"),{},(function(t){t.Error?m["a"].create(t.Error):(e.movimientosCaso=t,e.cargandoMovimientos=!1)})),d["a"].Get("/casos/".concat(this.caso.IdCaso),{},(function(t){t.Error?m["a"].create(t.Error):e.caso.PersonasCaso=t.PersonasCaso})),d["a"].Get("/objetivos?IdsCaso=".concat(JSON.stringify([this.caso.IdCaso])),{},(function(t){t.Error||D["a"].set(e,"objetivosCaso",t[e.caso.IdCaso])})))},computed:{comparticionesEnviadas:function(){return this.caso.ComparticionesEnviadas?JSON.parse(this.caso.ComparticionesEnviadas):[]},comparticionesRecibidas:function(){return this.caso.ComparticionesRecibidas?JSON.parse(this.caso.ComparticionesRecibidas):[]}},methods:{guardarPersona:function(e){var t=this;this.newTel&&e.Telefono.push(this.newTel),e.Documento=this.documento,e.Telefonos=e.Telefono;var a=u["a"].UsuarioLogueado.IdEstudio,o=e.IdPersona;d["a"].Put("/estudios/".concat(a,"/modificar-persona/").concat(o),e,(function(e){e.Error?m["a"].create(e.Error):t.$emit("edicionTerminada")})),this.editarPers=!1},datosComparticion:function(e){var t="",a=e.Email,o=this.caso.UsuariosCaso;"string"===typeof o&&(o=JSON.parse(o)),o.forEach((function(o){String(o.IdUsuario)===String(e.IdUsuarioOrigen)&&(t=o.Apellidos+", "+o.Nombres),String(o.IdUsuario)===String(e.IdUsuarioDestino)&&(a=o.Apellidos+", "+o.Nombres)}));var i=e.FechaRecibido?new Date(e.FechaRecibido).toLocaleString():"Todavía no se aceptó";return{"Usuario Orígen":t,"Usuario Destino":a,"Fecha Enviado":new Date(e.FechaEnviado).toLocaleString(),"Fecha Aceptado":i}},isMobile:function(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},abrirMovimientosModal:function(){this.movimientosModal=!0},exitoAltaMovimiento:function(e){this.altaMovimientosModal=!1,this.$q.notify({color:"green",message:'El movimiento "'.concat(e.Detalle,'" se dio de alta correctamente')}),this.movimientosCaso.unshift(e)},parseDateTime:function(e){if(null!==e){var t=e.split(" "),a=t[0].split("-"),o=t[1].split(":");return"".concat(a[2],"/").concat(a[1],"/").concat(a[0]," ").concat(o[0],":").concat(o[1])}return null},parseDate:function(e){return null!==e?this.parseDateTime(e).split(" ")[0]:null},mostrarMovimiento:function(e){this.mostrarUnMovimiento=!0,this.MovimientoAMostrar=e},mostrarPersonas:function(){var e=this;this.personas=!0,this.personasCaso=[],d["a"].Get("/casos/".concat(this.caso.IdCaso,"/personas"),{},(function(t){t.Error||(e.cargandoPersonas=!1,e.personasCaso=t.slice(),e.personasCaso.forEach((function(e){e.Telefono&&"null"!==e.Telefono||(e.Telefono=[])})))}))},editarPersona:function(e){this.personaEditar=e,this.documento=e.Documento,this.editarPers=!0},diasRestantes:function(e){if(e.FechaRealizado)return"Realizado";if(!e.FechaEsperada)return"Sin fecha esperada";this.fecha2=new Date;var t=e.FechaEsperada.split("-")[0],a=e.FechaEsperada.split("-")[1]-1,o=e.FechaEsperada.split("-")[2].split(" ")[0]-1;this.fecha2.setMonth(a),this.fecha2.setFullYear(t),this.fecha2.setDate(o),this.hoy=new Date;var i=Math.ceil((this.fecha2.getTime()-this.hoy.getTime())/864e5)+1;return i>0?"Vence en "+i+(1===i?" día":" días"):i<0?"Vencido hace "+-1*i+(1===i?" día":" días"):"Vence hoy"},archivarCaso:function(){var e=this;d["a"].Put("/casos/".concat(this.caso.IdCaso,"/archivar"),{},(function(t){t.Error?(m["a"].create(t.Error),e.mostrandoModalArchivar=!1):(e.$emit("quitar",e.caso),e.mostrandoModalArchivar=!1)}))},bajaCaso:function(){var e=this;d["a"].Put("/casos/".concat(this.caso.IdCaso,"/baja"),{},(function(t){t.Error?m["a"].create(t.Error):e.$emit("quitar",e.caso)}))},mostrarBorrarCaso:function(){var e=this;d["a"].Get("/casos/".concat(this.caso.IdCaso,"/previsualizar-borrado"),{},(function(t){t.Error?m["a"].create(t.Error):(e.mostrandoModalBorrar=!0,e.infoBorrar=t)}))},mostrarObjetivos:function(){this.objetivosModal=!0},crearNuevoObjetivo:function(){var e=this;d["a"].Post("/objetivos",this.nuevoObjetivo,(function(t){t.Error?e.$q.notify(t.Error):e.perentorioHome?(e.objetivosCaso.push(Object.assign({},e.nuevoObjetivo)),e.nuevoObjetivo.Objetivo="",e.altaObjetivosModal=!1):(e.caso.Objetivos.push(Object.assign({},e.nuevoObjetivo)),e.nuevoObjetivo.Objetivo="",e.altaObjetivosModal=!1)}))},edicionObjetivo:function(e){this.objetivoEditar=e,this.editarObjetivo=!0},finalizarEdicionObjetivo:function(){var e=this,t={Objetivo:this.objetivoEditar.Objetivo};d["a"].Put("/objetivos/".concat(this.objetivoEditar.IdObjetivo),t,(function(t){t.Error?m["a"].create(t.Error):(e.editarObjetivo=!1,e.objetivoEditar={})}))},borrarObjetivo:function(e){this.mostrandoModalBorrarObjetivo=!0,this.objetivoBorrar=e},finalizarBorradoObjetivo:function(){var e=this;d["a"].Delete("/objetivos/",this.objetivoBorrar.IdObjetivo,(function(t){t.Error?m["a"].create(t.Error):(e.mostrandoModalBorrarObjetivo=!1,e.caso.Objetivos.splice(e.caso.Objetivos.indexOf(e.objetivoBorrar),1))}))},edicionTerminada:function(){this.editar=!1},borrarMovimiento:function(e){this.movimientosModal=!1,this.movimientosCaso.splice(this.movimientosCaso.indexOf(e),1)},validarEmail:function(){var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return!!e.test(String(this.emailCompartir).toLowerCase())},verificarMail:function(){this.validarEmail()?this.compartirCaso():this.$q.notify("Debe ingresar un email válido")},compartirCaso:function(){var e=this,t={Email:this.emailCompartir,IdCaso:this.caso.IdCaso};d["a"].Post("/casos/compartir",t,(function(t){t.Error?e.$q.notify(t.Error):(e.compartir=!1,e.$q.notify({color:"green",message:"Se compartió el caso '".concat(e.caso.Caratula,"' correctamente")}))}))}}},O=w,z=(a("37ad"),Object(v["a"])(O,o,i,!1,null,null,null));t["a"]=z.exports},"7bae":function(e,t,a){"use strict";var o=a("2181"),i=a.n(o);i.a},"7bc5":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-card",{staticStyle:{"min-width":"400px"}},[a("q-item",{staticStyle:{"background-color":"black"}},[a("span",{staticClass:"q-subheading",staticStyle:{color:"white"}},[e._v("Nuevo Movimiento")])]),a("div",{staticStyle:{padding:"0 1rem 1rem 1rem"}},[a("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"space-between","margin-top":"20px"}}),a("q-select",{staticStyle:{width:"100%"},attrs:{options:e.opcionesTipoMov,label:"Tipo de movimiento"},model:{value:e.nuevoMovimiento.TipoMov,callback:function(t){e.$set(e.nuevoMovimiento,"TipoMov",t)},expression:"nuevoMovimiento.TipoMov"}}),a("q-input",{attrs:{label:"Detalle del movimiento",type:"textarea",rows:3},on:{input:function(t){return e.habilitarMensaje()}},model:{value:e.nuevoMovimiento.Detalle,callback:function(t){e.$set(e.nuevoMovimiento,"Detalle",t)},expression:"nuevoMovimiento.Detalle"}}),a("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"end"}},[a("q-select",{staticStyle:{width:"47%"},attrs:{options:e.coloresDocDoc,label:"Estado de Gestión"},model:{value:e.nuevoMovimiento.colorSeleccionado,callback:function(t){e.$set(e.nuevoMovimiento,"colorSeleccionado",t)},expression:"nuevoMovimiento.colorSeleccionado"}}),a("q-select",{staticStyle:{width:"47%"},attrs:{options:e.opcionesResponsable,label:"Responsable del movimiento"},model:{value:e.nuevoMovimiento.Responsable,callback:function(t){e.$set(e.nuevoMovimiento,"Responsable",t)},expression:"nuevoMovimiento.Responsable"}})],1),a("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"end"}},[a("q-input",{ref:"inputFechaAlta",staticStyle:{width:"47%"},attrs:{label:"Fecha de estado de gestión",mask:"##-##-####",rules:[function(e){return/^-?[0-3]\d-[0-1]\d-[\d]+$/.test(e)||"Fecha invalida"}]},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy2",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY",label:"Fecha de estado de gestión"},on:{input:function(){return e.$refs.qDateProxy2.hide()}},model:{value:e.nuevoMovimiento.FechaAlta,callback:function(t){e.$set(e.nuevoMovimiento,"FechaAlta",t)},expression:"nuevoMovimiento.FechaAlta"}})],1)],1)]},proxy:!0}]),model:{value:e.nuevoMovimiento.FechaAlta,callback:function(t){e.$set(e.nuevoMovimiento,"FechaAlta",t)},expression:"nuevoMovimiento.FechaAlta"}}),a("q-input",{ref:"inputFechaEsperada",staticStyle:{width:"47%"},attrs:{label:"Fecha Esperada",mask:"##-##-####",rules:[function(e){return/^-?[0-3]\d-[0-1]\d-[\d]+$/.test(e)||"Fecha invalida"}]},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy1",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){return e.$refs.qDateProxy1.hide()}},model:{value:e.nuevoMovimiento.FechaEsperada,callback:function(t){e.$set(e.nuevoMovimiento,"FechaEsperada",t)},expression:"nuevoMovimiento.FechaEsperada"}})],1)],1)]},proxy:!0}]),model:{value:e.nuevoMovimiento.FechaEsperada,callback:function(t){e.$set(e.nuevoMovimiento,"FechaEsperada",t)},expression:"nuevoMovimiento.FechaEsperada"}})],1),a("div",{staticStyle:{display:"flex","align-items":"start"}},[a("q-uploader",{staticStyle:{width:"47%"},attrs:{label:"Multimedia","auto-upload":"",multiple:"",factory:e.factoryFn},on:{uploaded:e.uploadedFile,removed:e.removedFile}}),a("div",{staticClass:"column",staticStyle:{display:"flex","align-items":"start"}},[0!==e.IdCalendario?a("q-checkbox",{staticStyle:{"margin-left":"10px"},model:{value:e.CrearEvento,callback:function(t){e.CrearEvento=t},expression:"CrearEvento"}},[e._v("\n            Crear evento en calendario\n            "),a("br"),e._v("\n            (debera especificar la hora del evento)\n          ")]):e._e(),e.CrearEvento?a("q-input",{staticStyle:{"margin-left":"30px",width:"80%"},attrs:{label:"Hora del evento",mask:"##:##"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{ref:"qTimeProxy1",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{format24h:"",mask:"HH:mm"},on:{input:function(){return e.$refs.qTimeProxy1.hide()}},model:{value:e.EventTime,callback:function(t){e.EventTime=t},expression:"EventTime"}})],1)],1)]},proxy:!0}],null,!1,1374251516),model:{value:e.EventTime,callback:function(t){e.EventTime=t},expression:"EventTime"}}):e._e()],1)],1),a("q-checkbox",{staticStyle:{"margin-left":"10px",width:"100%"},attrs:{label:"Notificación de Tarea Pendiente"},model:{value:e.TareaPendiente,callback:function(t){e.TareaPendiente=t},expression:"TareaPendiente"}}),a("q-checkbox",{staticStyle:{"margin-left":"10px"},attrs:{label:"Enviar mensaje al cliente"},on:{input:function(t){return e.habilitarMensaje()}},model:{value:e.EnviarMensaje,callback:function(t){e.EnviarMensaje=t},expression:"EnviarMensaje"}}),e.EnviarMensaje?a("q-input",{attrs:{label:"Mensaje",autogrow:""},model:{value:e.mensaje,callback:function(t){e.mensaje=t},expression:"mensaje"}}):e._e(),a("div",{staticStyle:{"padding-top":"30px","text-align":"right"}},[a("q-btn",{attrs:{color:"primary"},on:{click:function(t){return e.guardarMovimiento()}}},[e._v("Guardar")]),a("q-btn",{attrs:{flat:""},on:{click:function(t){return e.$emit("cancelarAlta")}}},[e._v("Cancelar")])],1)],1)],1)},i=[],n=(a("7514"),a("6762"),a("2fdb"),a("28a5"),a("8daa")),s=a("b628"),r=a("2a19"),c={components:{Notify:r["a"]},data:function(){return{Multimedia:[],nuevoMovimiento:{IdUsuario:0,TiposMov:[],TipoMov:{label:"Sin identificar"},UsuariosEstudio:[],IdEstudio:0,Detalle:"",FechaEsperada:"",FechaAlta:"",colorSeleccionado:{label:"Gestión Estudio",value:"primary",IdColorCalendarApi:"9"},Caso:0,Objetivo:"",Responsable:{}},coloresDocDoc:[{label:"Perentorio",value:"negative",IdColorCalendarApi:"11"},{label:"Gestión Estudio",value:"primary",IdColorCalendarApi:"9"},{label:"Gestión Externa",value:"warning",IdColorCalendarApi:"5"},{label:"Finalizado",value:"positive",IdColorCalendarApi:"10"}],EnviarMensaje:!0,CrearEvento:!1,EventTime:"",IdCalendario:0,IdCalendarioAPI:"",mensaje:"",estudio:"",TareaPendiente:!1}},props:["movimientoAlta","Casos","caso","IdCaso"],created:function(){var e=this,t=6e4*(new Date).getTimezoneOffset();this.nuevoMovimiento.FechaAlta=this.formatearFecha(new Date(Date.now()-t).toISOString().slice(0,-1)).split(" ")[0].split("-").reverse().join("-"),this.nuevoMovimiento.Objetivo=this.movimientoAlta.Objetivo?this.movimientoAlta.Objetivo:"",this.nuevoMovimiento.IdEstudio=s["a"].UsuarioLogueado.IdEstudio,this.nuevoMovimiento.Responsable={label:"".concat(s["a"].UsuarioLogueado.Apellidos,", ").concat(s["a"].UsuarioLogueado.Nombres),value:s["a"].UsuarioLogueado.IdUsuario},n["a"].Get("/estudios/".concat(this.nuevoMovimiento.IdEstudio,"/usuarios"),{},(function(t){t.Error?e.$q.notify(t.Error):t.length&&(e.nuevoMovimiento.UsuariosEstudio=t)})),n["a"].Get("/estudios/".concat(this.nuevoMovimiento.IdEstudio,"/calendario"),{},(function(t){t.Error?e.$q.notify(t.Error):t&&(e.IdCalendario=t.IdCalendario,e.IdCalendarioAPI=t.IdCalendarioAPI)})),n["a"].Get("/estudios/".concat(this.nuevoMovimiento.IdEstudio,"/tipos-movimiento"),{},(function(t){t.Error?e.$q.notify(t.Error):t.length?e.nuevoMovimiento.TiposMov=t:e.$q.notify("No hay tipos de movimiento disponibles para este estudio")})),n["a"].Get("/estudios/".concat(this.nuevoMovimiento.IdEstudio),{},(function(t){t.Error?e.$q.notify(t.Error):e.estudio=t.Estudio})),n["a"].Get("/casos/".concat(this.IdCaso),{},(function(t){t.Error?e.$q.notify(t.Error):e.CasoCompleto=t}))},computed:{ObjetivosSinMovimientos:function(e){return e.concat(this.objetivosCreadosSinMovimientos)},opcionesTipoMov:function(){var e=[];return this.nuevoMovimiento.TiposMov&&this.nuevoMovimiento.TiposMov.length&&(e=this.nuevoMovimiento.TiposMov.map((function(e){return{label:e.TipoMovimiento,value:e.IdTipoMov}}))),e},opcionesResponsable:function(){var e=[];return this.nuevoMovimiento.UsuariosEstudio&&this.nuevoMovimiento.UsuariosEstudio.length&&(e=this.nuevoMovimiento.UsuariosEstudio.map((function(e){return{label:"".concat(e.Apellidos,", ").concat(e.Nombres),value:e.IdUsuario}}))),e}},methods:{factoryFn:function(){return{url:"https://io.docdoc.com.ar/api/multimedia",method:"POST",headers:[{name:"Authorization",value:"Bearer ".concat(s["a"].Token)}]}},uploadedFile:function(e){for(var t=e.files,a=e.xhr,o=JSON.parse(a.response),i=0;i<t.length;i++){var n=t[i].type;this.Multimedia.push({Url:o.Urls[0],Tipo:n.includes("application")?"O":n.substring(0,1).toUpperCase()})}},removedFile:function(e){for(var t=0;t<e.length;t++)for(var a=e[t],o=JSON.parse(a.xhr.response),i=0;i<this.Multimedia.length;i++)this.Multimedia[i].Url===o.Urls[0]&&this.Multimedia.splice(i,1)},formatearFecha:function(e){return e?e.split("T")[0]:null},guardarMovimiento:function(){var e=this;if(this.nuevoMovimiento.FechaEsperada){var t=new Date(this.nuevoMovimiento.FechaEsperada.split(" ")[0].split("-").reverse().join("-")),a=new Date(this.nuevoMovimiento.FechaAlta.split(" ")[0].split("-").reverse().join("-"));if(t<a&&t)return void this.$q.notify("No se puede ingresar una fecha esperada anterior a la fecha de alta.")}if(!this.CrearEvento||this.nuevoMovimiento.FechaEsperada&&this.EventTime)if(this.nuevoMovimiento.Detalle)if(this.nuevoMovimiento.TipoMov)if(""===this.nuevoMovimiento.colorSeleccionado)this.$q.notify("Debe seleccionar un estado de gestión");else{var o=this.IdCaso;this.nuevoMovimiento.IdCaso=o,this.nuevoMovimiento.NroExpediente=this.caso.NroExpediente;var i=this.nuevoMovimiento.FechaEsperada,s=this.nuevoMovimiento.FechaAlta;this.nuevoMovimiento.FechaEsperada&&4===this.nuevoMovimiento.FechaEsperada.split("-")[2].length&&(i="".concat(this.nuevoMovimiento.FechaEsperada.split("-")[2],"-").concat(this.nuevoMovimiento.FechaEsperada.split("-")[1],"-").concat(this.nuevoMovimiento.FechaEsperada.split("-")[0])),this.nuevoMovimiento.FechaAlta&&4===this.nuevoMovimiento.FechaAlta.split("-")[2].length&&(s="".concat(this.nuevoMovimiento.FechaAlta.split("-")[2],"-").concat(this.nuevoMovimiento.FechaAlta.split("-")[1],"-").concat(this.nuevoMovimiento.FechaAlta.split("-")[0]));var c={IdResponsable:this.nuevoMovimiento.Responsable.value,Detalle:this.nuevoMovimiento.Detalle,IdCaso:this.nuevoMovimiento.IdCaso,FechaEsperada:this.formatearFecha(i),FechaAlta:this.formatearFecha(s),FechaRealizado:null,IdTipoMov:this.nuevoMovimiento.TipoMov.value,Cuaderno:this.movimientoAlta.Cuaderno?this.movimientoAlta.Cuaderno:"",Color:this.nuevoMovimiento.colorSeleccionado.value,Multimedia:this.Multimedia,Escrito:this.TareaPendiente?"dWz6H78mpQ":""};n["a"].Post("/movimientos",c,(function(t){if(t.Error)e.$q.notify(t.Error);else{if(e.CrearEvento){var a=e.nuevoMovimiento.FechaEsperada.split(" ")[0].split("-").reverse().join("-"),o=e.EventTime,i="".concat(a,"T").concat(o),s="".concat(a,"T").concat(o,":00-03:00"),l={IdCalendario:e.IdCalendario,IdCalendarioAPI:e.IdCalendarioAPI,IdMovimientoCaso:t.IdMovimientoCaso,Titulo:"".concat(e.CasoCompleto.Caratula," - DocDoc!"),Descripcion:c.Detalle,Comienzo:s,Fin:s,IdColor:e.nuevoMovimiento.colorSeleccionado.IdColorCalendarApi,ComienzoDb:i,FinDb:i};n["a"].Post("/movimientos/eventos",l,(function(t){t.Error?e.$q.notify(t.Error):e.$q.notify({color:"green",message:"Se añadio un evento al calendario del estudio."})}))}if(e.$q.notify({color:"green",message:'El movimiento "'.concat(c.Detalle,'" se dio de alta correctamente')}),c.TipoMovimiento=e.nuevoMovimiento.TipoMov.label,c.Caso=e.movimientoAlta.Caso?e.movimientoAlta.Caso:null,c.CasoCompleto=e.caso,c.UsuarioResponsable=e.nuevoMovimiento.Responsable.label,e.$emit("guardarmovimiento",c),e.EnviarMensaje){var d={IdChat:e.CasoCompleto.IdChat?e.CasoCompleto.IdChat:null,Contenido:e.mensaje};if(e.CasoCompleto.IdChat)e.$emit("enviarmensaje",d);else{var u=e.CasoCompleto.PersonasCaso.find((function(e){return"S"===e.EsPrincipal})),m={IdCaso:e.CasoCompleto.IdCaso,IdPersona:u.IdPersona,Telefono:e.telefonoPrincipal(u.Telefonos)};m.Telefono?e.$emit("nuevochat",m,d):r["a"].create("Falló al comunicar el movimiento. Razon: no existe un telefono asociado")}}}}))}else this.$q.notify("Debe elegir un tipo de movimiento.");else this.$q.notify("Debe ingresar el detalle del movimiento.");else this.$q.notify("Debe ingresar fecha esperada y hora del evento.")},telefonoPrincipal:function(e){if(e){var t=(e||[]).filter((function(e){return"S"===e.EsPrincipal}));return t.length?t[0].Telefono:e.length?e[0].Telefono:""}return""},habilitarMensaje:function(){this.mensaje=this.CasoCompleto.Caratula+", desde "+this.estudio+" te contamos que estamos trabajando en tu caso. Gestion de hoy: "+this.nuevoMovimiento.Detalle}}},l=c,d=a("2877"),u=Object(d["a"])(l,o,i,!1,null,null,null);t["a"]=u.exports},"806b":function(e,t,a){},"8a42":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tarjeta"},[a("q-card",{staticStyle:{"background-color":"white"}},[e.tarjetaCaso?e._e():a("q-item",{class:"bg-"+this.movimiento.Color,style:"warning"===this.movimiento.Color?"display:flex; align-items:center;":"display:flex; align-items:center;color:white"},[a("q-item-section",{staticStyle:{"font-weigth":"900px"}},[a("b",[e._v(e._s(e.movimiento.Caratula))])]),a("q-item-section",{style:"warning"===this.movimiento.Color?"color:black; text-align:right;":"color:white; text-align:right;"},[e._v("\n        "+e._s(e.movimiento.UsuarioResponsable)+"\n      ")])],1),a("q-separator"),a("q-card-section",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",[e._v("\n      "+e._s(e.movimiento.Objetivo?e.movimiento.Objetivo:"Sin objetivo")+" | "),a("b",[e._v(e._s(e.movimiento.Detalle)+" ")]),a("q-item",{staticStyle:{padding:"0"}},[a("q-item-label",[a("q-item-label",{staticStyle:{display:"flex","justify-content":"flex-start","margin-bottom":"10px"},attrs:{caption:""}},[a("div",{staticStyle:{"margin-right":"0.5rem"}},[e._v(" Cargado hace "+e._s(e.calcularAntiguedad(e.movimiento.FechaAlta))+" días")]),e._v("\n            |\n            "),e.movimiento.FechaEdicion?[a("div",{staticStyle:{"margin-left":"0.5rem","margin-right":"0.5rem"}},[e._v(" Editado hace "+e._s(e.calcularAntiguedad(e.movimiento.FechaEdicion))+" días")]),e._v("\n              |\n            ")]:e._e(),e.movimiento.FechaRealizado?a("div",{staticStyle:{"margin-left":"0.5rem"}},[a("div",[e._v("Realizado el "+e._s(e.parseDate(e.movimiento.FechaRealizado)))])]):a("div",{staticStyle:{"margin-left":"0.5rem"}},[e.movimiento.FechaEsperada?a("div",[e._v(" A realizar hasta el "+e._s(e.FechaMostrar))]):a("div",[e._v("Sin fecha esperada")])])],2)],1)],1)],1),a("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"right","align-items":"center"}},[e.tarjetaCaso?a("div",{class:"bg-"+this.movimiento.Color,staticStyle:{"margin-right":"16px",padding:"5px","border-radius":"50%",color:"white"}},[e._v("\n        "+e._s(e.usuarioResponsable())+"\n        "),a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[10,0]}},[e._v("\n          Responsable: "+e._s(e.movimiento.UsuarioResponsable?e.movimiento.UsuarioResponsable:"Sin usuario responsable.")+"\n        ")])],1):e._e(),e.movimiento.FechaRealizado?e._e():a("q-avatar",{attrs:{size:"lg",color:this.movimiento.Color,"text-color":"white"}},[a("span",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(e.diasRestantes(e.movimiento.FechaEsperada,!0)))]),a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[10,0]}},[e._v("\n          "+e._s(e.diasRestantes(e.movimiento.FechaEsperada))+"\n        ")])],1),e.movimiento.Multimedia?a("q-btn",{attrs:{icon:"photo_camera",flat:"",rounded:"",outline:"",size:"lg",color:this.movimiento.Color},on:{click:function(t){e.mostrandoModalMultimedia=!0}}},[a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[10,0]}},[e._v("\n          Ver Multimedia\n        ")])],1):e._e(),a("q-btn",{attrs:{icon:"assignment",flat:"",rounded:"",outline:"",size:"lg",color:this.movimiento.Color}},[a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[10,0]}},[e._v("\n          Opciones\n        ")]),a("q-menu",[a("q-list",{staticStyle:{width:"15rem"},attrs:{separator:"",link:""}},[a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticStyle:{display:"flex","align-items":"center"},attrs:{clickable:""},nativeOn:{click:function(t){return e.abrirCaso(e.movimiento.IdCaso)}}},[a("q-icon",{attrs:{size:"xs",color:this.movimiento.Color,name:"assignment"}}),a("span",{staticStyle:{"margin-left":"1rem","text-align":"left"}},[e._v("Ir al Caso")])],1),e.movimiento.Objetivo?e._e():a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticStyle:{display:"flex","align-items":"center"},attrs:{clickable:""},nativeOn:{click:function(t){return e.cargarObjetivosAsociar()}}},[a("q-icon",{attrs:{size:"xs",color:this.movimiento.Color,name:"timeline"}}),a("span",{staticStyle:{"margin-left":"1rem","text-align":"left"}},[e._v("Asociar Objetivo")])],1),e.movimiento.Objetivo?a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticStyle:{display:"flex","align-items":"center"},attrs:{clickable:""},nativeOn:{click:function(t){e.mostrandoModalDesasociar=!0}}},[a("q-icon",{attrs:{size:"xs",color:this.movimiento.Color,name:"trending_down"}}),a("span",{staticStyle:{"margin-left":"1rem","text-align":"left"}},[e._v("Desasociar Objetivo")])],1):e._e(),e.movimiento.FechaRealizado?e._e():a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticStyle:{display:"flex","align-items":"center"},attrs:{clickable:""},nativeOn:{click:function(t){e.mostrandoModalRealizar=!0}}},[a("q-icon",{attrs:{size:"xs",color:this.movimiento.Color,name:"done"}}),a("span",{staticStyle:{"margin-left":"1rem","text-align":"left"}},[e._v("Marcar como Realizado")])],1),e.movimiento.FechaRealizado?a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticStyle:{display:"flex","align-items":"center"},attrs:{clickable:""},nativeOn:{click:function(t){e.mostrandoModalDesrealizar=!0}}},[a("q-icon",{attrs:{size:"xs",color:this.movimiento.Color,name:"cancel"}}),a("span",{staticStyle:{"margin-left":"1rem","text-align":"left"}},[e._v("Marcar como no Realizado")])],1):e._e(),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticStyle:{display:"flex","align-items":"center"},attrs:{clickable:""},nativeOn:{click:function(t){return e.editarMovimiento()}}},[a("q-icon",{attrs:{size:"xs",color:this.movimiento.Color,name:"edit"}}),a("span",{staticStyle:{"margin-left":"1rem","text-align":"left"}},[e._v("Editar")])],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticStyle:{display:"flex","align-items":"center"},attrs:{clickable:""},nativeOn:{click:function(t){e.mostrandoModalBorrar=!0}}},[a("q-icon",{attrs:{size:"xs",color:this.movimiento.Color,name:"delete"}}),a("span",{staticStyle:{"margin-left":"1rem","text-align":"left"}},[e._v("Eliminar")])],1)],1)],1)],1)],1)]),a("q-dialog",{model:{value:e.mostrandoModalMultimedia,callback:function(t){e.mostrandoModalMultimedia=t},expression:"mostrandoModalMultimedia"}},[a("q-card",{staticStyle:{"background-color":"white","-webkit-box-shadow":"none","box-shadow":"none"}},[a("q-list",{attrs:{highlight:""}},[a("q-item-label",{attrs:{header:""}},[e._v("Multimedia")]),e._l(e.multimedia,(function(t,o){return a("q-item",{key:t.URL,staticStyle:{display:"flex","flex-direction":"column","box-shadow":"none"},on:{click:function(a){return e.descargarMultimedia(t)}}},[a("q-item-label",{staticStyle:{padding:"10px"},attrs:{label:"Archivo "+(o+1),"label-lines":"1"}}),a("a",{attrs:{href:"https://io.docdoc.com.ar/api/multimedia?file="+t.URL+"&download=true",download:"archivo-"+(o+1)}},["A"===t.Tipo?a("audio",{attrs:{controls:""}},[a("source",{attrs:{src:"https://io.docdoc.com.ar/api/multimedia?file="+t.URL}})]):e._e(),"V"===t.Tipo?a("video",{attrs:{width:"320",height:"240",src:"https://io.docdoc.com.ar/api/multimedia?file="+t.URL,controls:""}}):"I"===t.Tipo?a("img",{staticClass:"img--multimedia",attrs:{src:"https://io.docdoc.com.ar/api/multimedia?file="+t.URL}}):a("span",[e._v("\n                  Formato desconocido, haga click para descargar\n                ")])])],1)}))],2),a("q-btn",{staticStyle:{float:"right"},attrs:{flat:"",label:"Cerrar"},on:{click:function(t){e.mostrandoModalMultimedia=!1}}})],1)],1),a("q-dialog",{attrs:{"no-backdrop-dismiss":"","no-esc-dismiss":""},model:{value:e.mostrandoModalEditar,callback:function(t){e.mostrandoModalEditar=t},expression:"mostrandoModalEditar"}},[a("q-card",{style:e.isMobile()?"background:white; width:100%":"background:white; width:50%"},[e.mostrandoModalEditar?a("EditarMovimiento",{attrs:{movimiento:this.movimiento},on:{cancelarEdicion:function(t){return e.cancelarEdicion()},edicionTerminada:function(t){return e.edicionTerminada()}}}):e._e()],1)],1)],1),a("q-dialog",{attrs:{"prevent-close":""},model:{value:e.mostrandoModalBorrar,callback:function(t){e.mostrandoModalBorrar=t},expression:"mostrandoModalBorrar"}},[a("q-card",{staticStyle:{padding:"1rem"}},[a("span",{staticClass:"text-h6"},[e._v("Eliminar Movimiento")]),a("span",[a("p",[e._v("\n          Al eliminar un movimiento, este no podrá ser recuperado en el futuro.\n          ¿Está seguro que desea eliminar este movimiento?\n        ")])]),a("div",{staticStyle:{float:"right"}},[a("q-btn",{attrs:{color:"primary",label:"Eliminar"},on:{click:function(t){return e.bajaMovimiento()}}}),a("q-btn",{attrs:{flat:"",label:"Cancelar"},on:{click:function(t){e.mostrandoModalBorrar=!1}}})],1)])],1),a("q-dialog",{attrs:{"prevent-close":""},model:{value:e.mostrandoModalRealizar,callback:function(t){e.mostrandoModalRealizar=t},expression:"mostrandoModalRealizar"}},[a("q-card",{staticStyle:{padding:"1rem"}},[a("span",{staticClass:"text-h6"},[e._v("Marcar como realizado")]),a("span",[a("p",[e._v("\n        ¿Desea marcar el movimiento como realizado?\n      ")])]),a("div",{staticStyle:{float:"right"}},[a("q-btn",{attrs:{color:"primary",label:"Aceptar"},on:{click:function(t){return e.realizarMovimiento()}}}),a("q-btn",{attrs:{flat:"",label:"Cancelar"},on:{click:function(t){e.mostrandoModalRealizar=!1}}})],1)])],1),a("q-dialog",{attrs:{"prevent-close":""},model:{value:e.mostrandoModalAsociar,callback:function(t){e.mostrandoModalAsociar=t},expression:"mostrandoModalAsociar"}},[a("q-card",{staticStyle:{padding:"1rem"}},[a("span",{staticClass:"text-h6"},[e._v("Asociar Objetivo")]),a("span",[a("p",[e.movimiento.ObjetivosCaso&&e.movimiento.ObjetivosCaso.length>0?a("q-select",{attrs:{label:"Seleccione un Objetivo",radio:"",options:e.opcionesObjetivos},model:{value:e.movimiento.IdObjetivo,callback:function(t){e.$set(e.movimiento,"IdObjetivo",t)},expression:"movimiento.IdObjetivo"}}):e._e(),e.movimiento.ObjetivosCaso&&0!==e.movimiento.ObjetivosCaso.length?e._e():a("span",[e._v("El caso no posee objetivos")])],1)]),a("div",{staticStyle:{float:"right"}},[a("q-btn",{attrs:{color:"primary",label:"Aceptar"},on:{click:function(t){return e.asociarObjetivo()}}}),a("q-btn",{attrs:{flat:"",label:"Cancelar"},on:{click:function(t){e.mostrandoModalAsociar=!1}}})],1)])],1),a("q-dialog",{attrs:{"prevent-close":""},model:{value:e.mostrandoModalDesasociar,callback:function(t){e.mostrandoModalDesasociar=t},expression:"mostrandoModalDesasociar"}},[a("q-card",{staticStyle:{padding:"1rem"}},[a("span",{staticClass:"text-h6"},[e._v("Desasociar Objetivo")]),a("span",[a("p",[e._v('\n        ¿Desea desasociar el movimiento del objetivo "'+e._s(e.movimiento.Objetivo)+'"?\n      ')])]),a("div",{staticStyle:{float:"right"}},[a("q-btn",{attrs:{color:"primary",label:"Aceptar"},on:{click:function(t){return e.desasociarObjetivo()}}}),a("q-btn",{attrs:{flat:"",label:"Cancelar"},on:{click:function(t){e.mostrandoModalDesasociar=!1}}})],1)])],1),a("q-dialog",{attrs:{"prevent-close":""},model:{value:e.mostrandoModalDesrealizar,callback:function(t){e.mostrandoModalDesrealizar=t},expression:"mostrandoModalDesrealizar"}},[a("q-card",{staticStyle:{padding:"1rem"}},[a("span",{staticClass:"text-h6"},[e._v("Marcar como no realizado")]),a("span",[a("p",[e._v("\n        ¿Desea marcar el movimiento como no realizado?\n      ")])]),a("div",{staticStyle:{float:"right"}},[a("q-btn",{attrs:{color:"primary",label:"Aceptar"},on:{click:function(t){return e.desrealizarMovimiento()}}}),a("q-btn",{attrs:{flat:"",label:"Cancelar"},on:{click:function(t){e.mostrandoModalDesrealizar=!1}}})],1)])],1)],1)},i=[],n=(a("28a5"),a("8daa")),s=a("c1df"),r=a.n(s),c=a("c3f4"),l=a("2a19"),d=a("24e8"),u={components:{QDialog:d["a"],EditarMovimiento:c["a"]},props:["movimiento","edicion","tarjetaCaso"],data:function(){return{mostrandoModalMultimedia:!1,mostrandoModalBorrar:!1,mostrandoModalRealizar:!1,mostrandoModalDesrealizar:!1,mostrandoModalEditar:!1,mostrandoModalCancelarEdicion:!1,mostrandoModalAsociar:!1,mostrandoModalDesasociar:!1,TiposMov:[],TipoMov:null,popover:!1,FechaRealizado:this.movimiento.FechaRealizado,FechaEsperada:this.movimiento.FechaEsperada,FechaMostrar:"",UsuariosEstudio:[],editado:!1,objetivoSeleccionado:0,Color:"",coloresDocDoc:[{label:"Rojo",value:"negative"},{label:"Azul",value:"primary"},{label:"Naranja",value:"warning"},{label:"Verde",value:"positive"}]}},computed:{opcionesObjetivos:function(){var e=[];return this.movimiento.ObjetivosCaso&&this.movimiento.ObjetivosCaso.length&&this.movimiento.ObjetivosCaso.forEach((function(t){t&&e.push({label:t.Objetivo,value:t.IdObjetivo})})),e},multimedia:function(){return"string"===typeof this.movimiento.Multimedia?JSON.parse(this.movimiento.Multimedia):this.movimiento.Multimedia}},created:function(){this.hoy=new Date;var e=this.hoy.getDate(),t=this.hoy.getMonth()+1,a=this.hoy.getFullYear();switch(e<10&&(e="0"+e),t<10&&(t="0"+t),this.hoy=t+"/"+e+"/"+a,this.FechaRealizado=e+"/"+t+"/"+a,this.FechaMostrar=this.parseDate(this.movimiento.FechaEsperada),this.movimiento.Color){case"primary":this.movimiento.InicialGestion="G",this.Color="primary";break;case"warning":this.movimiento.InicialGestion="Ex",this.Color="warning";break;case"positive":this.movimiento.InicialGestion="F",this.Color="positive";break;default:this.Color="negative",this.movimiento.InicialGestion="P"}},methods:{formatearFecha:function(e){return null!==e?e.split("T")[0]:null},parseDateTime:function(e){if(null!==e){var t=e.split(" "),a=t[0].split("-"),o=t[1].split(":");return"".concat(a[2],"/").concat(a[1],"/").concat(a[0]," ").concat(o[0],":").concat(o[1])}return null},parseDate:function(e){return e===this.hoy||this.editado?e:null!==e?this.parseDateTime(e).split(" ")[0]:null},isMobile:function(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},abrirCaso:function(e){var t=this.$router.resolve({path:"/Caso?id=".concat(e)});window.open(t.href,"_blank")},calcularAntiguedad:function(e){if(!e)return"-";var t=new Date,a=e.split("-")[0],o=e.split("-")[1]-1,i=e.split("-")[2].split(" ")[0]-1;t.setMonth(o),t.setFullYear(a),t.setDate(i);var n=new Date,s=Math.ceil((t.getTime()-n.getTime())/864e5)+1;return-1*s},editarMovimiento:function(){this.mostrandoModalEditar=!0},usuarioResponsable:function(){if(!this.movimiento.UsuarioResponsable)return"XX";for(var e=this.movimiento.UsuarioResponsable[0],t="",a=0;a<this.movimiento.UsuarioResponsable.length;a++)","===this.movimiento.UsuarioResponsable[a]&&(t=this.movimiento.UsuarioResponsable[a+2]);return"".concat(t).concat(e)},cargarObjetivosAsociar:function(){this.mostrandoModalAsociar=!0},cancelarEdicion:function(){this.mostrandoModalEditar=!1},asociarObjetivo:function(){var e=this;this.movimiento.ObjetivosCaso&&this.movimiento.ObjetivosCaso.length>0&&n["a"].Post("/movimientos/".concat(this.movimiento["IdMovimientoCaso"],"/asociar-objetivo/").concat(this.movimiento.IdObjetivo.value),{},(function(t){t.Error?l["a"].create(t.Error):(e.movimiento.IdObjetivo=e.movimiento.IdObjetivo,e.movimiento.Objetivo=e.opcionesObjetivos.filter((function(t){return t.value===e.movimiento.IdObjetivo.value}))[0].label),e.mostrandoModalAsociar=!1})),this.mostrandoModalAsociar=!1},desasociarObjetivo:function(){var e=this;n["a"].Put("/movimientos/".concat(this.movimiento["IdMovimientoCaso"],"/desasociar-objetivo/").concat(this.movimiento.IdObjetivo),{},(function(t){t.Error?l["a"].create(t.Error):(e.movimiento.IdObjetivo=null,e.movimiento.Objetivo=null),e.mostrandoModalDesasociar=!1}))},bajaMovimiento:function(){var e=this;this.movimiento.Multimedia?this.$q.notify("No se puede eliminar movimientos con multimedia"):n["a"].Delete("/movimientos/",this.movimiento.IdMovimientoCaso,(function(t){t.Error?l["a"].create(t.Error):e.$emit("borrar",e.movimiento)})),this.mostrandoModalBorrar=!1},realizarMovimiento:function(){var e=this;n["a"].Put("/movimientos/".concat(this.movimiento["IdMovimientoCaso"],"/realizar"),{},(function(t){t.Error?l["a"].create(t.Error):(e.editado=!0,e.movimiento.FechaRealizado=e.FechaRealizado,e.mostrandoModalRealizar=!1)}))},desrealizarMovimiento:function(){var e=this;n["a"].Put("/movimientos/".concat(this.movimiento["IdMovimientoCaso"],"/desrealizar"),{},(function(t){t.Error?l["a"].create(t.Error):(e.editado=!1,e.movimiento.FechaRealizado=null,e.mostrandoModalDesrealizar=!1)}))},edicionTerminada:function(){this.editado=!0,this.mostrandoModalEditar=!1,this.FechaMostrar=new Date(this.movimiento.FechaEsperada);var e=this.FechaMostrar.getDate()+1,t=this.FechaMostrar.getMonth()+1,a=this.FechaMostrar.getFullYear();e<10&&(e="0"+e),t<10&&(t="0"+t),this.FechaMostrar=e+"/"+t+"/"+a},diasRestantes:function(e,t){if(!e)return"-";e=e.split(" ")[0];var a=r()(e).diff(r()(),"days");return a>0?t?-1*(a+1):"Vence en "+a+(1===a?" día":" días"):a<0?t?-1*a:"Vencido hace "+-1*a+(1===a?" día":" días"):t?0:"Vence hoy"}}},m=u,p=(a("b6d7"),a("2877")),h=Object(p["a"])(m,o,i,!1,null,null,null);t["a"]=h.exports},"8eee":function(e,t,a){"use strict";var o=a("755a"),i=a.n(o);i.a},"95c1":function(e,t,a){"use strict";var o=a("02f0"),i=a.n(o);i.a},a103:function(e,t,a){"use strict";var o=a("e82e"),i=a.n(o);i.a},a6d8:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-select",{staticStyle:{"margin-top":"10px",width:"100%"},attrs:{filled:"",multiple:e.multiple,"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",label:e.label,options:e.opcionesSeleccion,hint:e.hint},on:{filter:e.filterFn},scopedSlots:e._u([e.tooltip?{key:"option",fn:function(t){return[a("q-item",e._g(e._b({},"q-item",t.itemProps,!1),t.itemEvents),[a("q-item-section",[a("q-item-label",{domProps:{innerHTML:e._s(t.opt.label)}}),a("q-tooltip",[e._v("\n          "+e._s(t.opt.tooltip)+"\n        ")])],1)],1)]}}:null,{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey"},[e._v("\n            No se encontraron elementos que coincidan con la busqueda\n        ")])],1)]},proxy:!0}],null,!0),model:{value:e.seleccionados,callback:function(t){e.seleccionados=t},expression:"seleccionados"}})},i=[],n={name:"Select",props:["multiple","opciones","label","hint","tooltip"],data:function(){return{seleccionados:this.multiple?[]:"",opcionesSeleccion:this.opciones}},watch:{seleccionados:function(){this.$emit("seleccion",this.seleccionados)}},methods:{filterFn:function(e,t,a){var o=this;e=this.accentFold(e),setTimeout((function(){t((function(){if(""===e)o.opcionesSeleccion=o.opciones;else{var t=e.toLowerCase();o.opcionesSeleccion=o.opciones.filter((function(e){return o.accentFold(e.label).toLowerCase().indexOf(t)>-1}))}}),(function(t){""!==e&&t.options.length>0&&(t.setOptionIndex(-1),t.moveOptionSelection(1,!0))}))}),300)},accentFold:function(e){var t={"á":"a","é":"e","è":"e","í":"i","ó":"o","ú":"u","Á":"a","É":"e","Í":"i","Ó":"o","Ú":"u"};if(!e)return"";for(var a="",o=0;o<e.length;o++)a+=t[e.charAt(o)]||e.charAt(o);return a}}},s=n,r=a("2877"),c=Object(r["a"])(s,o,i,!1,null,null,null);t["a"]=c.exports},ad55:function(e,t,a){"use strict";var o=a("0f0e"),i=a.n(o);i.a},addb:function(e,t,a){},aea6:function(e,t,a){},b357:function(e,t,a){},b6d7:function(e,t,a){"use strict";var o=a("addb"),i=a.n(o);i.a},bf6b:function(e,t,a){"use strict";t["a"]={"A.R.T.":{icon:"healing"},Consumidor:{icon:"monetization_on"},Familia:{icon:"people"},Sucesion:{icon:"accessibility_new"},"Tránsito":{icon:"directions_car"}}},c32c:function(e,t,a){"use strict";var o=a("aea6"),i=a.n(o);i.a},c391:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-card",{staticClass:"alta-movimiento",staticStyle:{display:"flex","flex-direction":"column"}},[e.altaDesdeTarjetaCaso?e._e():a("q-select",{staticStyle:{color:"black"},attrs:{"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",label:"Caso",options:e.options},on:{filter:e.filterFn},scopedSlots:e._u([{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey"},[e._v("\n          No se encontraron resultados\n        ")])],1)]},proxy:!0}],null,!1,4232592462),model:{value:e.casoSeleccionado,callback:function(t){e.casoSeleccionado=t},expression:"casoSeleccionado"}}),a("q-input",{attrs:{autogrow:"",label:"Detalle del movimiento"},model:{value:e.Detalle,callback:function(t){e.Detalle=t},expression:"Detalle"}}),a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("q-select",{staticStyle:{width:"47%"},attrs:{options:e.coloresDocDoc,label:"Estado de Gestión"},scopedSlots:e._u([{key:"option",fn:function(t){return[a("q-item",e._g(e._b({},"q-item",t.itemProps,!1),t.itemEvents),[a("q-item-section",[a("q-item-label",{domProps:{innerHTML:e._s(t.opt.label)}}),a("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.opt.description))])],1)],1)]}}]),model:{value:e.colorSeleccionado,callback:function(t){e.colorSeleccionado=t},expression:"colorSeleccionado"}}),a("q-input",{ref:"inputFechaEsperada",staticStyle:{width:"47%"},attrs:{label:"Fecha esperada",mask:"##-##-####",rules:[function(e){return/^-?[0-3]\d-[0-1]\d-[\d]+$/.test(e)||"Fecha invalida"}]},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy1",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){return e.$refs.qDateProxy1.hide()}},model:{value:e.FechaEsperada,callback:function(t){e.FechaEsperada=t},expression:"FechaEsperada"}})],1)],1)]},proxy:!0}]),model:{value:e.FechaEsperada,callback:function(t){e.FechaEsperada=t},expression:"FechaEsperada"}})],1),a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("q-input",{ref:"inputFechaAlta",staticStyle:{width:"47%"},attrs:{label:"Fecha de estado de gestión",mask:"##-##-####",rules:[function(e){return/^-?[0-3]\d-[0-1]\d-[\d]+$/.test(e)||"Fecha invalida"}]},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy2",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){return e.$refs.qDateProxy2.hide()}},model:{value:e.FechaAlta,callback:function(t){e.FechaAlta=t},expression:"FechaAlta"}})],1)],1)]},proxy:!0}]),model:{value:e.FechaAlta,callback:function(t){e.FechaAlta=t},expression:"FechaAlta"}}),a("q-select",{staticStyle:{width:"47%"},attrs:{options:e.opcionesResponsable,label:"Responsable del movimiento"},scopedSlots:e._u([{key:"option",fn:function(t){return[a("q-item",e._g(e._b({},"q-item",t.itemProps,!1),t.itemEvents),[a("q-item-section",[a("q-item-label",{domProps:{innerHTML:e._s(t.opt.label)}}),a("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.opt.description))])],1)],1)]}}]),model:{value:e.IdResponsable,callback:function(t){e.IdResponsable=t},expression:"IdResponsable"}})],1),a("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"flex-start"}},[a("q-select",{staticStyle:{width:"47%"},attrs:{options:e.opcionesTipoMov,label:"Tipo de movimiento"},scopedSlots:e._u([{key:"option",fn:function(t){return[a("q-item",e._g(e._b({},"q-item",t.itemProps,!1),t.itemEvents),[a("q-item-section",[a("q-item-label",{domProps:{innerHTML:e._s(t.opt.label)}}),a("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.opt.description))])],1)],1)]}}]),model:{value:e.TipoMov,callback:function(t){e.TipoMov=t},expression:"TipoMov"}}),a("q-uploader",{staticStyle:{width:"47%"},attrs:{label:"Multimedia","auto-upload":"",multiple:"",factory:e.factoryFn},on:{uploaded:e.uploadedFile,removed:e.removedFile}})],1),a("q-checkbox",{staticStyle:{"margin-left":"10px",width:"100%"},attrs:{label:"Notificación de Tarea Pendiente"},model:{value:e.TareaPendiente,callback:function(t){e.TareaPendiente=t},expression:"TareaPendiente"}}),a("q-checkbox",{staticStyle:{"margin-left":"10px"},attrs:{label:"Enviar mensaje al cliente (se enviara el detalle del movimiento)"},model:{value:e.EnviarMensaje,callback:function(t){e.EnviarMensaje=t},expression:"EnviarMensaje"}}),a("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-top":"35px"}},[a("q-btn",{attrs:{flat:"",color:"primary",label:"Guardar"},on:{click:e.guardarMovimiento}}),e.altaDesdeTarjetaCaso?a("q-btn",{attrs:{flat:"",label:"Cancelar"},on:{click:function(t){return e.$emit("cancelar")}}}):e._e()],1)],1)},i=[],n=(a("7514"),a("28a5"),a("8daa")),s=a("b628"),r=a("2a19"),c={props:["casoRecibido","altaDesdeTarjetaCaso","movimientoRecibido"],data:function(){return{IdCaso:this.$route.params.idCaso,Casos:[{Caso:"Apapa",Id:1},{Caso:"Aparto",Id:2}],casoSeleccionado:null,Detalle:"",Cuaderno:"",Usuarios:[],UsuariosEstudio:[],IdResponsable:null,FechaAlta:"",FechaEsperada:"",TipoMov:null,TiposMov:[],IdEstudio:0,colorSeleccionado:{label:"Gestión Estudio",value:"primary"},coloresDocDoc:[{label:"Perentorio",value:"negative"},{label:"Gestión Estudio",value:"primary"},{label:"Gestión Externa",value:"warning"},{label:"Finalizado",value:"positive"}],Multimedia:[],files:[],opcionesCasos:{},options:this.Casos,EnviarMensaje:!0,TareaPendiente:!1}},computed:{opcionesTipoMov:function(){var e=[];return this.TiposMov&&this.TiposMov.length&&(e=this.TiposMov.map((function(e){return{label:e.TipoMovimiento,value:e.IdTipoMov}}))),e},opcionesResponsable:function(){var e=[];return this.UsuariosEstudio&&this.UsuariosEstudio.length&&(e=this.UsuariosEstudio.map((function(e){return{label:"".concat(e.Apellidos,", ").concat(e.Nombres),value:e.IdUsuario}}))),e}},mounted:function(){var e=this,t=6e4*(new Date).getTimezoneOffset();if(this.FechaAlta=this.formatearFecha(new Date(Date.now()-t).toISOString().slice(0,-1)).split(" ")[0].split("-").reverse().join("-"),this.IdResponsable={label:"".concat(s["a"].UsuarioLogueado.Apellidos,", ").concat(s["a"].UsuarioLogueado.Nombres),value:s["a"].UsuarioLogueado.IdUsuario},this.IdEstudio=s["a"].UsuarioLogueado.IdEstudio,n["a"].Get("/estudios/".concat(this.IdEstudio,"/usuarios"),{},(function(t){t.Error?e.$q.notify(t.Error):t.length&&(e.UsuariosEstudio=t)})),n["a"].Get("/estudios/".concat(this.IdEstudio,"/tipos-movimiento"),{},(function(t){t.Error?e.$q.notify(t.Error):t.length?(e.TiposMov=t,e.TipoMov={label:t[0].TipoMovimiento,value:t[0].IdTipoMov}):e.$q.notify("No hay tipos de movimiento disponibles para este estudio")})),this.altaDesdeTarjetaCaso)this.casoSeleccionado={label:"",value:this.casoRecibido};else{var a={};"0"!==this.IdCaso&&(a.id=this.IdCaso),n["a"].Get("/casos",a,(function(t){t.Error?e.$q.notify(t.Error):("number"===typeof t.length?e.Casos=t:e.Casos=[t],e.Casos.forEach((function(t){var a={label:t.Caratula,value:t.IdCaso};e.opcionesCasos.push(a)})))}))}},methods:{formatearFecha:function(e){return""!==e?e.split("T")[0]:null},filterFn:function(e,t,a){var o=this;t((function(){var t=e.toLowerCase(),a=[];o.Casos.forEach((function(e){var t={label:e.Caratula,value:e.IdCaso};a.push(t)})),o.options=a.filter((function(e){return e.label.toLowerCase().indexOf(t)>-1}))}))},guardarMovimiento:function(){var e=this;if(this.FechaEsperada){var t=new Date(this.FechaEsperada.split(" ")[0].split("-").reverse().join("-")),a=new Date(this.FechaAlta.split(" ")[0].split("-").reverse().join("-"));if(t<a&&t)return void this.$q.notify("No se puede ingresar una fecha esperada anterior a la fecha de alta.")}this.Detalle||this.$q.notify("Debe ingresar el detalle del movimiento."),this.casoSeleccionado||this.$q.notify("Debe elegir un caso."),this.TipoMov||this.$q.notify("Debe elegir un tipo de movimiento."),this.colorSeleccionado||this.$q.notify("Debe seleccionar el estado de gestión del movimiento.");var o=this.FechaEsperada,i=this.FechaAlta;this.FechaEsperada&&4===this.FechaEsperada.split("-")[2].length&&(o="".concat(this.FechaEsperada.split("-")[2],"-").concat(this.FechaEsperada.split("-")[1],"-").concat(this.FechaEsperada.split("-")[0])),this.FechaAlta&&4===this.FechaAlta.split("-")[2].length&&(i="".concat(this.FechaAlta.split("-")[2],"-").concat(this.FechaAlta.split("-")[1],"-").concat(this.FechaAlta.split("-")[0]));var s={IdResponsable:this.IdResponsable.value,Detalle:this.Detalle,IdCaso:this.casoSeleccionado.value,FechaEsperada:this.formatearFecha(o),FechaAlta:this.formatearFecha(i),Escrito:this.TareaPendiente?"dWz6H78mpQ":null,IdTipoMov:this.TipoMov.value,Cuaderno:this.Cuaderno,Color:this.colorSeleccionado.value,Multimedia:this.Multimedia};if(this.hoy=(new Date).toISOString(),n["a"].Post("/movimientos",s,(function(t){t.Error?e.$q.notify(t.Error):e.altaDesdeTarjetaCaso?e.$emit("exito",s):e.$router.push({name:"Tribunales",params:{caso:e.casoSeleccionado.value}})})),this.EnviarMensaje){var c=this.casoSeleccionado.value,l="";n["a"].Get("/casos/".concat(c),{},(function(t){if(t.Error)e.$q.notify(t.Error);else{l=t;var a={IdChat:l.IdChat?l.IdChat:null,Contenido:"Se creó un nuevo movimiento. Detalle: ".concat(s.Detalle)};if(l.IdChat)e.enviarMensaje(a);else{var o=l.PersonasCaso.find((function(e){return"S"===e.EsPrincipal})),i={IdCaso:l.IdCaso,IdPersona:o.IdPersona,Telefono:e.telefonoPrincipal(o.Telefonos)};i.Telefono?e.nuevoChat(i,a):r["a"].create("Falló al comunicar el movimiento. Razon: no existe un telefono asociado")}}}))}},telefonoPrincipal:function(e){if(e){var t=(e||[]).filter((function(e){return"S"===e.EsPrincipal}));return t.length?t[0].Telefono:e.length?e[0].Telefono:""}return""},enviarMensaje:function(e){n["a"].Post("/mensajes/enviar",e,(function(t){if(t.Error)r["a"].create("Falló al comunicar el movimiento. Razon: "+t.Error);else{r["a"].create("Movimiento comunicado correctamente");var a=t.IdMensaje;n["a"].Post("/chats/".concat(e.IdChat,"/actualizar"),{IdUltimoLeido:a},(function(e){e.Error&&r["a"].create("Falló al actualizar el ultimo mensaje leído. Razon:"+e.Error)}))}}))},nuevoChat:function(e,t){n["a"].Post("/chats/crear",e,(function(e){e.Error?r["a"].create("Falló al comunicar el movimiento. Razon: "+e.Error):(r["a"].create("Nuevo chat creado!"),t.IdChat=e.IdChat,n["a"].Post("/mensajes/enviar",t,(function(e){if(e.Error)r["a"].create("Falló al comunicar el movimiento. Razon: "+e.Error);else{r["a"].create("Movimiento comunicado correctamente");var a=e.IdMensaje;n["a"].Post("/chats/".concat(t.IdChat,"/actualizar"),{IdUltimoLeido:a},(function(e){e.Error&&r["a"].create("Falló al actualizar el ultimo mensaje leído. Razon:"+e.Error)}))}})))}))},factoryFn:function(){return{url:"https://io.docdoc.com.ar/api/multimedia",method:"POST",headers:[{name:"Authorization",value:"Bearer ".concat(s["a"].Token)}]}},uploadedFile:function(e){for(var t=e.files,a=e.xhr,o=JSON.parse(a.response),i=0;i<t.length;i++)this.Multimedia.push({Url:o.Urls[0],Tipo:t[i].type.substring(0,1).toUpperCase()})},removedFile:function(e){for(var t=0;t<e.length;t++)for(var a=e[t],o=JSON.parse(a.xhr.response),i=0;i<this.Multimedia.length;i++)this.Multimedia[i].Url===o.Urls[0]&&this.Multimedia.splice(i,1)}}},l=c,d=(a("95c1"),a("2877")),u=Object(d["a"])(l,o,i,!1,null,null,null);t["default"]=u.exports},c3f4:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{margin:"1rem"}},[a("q-input",{attrs:{label:"Detalle del movimiento",type:"textarea",rows:6},on:{input:function(t){return e.habilitarMensaje()}},model:{value:e.movimiento.Detalle,callback:function(t){e.$set(e.movimiento,"Detalle",t)},expression:"movimiento.Detalle"}}),a("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"end"}},[a("q-select",{staticStyle:{width:"47%"},attrs:{label:"Estado de gestión",options:e.coloresDocDoc},scopedSlots:e._u([{key:"option",fn:function(t){return[a("q-item",e._g(e._b({},"q-item",t.itemProps,!1),t.itemEvents),[a("q-item-section",[a("q-item-label",{domProps:{innerHTML:e._s(t.opt.label)}}),a("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.opt.description))])],1)],1)]}}]),model:{value:e.Color,callback:function(t){e.Color=t},expression:"Color"}}),a("q-input",{ref:"inputFechaEsperada",staticStyle:{width:"47%"},attrs:{label:"Fecha Esperada",mask:"##-##-####",rules:[function(e){return/^-?[0-3]\d-[0-1]\d-[\d]+$/.test(e)||"Fecha invalida"}]},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy1",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){return e.$refs.qDateProxy1.hide()},change:function(t){return e.editarFechaEsperada()}},model:{value:e.movimiento.FechaEsperada,callback:function(t){e.$set(e.movimiento,"FechaEsperada",t)},expression:"movimiento.FechaEsperada"}})],1)],1)]},proxy:!0}]),model:{value:e.movimiento.FechaEsperada,callback:function(t){e.$set(e.movimiento,"FechaEsperada",t)},expression:"movimiento.FechaEsperada"}})],1),a("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"end"}},[a("q-input",{ref:"inputFechaAlta",staticStyle:{width:"47%"},attrs:{label:"Fecha de Estado de Gestión",mask:"##-##-####",rules:[function(e){return/^-?[0-3]\d-[0-1]\d-[\d]+$/.test(e)||"Fecha invalida"}]},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy2",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){return e.$refs.qDateProxy2.hide()},change:function(t){return e.editarFechaAlta()}},model:{value:e.movimiento.FechaAlta,callback:function(t){e.$set(e.movimiento,"FechaAlta",t)},expression:"movimiento.FechaAlta"}})],1)],1)]},proxy:!0}]),model:{value:e.movimiento.FechaAlta,callback:function(t){e.$set(e.movimiento,"FechaAlta",t)},expression:"movimiento.FechaAlta"}}),a("q-select",{staticStyle:{width:"47%"},attrs:{label:"Responsable del movimiento",options:e.opcionesResponsable},scopedSlots:e._u([{key:"option",fn:function(t){return[a("q-item",e._g(e._b({},"q-item",t.itemProps,!1),t.itemEvents),[a("q-item-section",[a("q-item-label",{domProps:{innerHTML:e._s(t.opt.label)}}),a("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.opt.description))])],1)],1)]}}]),model:{value:e.Responsable,callback:function(t){e.Responsable=t},expression:"Responsable"}})],1),a("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"end"}},[a("q-select",{staticStyle:{width:"47%"},attrs:{label:"Tipo de Movimiento",options:e.opcionesTipoMov},model:{value:e.TipoMovimiento,callback:function(t){e.TipoMovimiento=t},expression:"TipoMovimiento"}}),a("q-input",{staticStyle:{width:"47%"},attrs:{autogrow:"","max-height":50,label:"Cuaderno"},model:{value:e.movimiento.Cuaderno,callback:function(t){e.$set(e.movimiento,"Cuaderno",t)},expression:"movimiento.Cuaderno"}})],1),a("div",{staticClass:"row",staticStyle:{display:"flex","align-items":"start","margin-top":"20px"}},[0!==e.IdCalendario?a("q-checkbox",{style:e.CrearEvento?"width:47%":"",model:{value:e.CrearEvento,callback:function(t){e.CrearEvento=t},expression:"CrearEvento"}},[e._v("\n        Crear evento en calendario\n        "),a("br"),e._v("\n        (debera especificar la hora del evento)\n      ")]):e._e(),e.CrearEvento?a("q-input",{staticStyle:{"margin-left":"30px",width:"47%"},attrs:{label:"Hora del evento",mask:"##:##"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{ref:"qTimeProxy1",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{format24h:"",mask:"HH:mm"},on:{input:function(){return e.$refs.qTimeProxy1.hide()}},model:{value:e.EventTime,callback:function(t){e.EventTime=t},expression:"EventTime"}})],1)],1)]},proxy:!0}],null,!1,1374251516),model:{value:e.EventTime,callback:function(t){e.EventTime=t},expression:"EventTime"}}):e._e()],1),a("div",{staticClass:"column"},[a("q-checkbox",{attrs:{label:"Notificación de Tarea Pendiente"},model:{value:e.TareaPendiente,callback:function(t){e.TareaPendiente=t},expression:"TareaPendiente"}}),a("q-checkbox",{attrs:{label:"Enviar mensaje al cliente"},on:{input:function(t){return e.habilitarMensaje()}},model:{value:e.EnviarMensaje,callback:function(t){e.EnviarMensaje=t},expression:"EnviarMensaje"}}),e.EnviarMensaje?a("q-input",{attrs:{label:"Mensaje",type:"textarea",rows:4},model:{value:e.mensaje,callback:function(t){e.mensaje=t},expression:"mensaje"}}):e._e()],1),a("div",{staticStyle:{"padding-top":"30px","text-align":"right"}},[a("q-btn",{attrs:{color:"primary"},on:{click:function(t){return e.guardarMovimiento()}}},[e._v("Guardar")]),a("q-btn",{attrs:{flat:""},on:{click:function(t){return e.$emit("cancelarEdicion")}}},[e._v("Cancelar")])],1)],1)},i=[],n=(a("7514"),a("6762"),a("2fdb"),a("28a5"),a("8daa")),s=a("2a19"),r=a("b628"),c={data:function(){return{TiposMov:[],FechaRealizado:this.movimiento.FechaRealizado,FechaEsperada:(new Date).toISOString(),FechaAlta:(new Date).toISOString(),UsuariosEstudio:[],editado:!1,Color:{},Responsable:{},TipoMovimiento:{label:this.movimiento.TipoMovimiento,value:this.movimiento.IdTipoMov},coloresDocDoc:[{label:"Perentorio",value:"negative",IdColorCalendarApi:"11"},{label:"Gestión Estudio",value:"primary",IdColorCalendarApi:"9"},{label:"Gestión Externa",value:"warning",IdColorCalendarApi:"5"},{label:"Finalizado",value:"positive",IdColorCalendarApi:"10"}],CrearEvento:!1,EnviarMensaje:!0,EventTime:"",estudio:"",mensaje:"",IdCalendario:"",IdCalendarioAPI:"",CasoCompleto:{},TareaPendiente:"dWz6H78mpQ"===this.movimiento.Escrito}},props:["movimiento","tribunales"],mounted:function(){var e=this;this.movimiento.FechaAlta=this.movimiento.FechaAlta.split(" ")[0].split("-").reverse().join("-"),this.movimiento.FechaEsperada&&(this.movimiento.FechaEsperada=this.movimiento.FechaEsperada.split(" ")[0].split("-").reverse().join("-")),this.hoy=new Date;var t=this.hoy.getDate(),a=this.hoy.getMonth()+1,o=this.hoy.getFullYear();t<10&&(t="0"+t),a<10&&(a="0"+a),this.hoy=a+"/"+t+"/"+o,this.FechaRealizado=t+"/"+a+"/"+o,this.coloresDocDoc.forEach((function(t){e.movimiento.Color===t.value&&(e.Color={label:t.label,value:t.value,IdColorCalendarApi:t.IdColorCalendarApi})})),this.Responsable={label:this.movimiento.UsuarioResponsable,value:this.movimiento.IdUsuarioResponsable},this.TipoMovimiento={label:this.movimiento.TipoMovimiento,value:this.movimiento.IdTipoMov},this.IdEstudio=r["a"].UsuarioLogueado.IdEstudio,n["a"].Get("/estudios/".concat(this.IdEstudio,"/usuarios"),{},(function(t){t.Error?e.$q.notify(t.Error):t.length&&(e.UsuariosEstudio=t)})),n["a"].Get("/estudios/".concat(this.IdEstudio,"/calendario"),{},(function(t){t.Error?e.$q.notify(t.Error):t&&(e.IdCalendario=t.IdCalendario,e.IdCalendarioAPI=t.IdCalendarioAPI)})),n["a"].Get("/casos/".concat(this.movimiento.IdCaso),{},(function(t){t.Error?e.$q.notify(t.Error):e.CasoCompleto=t})),n["a"].Get("/estudios/".concat(this.IdEstudio),{},(function(t){t.Error?e.$q.notify(t.Error):e.estudio=t.Estudio})),n["a"].Get("/estudios/".concat(this.IdEstudio,"/tipos-movimiento"),{},(function(t){t.Error?e.$q.notify(t.Error):t.length?e.TiposMov=t:e.$q.notify("No hay tipos de movimiento disponibles para este estudio")})),this.habilitarMensaje()},destroyed:function(){this.movimiento.FechaAlta=this.movimiento.FechaAlta.split(" ")[0].split("-").reverse().join("-"),this.movimiento.FechaEsperada&&(this.movimiento.FechaEsperada=this.movimiento.FechaEsperada.split(" ")[0].split("-").reverse().join("-"))},computed:{opcionesTipoMov:function(){var e=[];return this.TiposMov&&this.TiposMov.length&&(e=this.TiposMov.map((function(e){return{label:e.TipoMovimiento,value:e.IdTipoMov}}))),e},opcionesResponsable:function(){var e=[];return this.UsuariosEstudio&&this.UsuariosEstudio.length&&(e=this.UsuariosEstudio.map((function(e){return{label:"".concat(e.Apellidos,", ").concat(e.Nombres),value:e.IdUsuario}}))),e}},methods:{formatearFecha:function(e){return e.split("T")[0]},parseDateTime:function(e){var t=e.split(" "),a=t[0].split("-"),o=t[1].split(":");return"".concat(a[2],"/").concat(a[1],"/").concat(a[0]," ").concat(o[0],":").concat(o[1])},parseDate:function(e){return e===this.hoy||this.editado?e:this.parseDateTime(e).split(" ")[0]},editarFechaEsperada:function(){if(this.movimiento.FechaRealizado)this.$q.notify({color:"red",timeout:800,message:"No se puede editar la fecha esperada de un movimiento ya realizado"});else{this.editado=!0;var e=new Date(this.movimiento.FechaEsperada),t=new Date(this.hoy);e<t?this.$q.notify({color:"red",timeout:800,message:"No puede ingresar una fecha esperada pasada"}):this.movimiento.FechaEsperada=this.formatearFecha(this.movimiento.FechaEsperada)}},editarFechaAlta:function(){this.movimiento.FechaRealizado?this.$q.notify({color:"red",timeout:800,message:"No se puede editar la fecha de gestión de un movimiento ya realizado"}):(this.editado=!0,this.movimiento.FechaAlta=this.formatearFecha(this.movimiento.FechaAlta))},habilitarMensaje:function(){this.mensaje=this.movimiento.Caratula+", desde "+this.estudio+" te contamos que estamos trabajando en tu caso. Gestion de hoy: "+this.movimiento.Detalle},guardarMovimiento:function(){var e=this;if(this.movimiento.FechaEsperada){var t=new Date(this.movimiento.FechaEsperada.split(" ")[0].split("-").reverse().join("-")),a=new Date(this.movimiento.FechaAlta.split("-").reverse().join("-"));if(t<a&&t)return void this.$q.notify("No se puede ingresar una fecha esperada anterior a la fecha de alta.")}var o=this.movimiento.FechaEsperada,i=this.movimiento.FechaAlta;if(this.movimiento.Detalle&&this.Responsable.value&&this.Color.value&&this.TipoMovimiento.value){this.movimiento.FechaEsperada&&4===this.movimiento.FechaEsperada.split("-")[2].length&&(o="".concat(this.movimiento.FechaEsperada.split("-")[2],"-").concat(this.movimiento.FechaEsperada.split("-")[1],"-").concat(this.movimiento.FechaEsperada.split("-")[0])),this.movimiento.FechaAlta&&4===this.movimiento.FechaAlta.split("-")[2].length&&(i="".concat(this.movimiento.FechaAlta.split("-")[2],"-").concat(this.movimiento.FechaAlta.split("-")[1],"-").concat(this.movimiento.FechaAlta.split("-")[0]));var r={FechaEsperada:o&&o.includes(" ")?o.split(" ")[0]:o,FechaRealizado:this.movimiento.FechaRealizado,FechaAlta:i&&i.includes(" ")?i.split(" ")[0]:i,Detalle:this.movimiento.Detalle,Cuaderno:this.movimiento.Cuaderno,IdTipoMov:this.TipoMovimiento.value,IdResponsable:this.Responsable.value,Color:this.Color.value,Escrito:this.TareaPendiente?"dWz6H78mpQ":null};this.editado=!0,n["a"].Put("/movimientos/".concat(this.movimiento["IdMovimientoCaso"]),r,(function(t){if(t.Error)s["a"].create(t.Error);else{if(e.CrearEvento){var a=r.FechaEsperada,o=e.EventTime,i="".concat(a,"T").concat(o),c="".concat(a,"T").concat(o,":00-03:00"),l={IdCalendario:e.IdCalendario,IdCalendarioAPI:e.IdCalendarioAPI,IdMovimientoCaso:e.movimiento.IdMovimientoCaso,Titulo:"".concat(e.movimiento.Caratula," - DocDoc!"),Descripcion:r.Detalle,Comienzo:c,Fin:c,IdColor:e.Color.IdColorCalendarApi,ComienzoDb:i,FinDb:i};if(n["a"].Post("/movimientos/eventos",l,(function(t){t.Error?e.$q.notify(t.Error):e.$q.notify({color:"green",message:"Se añadio un evento al calendario del estudio."})})),e.EnviarMensaje){var d={IdChat:e.CasoCompleto.IdChat?e.CasoCompleto.IdChat:null,Contenido:e.mensaje};if(e.CasoCompleto.IdChat)e.enviarMensaje(d);else{var u=e.CasoCompleto.PersonasCaso.find((function(e){return"S"===e.EsPrincipal})),m={IdCaso:e.CasoCompleto.IdCaso,IdPersona:u.IdPersona,Telefono:e.telefonoPrincipal(u.Telefonos)};m.Telefono?e.nuevoChat(m,d):s["a"].create("Falló al comunicar el movimiento. Razon: no existe un telefono asociado")}}}e.$emit("edicionTerminada")}}))}else this.movimiento.Detalle||this.$q.notify("Debe escribir el detalle del movimiento"),this.Responsable.value||this.$q.notify("Debe seleccionar un usuario responsable"),this.Color.value||this.$q.notify("Debe seleccionar el estado de gestión del movimiento"),this.TipoMovimiento.value||this.$q.notify("Debe seleccionar el tipo de movimiento")},telefonoPrincipal:function(e){if(e){var t=(e||[]).filter((function(e){return"S"===e.EsPrincipal}));return t.length?t[0].Telefono:e.length?e[0].Telefono:""}return""},enviarMensaje:function(e){n["a"].Post("/mensajes/enviar",e,(function(t){if(t.Error)s["a"].create("Falló al comunicar el movimiento. Razon: "+t.Error);else{s["a"].create("Movimiento comunicado correctamente");var a=t.IdMensaje;n["a"].Post("/chats/".concat(e.IdChat,"/actualizar"),{IdUltimoLeido:a},(function(e){e.Error&&s["a"].create("Falló al actualizar el ultimo mensaje leído. Razon:"+e.Error)}))}}))},nuevoChat:function(e,t){n["a"].Post("/chats/crear",e,(function(e){e.Error?s["a"].create("Falló al comunicar el movimiento. Razon: "+e.Error):(s["a"].create("Nuevo chat creado!"),t.IdChat=e.IdChat,n["a"].Post("/mensajes/enviar",t,(function(e){if(e.Error)s["a"].create("Falló al comunicar el movimiento. Razon: "+e.Error);else{s["a"].create("Movimiento comunicado correctamente");var a=e.IdMensaje;n["a"].Post("/chats/".concat(t.IdChat,"/actualizar"),{IdUltimoLeido:a},(function(e){e.Error&&s["a"].create("Falló al actualizar el ultimo mensaje leído. Razon:"+e.Error)}))}})))}))}}},l=c,d=(a("0a94"),a("2877")),u=Object(d["a"])(l,o,i,!1,null,null,null);t["a"]=u.exports},c8e7:function(e,t,a){"use strict";var o=a("497a"),i=a.n(o);i.a},c97f:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:[e.noGutters?"":"q-pa-sm","row main_container"]},[a("div",{staticClass:"col-12"},[a("span",{class:"text-weight-bolder text-body2 text-"+e.labelColor},[e._v(e._s(e.label))])]),a("div",{class:[e.textClass,"col-12"]},[e._v(e._s(e.text))])])},i=[],n={name:"DataItem",props:{text:{type:String,default:""},textClass:{type:String,default:""},label:{type:String,default:"dato"},labelColor:{type:String,default:"primary"},noGutters:{type:Boolean,default:!1}}},s=n,r=(a("3082"),a("2877")),c=Object(r["a"])(s,o,i,!1,null,"44a2dd31",null);t["a"]=c.exports},ccea:function(e,t,a){},d93c:function(e,t,a){"use strict";var o=a("806b"),i=a.n(o);i.a},dd31:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"flex"},[a("q-stepper",{ref:"stepper",staticStyle:{width:"100vw, justify-content: center",background:"none"},attrs:{vertical:"",contractable:"","no-header-navigation":"",animated:""},model:{value:e.stepActual,callback:function(t){e.stepActual=t},expression:"stepActual"}},[a("q-step",{staticStyle:{width:"100vw"},attrs:{default:"",name:"competencia",title:"Competencia",caption:"Seleccione la competencia del caso"}},[e.Competencias===[]?a("div",[a("Loading")],1):a("div",{staticStyle:{display:"flex","flex-flow":"row wrap","justify-content":"space-evenly"}},e._l(e.Competencias,(function(t,o){return a("q-btn",{key:t.IdCompetencia,staticStyle:{background:"#FF0000"},style:o+1<e.Competencias.length?"margin: 10px;":"",attrs:{rounded:"",icon:(e.ParamsJuzgados[t.Competencia]||{icon:""}).icon,color:e.decisiones.competencia===t.Competencia?"warning":"primary",size:"lg",label:t.Competencia},on:{click:function(a){e.seleccionar_competencia(t),e.$refs.stepper.next()}}})})),1),a("q-stepper-navigation",[a("q-btn",{staticStyle:{display:"none"},attrs:{label:"Siguiente",disabled:!e.decisiones.competencia,color:"primary"},on:{click:function(t){return e.$refs.stepper.next()}}})],1)],1),a("q-step",{attrs:{name:"tipo_caso","active-icon":"",title:"Tipo de Caso",caption:"Seleccione el Tipo de Caso"}},[0===e.TiposCaso.length?a("div",[a("Loading")],1):a("div",{staticStyle:{display:"flex","flex-flow":"row wrap","justify-content":"space-evenly","margin-bottom":"100px"}},e._l(e.TiposCaso,(function(t){return a("q-btn",{key:t.IdTipoCaso,staticStyle:{margin:"10px"},attrs:{rounded:"",icon:e.ParamsTipoCaso[t.TipoCaso]?e.ParamsTipoCaso[t.TipoCaso].icon:"",color:e.tipoCaso===t.TipoCaso?"warning":"primary",size:"lg",label:t.TipoCaso},on:{click:function(a){e.seleccionar_subcompetencia(t),e.$refs.stepper.next(),e.step=3}}})})),1),a("q-stepper-navigation",[a("q-btn",{staticStyle:{"margin-right":"10px"},attrs:{label:"Atrás",icon:"arrow_back_ios",color:"warning"},on:{click:function(t){return e.$refs.stepper.previous()}}})],1)],1),a("q-step",{attrs:{name:"modogestion","active-icon":"",title:"Modo de Gestión",caption:"Seleccione el modo de gestión del caso"}},[a("div",{staticStyle:{display:"flex","flex-flow":"row wrap","justify-content":"space-evenly","margin-bottom":"50px"}},[a("q-btn",{staticStyle:{margin:"10px",width:"300px"},attrs:{rounded:"",color:"primary",icon:"mdi-gavel",size:"lg",label:"Judicial"},on:{click:function(t){e.seleccionarModoGestion("J"),e.$refs.stepper.next(),e.step=4}}}),a("q-btn",{staticStyle:{margin:"10px",width:"300px"},attrs:{rounded:"",color:"primary",icon:"fas fa-user-tie",size:"lg",label:"Extrajudicial"},on:{click:function(t){e.seleccionarModoGestion("E"),e.$refs.stepper.next(),e.step=4}}})],1),a("div",[a("q-stepper-navigation",[a("q-btn",{staticStyle:{"margin-right":"10px"},attrs:{label:"Atrás",icon:"arrow_back_ios",color:"warning"},on:{click:function(t){return e.$refs.stepper.previous()}}})],1)],1)]),a("q-step",{attrs:{name:"ambitogestion","active-icon":"",title:"Ámbito de Gestión",caption:"Seleccione el ámbito de gestión del caso"}},[0===e.juzgados.length?a("div",[a("Loading")],1):a("div",{staticStyle:{display:"flex","flex-flow":"row wrap","justify-content":"space-evenly","margin-bottom":"100px"}},e._l(e.juzgados,(function(t){return a("q-btn",{key:t.IdJuzgado,staticStyle:{margin:"10px"},attrs:{rounded:"",color:"primary",size:"lg",label:t.Juzgado},on:{click:function(a){e.seleccionarJuzgados(t),e.$refs.stepper.next(),e.step=5}}})})),1),a("div",[a("q-stepper-navigation",[a("q-btn",{staticStyle:{"margin-right":"10px"},attrs:{label:"Atrás",icon:"arrow_back_ios",color:"warning"},on:{click:function(t){return e.$refs.stepper.previous()}}})],1)],1)]),a("q-step",{attrs:{name:"estadoambitogestion","active-icon":"",title:"Estado de Ámbito de Gestión",caption:"Seleccione el estado de ámbito de gestión del caso"}},[e.estados?"Sin estados"===e.estados?a("div",[e._v("\n        No hay estados cargados en el sistema\n        "),a("q-btn",{staticStyle:{margin:"10px"},attrs:{color:"primary",size:"lg",label:"Continuar"},on:{click:function(t){e.guardarEstado(""),e.$refs.stepper.next(),e.step=6}}})],1):a("div",{staticStyle:{display:"flex","flex-flow":"row wrap","justify-content":"space-evenly","margin-bottom":"100px"}},e._l(e.estados,(function(t){return a("q-btn",{key:t.IdEstadoAmbitoGestion,staticStyle:{margin:"10px"},attrs:{rounded:"",color:"primary",size:"lg",label:t.EstadoAmbitoGestion},on:{click:function(a){e.guardarEstado(t),e.$refs.stepper.next(),e.step=6}}})})),1):a("div",[a("Loading")],1),a("div",[a("q-stepper-navigation",[a("q-btn",{staticStyle:{"margin-right":"10px"},attrs:{label:"Atrás",icon:"arrow_back_ios",color:"warning"},on:{click:function(t){return e.$refs.stepper.previous()}}})],1)],1)]),a("q-step",{attrs:{name:"origen","active-icon":"",title:"Origen",caption:"Indique el origen del caso"}},[a("div",[a("q-select",{attrs:{options:e.origenes,label:"Origenes"},model:{value:e.origenesModel,callback:function(t){e.origenesModel=t},expression:"origenesModel"}})],1),a("q-stepper-navigation",[a("q-btn",{staticStyle:{"margin-right":"10px"},attrs:{label:"Atrás",icon:"arrow_back_ios",color:"warning"},on:{click:function(t){return e.$refs.stepper.previous()}}}),a("q-btn",{attrs:{label:"Siguiente",color:"primary"},on:{click:function(t){e.guardarOrigen(),e.$refs.stepper.next(),e.step=7}}})],1)],1),a("q-step",{attrs:{name:"involucrados","active-icon":"person",title:"Involucrados",caption:"Ingrese datos de las personas relacionadas al caso"}},[a("div",{staticStyle:{display:"flex","flex-flow":"row wrap","justify-content":"space-evenly","margin-bottom":"50px"}},[a("div",[a("q-btn",{staticStyle:{margin:"10px"},attrs:{rounded:"",color:"primary",icon:"person_add",size:"md",label:"Actores ("+e.decisiones.actores.length+")"},on:{click:function(t){e.form_actores=!0,e.rolPrimario="actor",e.$refs.stepper.next()}}}),e._l(this.decisiones.actores,(function(t){return a("div",{key:t.Documento},[a("q-expansion-item",{attrs:{icon:"perm_identity",label:"N"===t.EsJuridica?t.Nombres+" "+(t.Apellidos||""):t.Nombres}},["S"===t.EsJuridica?a("div",e._l(e.FormActores.Juridica,(function(o){return a("div",{key:o},[a("span",{staticClass:"propiedad_nombre"},[e._v(e._s(o)+":")]),a("span",{staticClass:"propiedad_valor"},[e._v(e._s(t[o]||"-"))])])})),0):e._e(),"N"===t.EsJuridica?a("div",e._l(e.FormActores.NoJuridica,(function(o){return a("div",{key:o},[a("span",{staticClass:"propiedad_nombre"},[e._v(e._s(o)+":")]),a("span",{staticClass:"propiedad_valor"},[e._v(e._s(t[o]||"-"))])])})),0):e._e(),a("q-expansion-item",{attrs:{label:"Más Datos Personales"}},e._l(e.FormActores.MasDatos,(function(o){return a("div",{key:o},[a("span",{staticClass:"propiedad_nombre"},[e._v(e._s(o)+":")]),a("span",{staticClass:"propiedad_valor"},[e._v(e._s(t[o]||"-"))])])})),0),e._l(t.Categorias,(function(t,o){return a("div",{key:o.Parametros},[a("q-expansion-item",{staticStyle:{"margin-top":"2vw"},attrs:{label:o}},e._l(t,(function(t){return a("div",{key:t},[a("span",{staticClass:"propiedad_nombre"},[e._v(e._s(t.Descripcion)+":")]),a("span",{staticClass:"propiedad_valor"},[e._v(e._s(t.Valor||"-"))])])})),0)],1)})),a("q-btn",{staticStyle:{"margin-top":"2vw","margin-bottom":"2vw"},attrs:{color:"primary",rounded:"",size:"sm",icon:"edit",label:"Editar"},on:{click:function(a){e.editarPersona(e.decisiones.actores.indexOf(t),t,"a"),e.$refs.stepper.goTo("datos_persona")}}}),a("q-btn",{staticStyle:{"margin-top":"2vw","margin-bottom":"2vw"},attrs:{color:"warning",rounded:"",size:"sm",icon:"delete",label:"Eliminar"},on:{click:function(a){e.borrarPersona(e.decisiones.actores.indexOf(t),"a")}}})],2)],1)}))],2),a("div",[a("q-btn",{staticStyle:{margin:"10px"},attrs:{rounded:"",color:"primary",icon:"person_add",size:"md",label:"Demandados ("+e.decisiones.demandados.length+")"},on:{click:function(t){e.form_actores=!0,e.rolPrimario="demandado",e.$refs.stepper.next()}}}),e._l(this.decisiones.demandados,(function(t){return a("div",{key:t.Documento},[a("q-expansion-item",{attrs:{icon:"perm_identity",label:"N"===t.EsJuridica?t.Nombres+" "+(t.Apellidos||""):t.Nombres}},["S"===t.EsJuridica?a("div",e._l(e.FormActores.Juridica,(function(o){return a("div",{key:o},[a("span",{staticClass:"propiedad_nombre"},[e._v(e._s(o)+":")]),a("span",{staticClass:"propiedad_valor"},[e._v(e._s(t[o]||"-"))])])})),0):e._e(),"N"===t.EsJuridica?a("div",e._l(e.FormActores.NoJuridica,(function(o){return a("div",{key:o},[a("span",{staticClass:"propiedad_nombre"},[e._v(e._s(o)+":")]),a("span",{staticClass:"propiedad_valor"},[e._v(e._s(t[o]||"-"))])])})),0):e._e(),a("q-expansion-item",{attrs:{label:"Más Datos Personales"}},e._l(e.FormActores.MasDatos,(function(o){return a("div",{key:o},[a("span",{staticClass:"propiedad_nombre"},[e._v(e._s(o)+":")]),a("span",{staticClass:"propiedad_valor"},[e._v(e._s(t[o]||"-"))])])})),0),e._l(t.Categorias,(function(t,o){return a("div",{key:o.Parametros},[a("q-expansion-item",{staticStyle:{"margin-top":"2vw"},attrs:{label:o}},e._l(t,(function(t){return a("div",{key:t},[a("span",{staticClass:"propiedad_nombre"},[e._v(e._s(t.Descripcion)+":")]),a("span",{staticClass:"propiedad_valor"},[e._v(e._s(t.Valor||"-"))])])})),0)],1)})),a("q-btn",{staticStyle:{"margin-top":"2vw","margin-bottom":"2vw"},attrs:{color:"primary",rounded:"",size:"sm",icon:"edit",label:"Editar"},on:{click:function(a){e.editarPersona(e.decisiones.demandados.indexOf(t),t,"d"),e.$refs.stepper.goTo("datos_persona")}}}),a("q-btn",{staticStyle:{"margin-top":"2vw","margin-bottom":"2vw"},attrs:{color:"warning",rounded:"",size:"sm",icon:"delete",label:"Eliminar"},on:{click:function(a){e.borrarPersona(e.decisiones.actores.indexOf(t),"d")}}})],2)],1)}))],2)]),a("q-stepper-navigation",[a("q-btn",{staticStyle:{"margin-right":"10px"},attrs:{label:"Atrás",icon:"arrow_back_ios",color:"warning"},on:{click:function(t){return e.$refs.stepper.previous()}}}),a("q-btn",{attrs:{label:"Siguiente",disabled:e.siguiente_deshabilitado||0===e.decisiones.actores.length,color:"primary","icon-right":"arrow_forward_ios"},on:{click:function(t){return e.$refs.stepper.goTo("resumen")}}})],1)],1),a("q-step",{attrs:{name:"datos_persona","active-icon":"",title:"Formulario de ingreso de personas",caption:"Ingrese los datos de la persona"}},[!0===e.form_actores?a("StepPersona",{attrs:{personaeditar:e.persona,editarPersona:e.editar,idTipoCaso:e.tipoCaso.IdTipoCaso,rol:e.rolPrimario},on:{"agregar-persona":function(t){e.set_persona(t),e.$refs.stepper.previous()},volver:function(t){return e.$refs.stepper.previous()}}}):e._e()],1),a("q-step",{staticStyle:{"margin-bottom":"2.5em"},attrs:{name:"resumen","active-icon":"",title:"Nominación",caption:"Seleccione la nominación a la que pertenecerá el caso (Esto es opcional)"}},[a("div",{staticStyle:{display:"flex","flex-flow":"row wrap","justify-content":"space-evenly","margin-top":"2rem"}},e._l(e.Nominaciones,(function(t){return a("q-btn",{key:t.IdNominacion,staticStyle:{background:"#FF0000","margin-bottom":"2rem"},attrs:{rounded:"",color:e.decisiones.idnominacion===t.IdNominacion?"warning":"primary",size:"lg",label:t.Nominacion},on:{click:function(a){return e.seleccionar_nominacion(t.IdNominacion)}}})})),1),a("q-stepper-navigation",[a("q-btn",{staticStyle:{"margin-right":"10px"},attrs:{label:"Atrás",color:"warning",icon:"arrow_back_ios"},on:{click:function(t){return e.$refs.stepper.goTo("involucrados")}}}),a("q-btn",{attrs:{label:"Guardar",disabled:e.siguiente_deshabilitado,color:"primary","icon-right":"save"},on:{click:function(t){return e.enviar_datos(!0)}}})],1)],1)],1)],1)},i=[],n=a("278c"),s=a.n(n),r=(a("ffc1"),a("6b54"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("bf6b")),c={"Civil y Comercial":{icon:"healing"},Documentos:{icon:"file_copy"},"Documentos y Locaciones":{icon:"file_copy"},Familia:{icon:"people"},"Familia y Sucesiones":{icon:"people"},Laboral:{icon:"work"},Penal:{icon:"gavel"},"Tránsito":{icon:"directions_car"},"D.C.I.":{icon:"remove_shopping_cart"},Administrativo:{icon:"account_balance"}},l=a("8daa"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[0===e.tipoCasos.length?a("div",[a("Loading")],1):a("div",{staticStyle:{display:"flex","flex-flow":"row wrap","justify-content":"space-evenly","margin-bottom":"100px"}},e._l(e.tipoCasos,(function(t){return a("q-btn",{key:t.IdTipoCaso,staticStyle:{margin:"10px"},attrs:{rounded:"",icon:e.ParamsTipoCaso[t.TipoCaso]?e.ParamsTipoCaso[t.TipoCaso].icon:"",color:e.tipoCaso===t.TipoCaso?"warning":"primary",size:"lg",label:t.TipoCaso},on:{click:function(a){e.seleccionar(t.TipoCaso),e.$emit("set-tipoCaso",t)}}})})),1)])},u=[],m=a("3a5e"),p={components:{Loading:m["a"]},name:"TiposCaso",data:function(){return{tipoCasos:[],ParamsTipoCaso:r["a"]}},created:function(){var e=this;l["a"].Get("/tipos-caso",{},(function(t){t.Error||t.forEach((function(t){e.tipoCasos.push(t)}))}))},props:["tipoCaso"],methods:{seleccionar:function(e){this.tipoCaso=e},deberia_estar_deshabilitado:function(){this.siguiente_deshabilitado=""===this.tipoCaso}}},h=p,v=a("2877"),f=Object(v["a"])(h,d,u,!1,null,null,null),b=f.exports,g=a("3081"),C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"90%","max-width":"90vw"}},[a("div"),a("div",{staticStyle:{padding:"15px"}},[a("div",{staticClass:"docdoc-title"},[e._v("\r\n        Relato de lo ocurrido\r\n      ")]),a("q-editor",{attrs:{"toolbar-text-color":"white","toolbar-toggle-color":"accent","toolbar-flat":"","toolbar-bg":"primary",toolbar:[["bold","italic","strike","underline"],["token","hr","link","custom_btn"],["print","fullscreen"],[{label:"Formato",icon:e.$q.icon.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6"]},{label:"Tamaño",icon:e.$q.icon.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},"removeFormat"],["quote","unordered","ordered"],[{label:"Alinear texto",icon:e.$q.icon.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]}],["undo","redo"]],definitions:{bold:{cmd:"bold",tip:"Negrita"},italic:{cmd:"italic",tip:"Cursiva"},strike:{cmd:"strike",tip:"Tachado"},underline:{cmd:"underline",tip:"Subrayado"},hr:{cmd:"hr",tip:"Insertar Línea Horizontal"},quote:{tip:"Cita"},unordered:{tip:"Lista sin orden"},ordered:{tip:"Lista ordenada"},undo:{tip:"Deshacer"},redo:{tip:"Rehacer"},fullscreen:{tip:"Pantalla completa"},left:{tip:"Izquierda"},center:{tip:"Centro"},right:{tip:"Derecha"},justify:{tip:"Justificar"},removeFormat:{tip:"Remover formato"}},fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"}},on:{input:e.onChange},model:{value:e.relato,callback:function(t){e.relato=t},expression:"relato"}})],1)])},y=[],x=a("04ef"),E=a.n(x),M={props:["actores","demandados"],name:"ResumenCaso",data:function(){return{relato:null}},methods:{onChange:function(){this.relato=E()(this.relato)}}},q=M,_=(a("c32c"),Object(v["a"])(q,C,y,!1,null,null,null)),k=_.exports,j=a("b628"),S=a("2a19"),I={name:"AltaCasos",props:["JuzgadoProp","TipoCasoProp","ActoresProp","DemandadosProp","editarCaso","IdCaso"],components:{TiposCaso:b,StepPersona:g["a"],ResumenCaso:k,Loading:m["a"]},data:function(){return{IdEstudio:"",checkEnviarDatos:!1,stepActual:"competencia",form_actores:!1,rolPrimario:"",decisiones:{competencia:"",idcompetencia:0,idnominacion:0,subcompetencia:"",actores:[],demandados:[]},juzgados:[],TiposCaso:[],categorias:{},ParamsJuzgados:c,ParamsTipoCaso:r["a"],siguiente_deshabilitado:!0,editar:!1,IdOrigen:"",origenes:[],origenesRespaldo:[],origenesModel:"",persona:{},index:0,Competencias:[],Nominaciones:[],FormActores:{NoJuridica:["Apellidos","Nombres","Documento","Telefonos","Domicilio"],Juridica:["Nombres","CUIT","Telefonos","Domicilio"],MasDatos:["FechaNacimiento","Sexo","EstadoCivil","Oficio"]},tiposCaso:[],tipoCaso:{},estados:[]}},created:function(){var e=this;this.IdEstudio=j["a"].UsuarioLogueado.IdEstudio,l["a"].Get("/competencias",{},(function(t){t.Error?S["a"].create(t.Error):e.Competencias=t}))},mounted:function(){this.editarCaso&&(this.decisiones.competencia=this.JuzgadoProp,this.decisiones.subcompetencia=this.TipoCasoProp)},methods:{seleccionarJuzgados:function(e){var t=this;this.nullEstados=!1,this.decisiones.idJuzgado=e.IdJuzgado,this.Nominaciones=[];var a=[];a.push(this.decisiones.idJuzgado),l["a"].Get("/nominaciones?IdsJuzgado=".concat(JSON.stringify(a),"&IncluyeBajas=N"),{},(function(e){e.Error?S["a"].create(e.Error):t.Nominaciones=e[t.decisiones.idJuzgado]})),l["a"].Get("/estado-ambito-gestion/estados-juzgado?id=".concat(e.IdJuzgado),{},(function(e){e.Error?S["a"].create(e.Error):t.estados=e.EstadoAmbitoGestion?e.EstadoAmbitoGestion:"Sin estados"})),l["a"].Get("/origenes",{},(function(e){e.Error?S["a"].create(e.Error):Object.keys(e).forEach((function(a){t.origenes.push(e[a].Origen),t.origenesRespaldo.push(e[a])}))}))},seleccionarModoGestion:function(e){var t=this,a=this.tipoCaso.IdTipoCaso;this.juzgados=[],l["a"].Get("/tipos-caso/".concat(a,"/juzgados"),{},(function(a){a.Error||a.Juzgados.forEach((function(a){a.ModoGestion===e.toString()&&t.juzgados.push(a)}))}))},guardarEstado:function(e){this.decisiones.EstadoAmbitoGestion=e},guardarOrigen:function(){var e=this;this.origenesRespaldo.forEach((function(t){t.Origen===e.origenesModel&&(e.IdOrigen=t.IdOrigen)}))},cargarNominaciones:function(){this.Competencias.forEach((function(e){}))},seleccionar_competencia:function(e){var t=this;this.decisiones={competencia:"",idcompetencia:0,idnominacion:0,subcompetencia:"",actores:[],demandados:[]},this.TiposCaso=[],this.decisiones.competencia=e.Competencia,this.decisiones.idcompetencia=e.IdCompetencia,Object.entries(e.TiposCaso).forEach((function(e){var a=s()(e,2),o=a[0],i=a[1];if("A"===i.Estado){var n={IdTipoCaso:o,TipoCaso:i.TipoCaso};t.TiposCaso.push(n)}})),this.deberia_estar_deshabilitado()},seleccionar_nominacion:function(e){this.decisiones.idnominacion=e},deberia_estar_deshabilitado:function(){this.siguiente_deshabilitado=""===this.decisiones.competencia},seleccionar_subcompetencia:function(e){this.decisiones.subcompetencia=e.TipoCaso,this.tipoCaso=e},set_persona:function(e){var t=this;this.editar?"actor"===this.rolPrimario?this.decisiones.actores[this.index]=e:this.decisiones.demandados[this.index]=e:(e.Parametros.forEach((function(e){t.categorias[e.Categoria]||(t.categorias[e.Categoria]=[]),t.categorias[e.Categoria].push(e)})),e.Categorias=this.categorias,this.categorias={},"actor"===this.rolPrimario?(e.Observaciones="Actor",console.log(e),this.decisiones.actores.push(e)):(e.Observaciones="Demandado",this.decisiones.demandados.push(e))),this.persona={},this.editar=!1},editarPersona:function(e,t,a){this.rolPrimario="a"===a?"actor":"demandado",this.index=e,this.editar=!0,this.persona=t},borrarPersona:function(e,t){"a"===t?this.decisiones.actores.splice(e,1):this.decisiones.demandados.splice(e,1)},enviar_datos:function(e){var t=this;if(!this.checkEnviarDatos){this.checkEnviarDatos=e;var a=[],o=[],i=!0,n="";o=this.decisiones.actores.concat(this.decisiones.demandados),o.forEach((function(e){var t=[];e.Parametros.forEach((function(e){var a={Descripcion:e.Descripcion,TipoDato:e.TipoDato,Parametro:e.Parametro,Obligatorio:e.Obligatorio,Valor:e.Valor};t.push(a)}));var o={Nombres:e.Nombres,Apellidos:e.Apellidos,Domicilio:e.Domicilio,Email:e.Email,TipoPersona:"S"===e.EsJuridica?"J":"F",Documento:e.Documento,CUIT:e.CUIT,Observaciones:e.Observaciones,Telefonos:e.Telefonos,EsPrincipal:!0===i?"S":"N",Parametros:t};i&&(n=(o.Apellidos?o.Apellidos+", ":"")+o.Nombres,i=!1),a.push(o)}));var s={IdCompetencia:this.decisiones.idcompetencia,IdNominacion:this.decisiones.idnominacion,IdTipoCaso:this.tipoCaso.IdTipoCaso,IdJuzgado:this.decisiones.idJuzgado,IdEstadoAmbitoGestion:this.decisiones.EstadoAmbitoGestion.IdEstadoAmbitoGestion?this.decisiones.EstadoAmbitoGestion.IdEstadoAmbitoGestion:null,IdEstadoCaso:"",IdOrigen:this.IdOrigen,Caratula:n,NroExpediente:"",Carpeta:"",Observaciones:"",PersonasCaso:a};S["a"].create(this.editarCaso),l["a"].Post("/casos",s,(function(e){e.Error?(t.checkEnviarDatos=!1,S["a"].create(e.Error)):t.$router.push("/Caso?id=".concat(e.IdCaso))}))}}}},P=I,A=Object(v["a"])(P,o,i,!1,null,null,null);t["default"]=A.exports},e209:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"bg-transparent"},[e.loading?a("div",[a("Loading")],1):a("div",[0===e.buscarCaso.length?a("div",{staticClass:"column full-width items-center justify-center text-center",staticStyle:{"margin-top":"50%"}},[a("q-icon",{staticClass:"q-mb-md",attrs:{name:"sentiment_dissatisfied",size:"lg",color:"teal"}}),a("span",{staticClass:"text-teal text-bold text-subtitle1 opacity-9"},[e._v("\n            Parece que aún no hay casos en los que estes participando\n          ")])],1):e._e(),e._l(e.buscarCaso,(function(t){return a("div",{key:t.IdCaso},[a("div",{staticClass:"filas__container q-banner q-mb-md"},[a("div",{staticClass:"row filas_ relative-position"},[a("div",{staticClass:"q-pt-sm column full-width",on:{click:function(a){return e.abrirCaso(t.IdCaso)}}},[a("span",{staticClass:"q-subheading",staticStyle:{color:"#1B43F0"}},[e._v(e._s(e.caratula(t.Caratula)))]),a("span",{staticClass:"text-overline text-grey-14"},[e._v("\n                  "+e._s(t.NroExpediente||"Sin expediente")+"\n                ")])]),a("q-separator"),a("div",{staticClass:"full-width row"},[a("div",{staticClass:"col-6 column text-start q-px-md q-py-sm"},[a("span",{staticClass:"text-caption text-grey-14"},[e._v("\n                    Origen\n                  ")]),a("span",{staticClass:"text-subtitle2"},[e._v("\n                    "+e._s(t.Origen||"···")+"\n                  ")])]),a("div",{staticClass:"col-6 column text-start q-px-md q-py-sm"},[a("span",{staticClass:"text-caption text-grey-14"},[e._v("\n                    Tipo de Caso\n                  ")]),a("span",{staticClass:"text-subtitle2"},[e._v("\n                    "+e._s(t.TipoCaso)+"\n                  ")])]),a("div",{staticClass:"col-6 column text-start q-px-md q-py-xs"},[a("span",{staticClass:"text-caption text-grey-14"},[e._v("\n                    Gestión\n                  ")]),a("span",{staticClass:"text-subtitle2"},[e._v("\n                    "+e._s(t.Juzgado)+"\n                  ")])]),a("div",{staticClass:"col-6 column text-start q-px-md q-py-xs"},[a("span",{staticClass:"text-caption text-grey-14 row"},[e._v("\n                    Estado de Gestión\n                  ")]),a("span",{staticClass:"text-subtitle2"},[e._v("\n                    "+e._s(t.EstadoAmbitoGestion||"···")+"\n                  ")]),a("span",{staticStyle:{"font-size":"10px",color:"#1B43F0"}},[e._v(e._s(e.diasCambioEstado(t.FechaEstado)))])]),a("div",{staticClass:"col-6 column text-start q-px-md q-py-sm"},[a("span",{staticClass:"text-caption text-grey-14"},[e._v("\n                    Nominación\n                  ")]),a("span",{staticClass:"text-subtitle2"},[e._v("\n                    "+e._s(e.nominacion(t.Nominacion))+"\n                  ")])]),a("div",{staticClass:"col-6 column text-start q-px-md q-py-xs"},[a("span",{staticClass:"text-caption text-grey-14"},[e._v("\n                    Estado del Caso\n                  ")]),a("span",{staticClass:"text-subtitle2"},[e._v("\n                    "+e._s(t.EstadoCaso?t.EstadoCaso:"···")+"\n                  ")])]),a("q-separator"),a("div",{staticClass:"text-caption text-center text-grey-9 q-py-sm full-width"},[e._v("\n                  A definir que va aqui\n                ")])],1)],1)])])}))],2)])])},i=[],n=(a("6762"),a("2fdb"),a("20d6"),a("9523")),s=a.n(n),r=(a("ac6a"),a("cadf"),a("06db"),a("456d"),a("28a5"),a("8daa")),c=a("b628"),l=a("3a5e"),d=a("2a19"),u={components:{Loading:l["a"]},name:"GrillaCasos",data:function(){return{casos:[],casosAux:[],casosTodos:[],casosSinTel:[],casoCompartido:{},show:{},busqueda:"",tipoBusqueda:"t",estado:"A",verAlta:!0,verArchivados:!1,noHayMasCasos:!1,modo:"casos__grilla",loading:!0,objetivos:[],idCasos:[],filtros:!1,orden:!1,agrupar:!1,verId:!1,verTipoCaso:!0,verEstado:!1,verOrigen:!0,verEstadoAmbitoGestion:!0,verAmbito:!0,verNominacion:!0,verActivos:!0,verPendientes:!0,verFinalizados:!1,verSinTel:!1,selectAll:!1,ModalMensaje:!1,CasosMensaje:{},estadoCaso:"AP",TiposCaso:[],Origenes:[],Estados:[],AmbitosGestion:[],Nominaciones:[],TipoCaso:["Todos"],Origen:["Todos"],EstadoAmbitoGestion:["Todos"],Ambito:["Todos"],Nominacion:["Todos"],modalComparticiones:!1,EstadosTodos:[]}},created:function(){var e=this,t=c["a"].UsuarioLogueado.Usuario;r["a"].Get("/casos/buscar-cliente",{Cadena:t},(function(t){t.Error||(t.forEach((function(t){e.idCasos.push(t.IdCaso);try{t.PersonasCaso=JSON.parse(t.PersonasCaso)}catch(o){console.log(o),t.PersonasCaso=[]}t.Comparticiones=JSON.parse(t.Comparticiones),t.model=!1,e.casos.push(t),e.casosTodos.push(t);var a=!1;t.PersonasCaso.forEach((function(e){e.Telefonos&&(a=!0)})),a||e.casosSinTel.push(t)})),e.casos=e.casos.sort((function(e,t){return e.FechaAlta<t.FechaAlta?1:e.FechaAlta>t.FechaAlta?-1:0}))),e.loading=!1,e.onLoad(0,(function(){}))}))},computed:{opcionesEstados:function(){var e=[];return this.Estados&&this.Estados.length&&(e=this.Estados,e.push("Sin estado","Todos")),e},opcionesTiposCaso:function(){var e=[];return this.TiposCaso&&this.TiposCaso.length&&(e=this.TiposCaso,e.push("Todos")),e},opcionesOrigenes:function(){var e=[];return this.Origenes&&this.Origenes.length&&(e=this.Origenes,e.push("Sin origen","Todos")),e},opcionesAmbitosGestion:function(){var e=[];return this.AmbitosGestion&&this.AmbitosGestion.length&&(e=this.AmbitosGestion,e.push("Todos")),e},opcionesNominaciones:function(){var e=[];return this.Nominaciones&&this.Nominaciones.length&&(e=this.Nominaciones,e.push("Sin nominacion","Todos")),e},buscarCaso:function(){var e=this,t=this.casos.filter((function(t){return t.Estado===e.estado||"T"===e.estado}));t=this.filtrarDatos(t),t.forEach((function(e){if(e.Caratula){var t=[];if(t=e.Caratula.split(" "),t.indexOf(",")>=0){var a=t.indexOf(","),o=t[a-1];t.splice(a,1),t.splice(a-1,0,o+",")}e.Caratula=t.map((function(e){return e?e[0].toUpperCase()+e.slice(1).toLowerCase():""})).join(" ")}}));var a={};t=t.filter((function(e){var t=!a[e.IdCaso];return a[e.IdCaso]=!0,t}));var o=[];switch(this.estadoCaso){case"T":o=t;break;case"AP":t.forEach((function(e){"Finalizado"!==e.EstadoCaso&&o.push(e)}));break;case"PF":t.forEach((function(e){"Finalizado"!==e.EstadoCaso&&"Cliente pendiente"!==e.EstadoCaso||o.push(e)}));break;case"AF":t.forEach((function(e){"Cliente pendiente"!==e.EstadoCaso&&o.push(e)}));break;case"A":t.forEach((function(e){"Finalizado"!==e.EstadoCaso&&"Cliente pendiente"!==e.EstadoCaso&&o.push(e)}));break;case"P":t.forEach((function(e){"Cliente pendiente"===e.EstadoCaso&&o.push(e)}));break;case"F":t.forEach((function(e){"Finalizado"===e.EstadoCaso&&o.push(e)}));break}if(this.agrupar&&0!==Object.keys(this.EstadosTodos).length){var i=[],n={};this.AmbitosGestion.forEach((function(e){n[e]=[],n[e].push({Nulo:[],Orden:100})})),n["Nulo"]=[],n["Nulo"].push({Nulo:[],Orden:100}),this.EstadosTodos.forEach((function(e){var t;e.EstadoAmbitoGestion&&n[e.Juzgado].push((t={},s()(t,e.EstadoAmbitoGestion,[]),s()(t,"Orden",e.Orden),t))})),this.casos.forEach((function(e){var t=n[e.Juzgado?e.Juzgado:"Nulo"].findIndex((function(t){return t[e.EstadoAmbitoGestion]})),a=n[e.Juzgado?e.Juzgado:"Nulo"].findIndex((function(e){return e["Nulo"]}));t>=0?n[e.Juzgado?e.Juzgado:"Nulo"][t][e.EstadoAmbitoGestion].push(e):e.EstadoAmbitoGestion||n[e.Juzgado?e.Juzgado:"Nulo"][a]["Nulo"].push(e)})),this.AmbitosGestion.forEach((function(e){n[e].sort((function(e,t){return e.Orden-t.Orden})),n[e].forEach((function(e){var t=Object.keys(e).filter((function(e){return"Orden"!==e}))[0];e[t].sort((function(e,t){return new Date(t.FechaEstado).getTime()>new Date(e.FechaEstado).getTime()?1:-1}));for(var a=e[t].length-1;a>=0;a--)e[t].indexOf(e[t][a])!==a&&e[t].splice(a,1);i=i.concat(e[t])}))})),n["Nulo"].forEach((function(e){var t=Object.keys(e).filter((function(e){return"Orden"!==e}))[0];e[t].sort((function(e,t){return new Date(t.FechaEstado).getTime()>new Date(e.FechaEstado).getTime()?1:-1}));for(var a=e[t].length-1;a>=0;a--)e[t].indexOf(e[t][a])!==a&&e[t].splice(a,1);i=i.concat(e[t])}));for(var r=i.length-1;r>=0;r--)i.indexOf(i[r])!==r&&i.splice(r,1);return this.filtrarDatos(i)}return o}},watch:{busqueda:function(){this.casos=[],this.casosTodos=[],this.casosSinTel=[],this.loading=!0,this.onLoad(0,(function(){}))},orden:function(){this.orden?this.casos=this.casos.sort((function(e,t){return e.Caratula.toLowerCase()>t.Caratula.toLowerCase()?1:e.Caratula.toLowerCase()<t.Caratula.toLowerCase()?-1:0})):this.casos=this.casos.sort((function(e,t){return e.FechaAlta<t.FechaAlta?1:e.FechaAlta>t.FechaAlta?-1:0}))},selectAll:function(){var e=this;this.buscarCaso.forEach((function(t){t.model=e.selectAll,e.selectAll?e.CasosMensaje[t.IdCaso]=t:delete e.CasosMensaje[t.IdCaso]}))}},methods:{onLoad:function(e,t){var a=this;r["a"].Get("/casos/buscar",{Offset:this.casosTodos.length,Cadena:this.busqueda,Tipo:this.tipoBusqueda.toUpperCase()},(function(e){e.Error||(e.forEach((function(e){try{e.PersonasCaso=JSON.parse(e.PersonasCaso)}catch(o){console.log(o),e.PersonasCaso=[]}e.Comparticiones=JSON.parse(e.Comparticiones),e.model=!1,a.casos.push(e),a.casosTodos.push(e);var t=!1;e.PersonasCaso.forEach((function(e){e.Telefonos&&(t=!0)})),t||a.casosSinTel.push(e)})),a.filtrarCasosSinTel(),a.casos=a.casos.sort((function(e,t){return e.FechaAlta<t.FechaAlta?1:e.FechaAlta>t.FechaAlta?-1:0})));for(var o=a.casos.length-1;o>=0;o--)a.casos.indexOf(a.casos[o])!==o&&a.casos.splice(o,1);for(var i=a.casosTodos.length-1;i>=0;i--)a.casosTodos.indexOf(a.casos[i])!==i&&a.casosTodos.splice(i,1);a.loading=!1,e.length>0&&a.onLoad(0,(function(){})),a.noHayMasCasos=0===e.length,t()}))},abrirCaso:function(e){this.$router.push({path:"/Caso?id=".concat(e)})},filtrarArchivados:function(){this.verAlta&&this.verArchivados?this.estado="T":this.verArchivados?this.estado="R":(this.verAlta,this.estado="A")},filtrar:function(){switch(!0){case this.verActivos&&this.verPendientes&&this.verFinalizados:this.estadoCaso="T";break;case this.verActivos&&this.verPendientes&&!this.verFinalizados:this.estadoCaso="AP";break;case this.verActivos&&!this.verPendientes&&this.verFinalizados:this.estadoCaso="AF";break;case!this.verActivos&&this.verPendientes&&this.verFinalizados:this.estadoCaso="PF";break;case this.verActivos&&!this.verPendientes&&!this.verFinalizados:this.estadoCaso="A";break;case!this.verActivos&&this.verPendientes&&!this.verFinalizados:this.estadoCaso="P";break;case!this.verActivos&&!this.verPendientes&&this.verFinalizados:this.estadoCaso="F";break;case!this.verActivos&&!this.verPendientes&&!this.verFinalizados:this.estadoCaso="T";break}},filtrarDatos:function(e){var t=e;return t=this.filtrarTipoCaso(t),t=this.filtrarEstadoAmbitoGestion(t),t=this.filtrarOrigen(t),t=this.filtrarAmbito(t),t=this.filtrarNominacion(t),t},filtrarTipoCaso:function(e){var t=this;if(0!==this.TipoCaso.length&&"Todos"!==this.TipoCaso[this.TipoCaso.length-1]||(this.TipoCaso=["Todos"]),this.TipoCaso.length>1&&this.TipoCaso.includes("Todos")){var a=this.TipoCaso.indexOf("Todos");this.TipoCaso.splice(a,1)}return this.TipoCaso.includes("Todos")||(e=e.filter((function(e){return t.TipoCaso.includes(e.TipoCaso)}))),e},filtrarEstadoAmbitoGestion:function(e){var t=this;if(0!==this.EstadoAmbitoGestion.length&&"Todos"!==this.EstadoAmbitoGestion[this.EstadoAmbitoGestion.length-1]||(this.EstadoAmbitoGestion=["Todos"]),this.EstadoAmbitoGestion.length>1&&this.EstadoAmbitoGestion.includes("Todos")){var a=this.EstadoAmbitoGestion.indexOf("Todos");this.EstadoAmbitoGestion.splice(a,1)}return this.EstadoAmbitoGestion.includes("Todos")||(e=this.EstadoAmbitoGestion.includes("Sin estado")?e.filter((function(e){return t.EstadoAmbitoGestion.includes(e.EstadoAmbitoGestion)||!e.EstadoAmbitoGestion})):e.filter((function(e){return t.EstadoAmbitoGestion.includes(e.EstadoAmbitoGestion)}))),e},filtrarOrigen:function(e){var t=this;if(0!==this.Origen.length&&"Todos"!==this.Origen[this.Origen.length-1]||(this.Origen=["Todos"]),this.Origen.length>1&&this.Origen.includes("Todos")){var a=this.Origen.indexOf("Todos");this.Origen.splice(a,1)}return this.Origen.includes("Todos")||(e=this.Origen.includes("Sin origen")?e.filter((function(e){return t.Origen.includes(e.Origen)||!e.Origen})):e.filter((function(e){return t.Origen.includes(e.Origen)}))),e},filtrarAmbito:function(e){var t=this;if(0!==this.Ambito.length&&"Todos"!==this.Ambito[this.Ambito.length-1]||(this.Ambito=["Todos"]),this.Ambito.length>1&&this.Ambito.includes("Todos")){var a=this.Ambito.indexOf("Todos");this.Ambito.splice(a,1)}return this.Ambito.includes("Todos")||(e=e.filter((function(e){return t.Ambito.includes(e.Juzgado)}))),e},filtrarNominacion:function(e){var t=this;if(0!==this.Nominacion.length&&"Todos"!==this.Nominacion[this.Nominacion.length-1]||(this.Nominacion=["Todos"]),this.Nominacion.length>1&&this.Nominacion.includes("Todos")){var a=this.Nominacion.indexOf("Todos");this.Nominacion.splice(a,1)}return this.Nominacion.includes("Todos")||(e=this.Nominacion.includes("Sin nominacion")?e.filter((function(e){return t.filtroNom(e.Nominacion)||!e.Nominacion||"Sin nom"===e.Nominacion})):e.filter((function(e){return t.filtroNom(e.Nominacion)}))),e},filtroNom:function(e){return!!e&&(isNaN(parseInt(e[0]))?this.Nominacion.includes(e):0===parseInt(e[0])?this.Nominacion.includes(e)||this.Nominacion.includes(e.slice(0,-1)):this.Nominacion.includes(e[0]+"°"))},diasCambioEstado:function(e){if(!e)return"No hay un estado asignado.";var t=new Date,a=new Date,o=e.split("-")[0],i=e.split("-")[1]-1,n=e.split("-")[2].split(" ")[0]-1;t.setMonth(i),t.setFullYear(o),t.setDate(n);var s=Math.ceil((t.getTime()-a.getTime())/864e5)+1;return"".concat(-1*s,-1*s!==1?" días":" día")},filtrarCasosSinTel:function(){this.verSinTel?this.casos=this.casosSinTel:this.casos=this.casosTodos},verComparticiones:function(e){e.Comparticiones&&(this.casoCompartido=e,this.modalComparticiones=!0)},eliminarComparticiones:function(e,t){var a=this,o=this.casos.findIndex((function(e){return e.IdCaso===t}));if(o>0){var i=[];e.forEach((function(e){var t=a.casos.Comparticiones.EstudiosDestino.findIndex((function(t){return t.IdEstudio===e}));t>0&&i.push(t)})),i.length>0&&i.forEach((function(e){a.casos.Comparticiones.EstudiosDestino.splice(e,0)}))}},casosMensajeGlobal:function(){var e=this,t=Object.keys(this.CasosMensaje),a=[];return t.forEach((function(t){var o=!1;e.CasosMensaje[t].PersonasCaso.forEach((function(e){e.Telefonos&&(o=!0)})),o&&a.push(e.CasosMensaje[t])})),a.length<t.length&&this.ModalMensaje?(d["a"].create("Algunos de los casos seleccionados no tienen telefonos asociados."),a):a},mensajeEnviado:function(){this.selectAll=!1,this.CasosMensaje=[],this.casos.forEach((function(e){e.model=!1})),this.ModalMensaje=!1},showSelect:function(e){var t="select"+e;this.show[e]?(this.$refs[t].hidePopup(),this.show[e]=!1):(this.$refs[t].showPopup(),this.show[e]=!0)},showFiltros:function(){this.filtros?this.$refs.expansionFiltros.hide():this.$refs.expansionFiltros.show(),this.filtros=!this.filtros},nominacion:function(e){var t={0:"Pendiente",1:"I",2:"II",3:"III",4:"IV",5:"V",6:"VI",7:"VII",8:"VIII",9:"IX"},a=e?e.slice(0,1):"-";return t[a]?t[a]:"···"},caratula:function(e){return e?e.length>25?e.slice(0,23)+"...":e:"Sin Caratula"}}},m=u,p=(a("ad55"),a("2877")),h=Object(p["a"])(m,o,i,!1,null,null,null);t["a"]=h.exports},e82e:function(e,t,a){},ee9f:function(e,t,a){},fde3:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-card",{staticStyle:{"min-width":"400px"}},[a("q-item",{staticStyle:{"background-color":"black"}},[a("span",{staticClass:"q-subheading",staticStyle:{color:"white"}},[e._v(e._s(e.editar?"Editar":"Nuevo")+" "+e._s(e.mediador?"Contacto":"Mediador"))])]),a("div",{staticStyle:{margin:"15px 15px 15px 15px"}},[e.mediador?e._e():a("q-input",{attrs:{label:"Apellidos"},model:{value:e.datos.Apellidos,callback:function(t){e.$set(e.datos,"Apellidos",t)},expression:"datos.Apellidos"}}),a("q-input",{attrs:{label:e.mediador?"Apellido y Nombre":"Nombres"},model:{value:e.datos.Nombres,callback:function(t){e.$set(e.datos,"Nombres",t)},expression:"datos.Nombres"}}),e.mediador?a("q-input",{attrs:{label:"Registro"},model:{value:e.datos.Registro,callback:function(t){e.$set(e.datos,"Registro",t)},expression:"datos.Registro"}}):e._e(),e.mediador?a("q-input",{attrs:{label:"MP"},model:{value:e.datos.MP,callback:function(t){e.$set(e.datos,"MP",t)},expression:"datos.MP"}}):e._e(),a("q-input",{attrs:{label:"Telefono",type:"tel"},model:{value:e.datos.Telefono,callback:function(t){e.$set(e.datos,"Telefono",t)},expression:"datos.Telefono"}}),a("q-input",{attrs:{label:"Email",type:"email"},model:{value:e.datos.Email,callback:function(t){e.$set(e.datos,"Email",t)},expression:"datos.Email"}}),e.mediador?e._e():a("q-select",{attrs:{label:"Tipo",options:e.opcionesTipo},model:{value:e.Tipo,callback:function(t){e.Tipo=t},expression:"Tipo"}}),a("div",{staticStyle:{"padding-top":"30px","text-align":"right"}},[a("q-btn",{attrs:{color:"primary"},on:{click:function(t){e.editar?e.editarContacto():e.altaContacto()}}},[e._v("Guardar")]),a("q-btn",{attrs:{flat:""},on:{click:function(t){return e.$emit("cerrar")}}},[e._v("Cancelar")])],1)],1)],1)},i=[],n=(a("f559"),a("a481"),a("8daa")),s=a("2a19"),r={props:["editar","datosEditar","mediador"],name:"ModalContacto",data:function(){return{datos:{Apellidos:"",Nombres:"",Telefono:"",Email:"",Registro:"",MP:"",Tipo:"A"},opcionesTipo:[{label:"Abogado",value:"A"},{label:"Medico",value:"M"},{label:"Proveedor",value:"P"},{label:"Otros",value:"O"}],Tipo:{label:"Abogado",value:"A"}}},created:function(){if(this.editar){var e=this.datosEditar;if(this.mediador)this.datos={IdContacto:e.IdContacto,Nombres:e.Contacto,Telefono:e.Telefono,Email:e.Email,Registro:e.Registro,MP:e.MP};else{var t=e.Contacto.indexOf(",");this.datos={IdContacto:e.IdContacto,Apellidos:e.Contacto.slice(0,t),Nombres:e.Contacto.slice(t+2),Telefono:e.Telefono,Email:e.Email,Tipo:e.Tipo}}this.Tipo=this.opcionesTipo.filter((function(t){return t.value===e.Tipo}))[0]}},methods:{altaContacto:function(){var e=this;if(this.mediador){if(!this.datos.Nombres)return void s["a"].create("Se debe ingresar un nombre.");if(this.datos.Telefono&&!this.validarTelefono(this.datos.Telefono))return void s["a"].create("Ingrese el telefono correctamente.");n["a"].Post("/mediadores/alta-contacto",this.datos,(function(t){t.Error?s["a"].create(t.Error):(e.datos.IdContacto=t.IdMediador,e.$emit("altaContacto",e.datos))}))}else this.datos.Tipo=this.Tipo.value,this.datos.Apellidos&&this.datos.Nombres?n["a"].Post("/contactos/alta-contacto",this.datos,(function(t){t.Error?s["a"].create(t.Error):(e.datos.IdContacto=t.IdContacto,e.$emit("altaContacto",e.datos))})):s["a"].create("Se debe ingresar nombre y apellido.")},editarContacto:function(){var e=this;if(this.mediador){if(!this.datos.Nombres)return void s["a"].create("Se debe ingresar un nombre.");if(this.datos.Telefono&&!this.validarTelefono(this.datos.Telefono))return void s["a"].create("Ingrese el telefono correctamente.");this.datos.id=this.datos.IdContacto,n["a"].Post("/mediadores/editar-contacto",this.datos,(function(t){t.Error?s["a"].create(t.Error):e.$emit("editarContacto",e.datos)}))}else this.datos.Tipo=this.Tipo.value,this.datos.Apellidos&&this.datos.Nombres?n["a"].Post("/contactos/editar-contacto",this.datos,(function(t){t.Error?s["a"].create(t.Error):e.$emit("editarContacto",e.datos)})):s["a"].create("Se debe ingresar nombre y apellido.")},validarTelefono:function(e){switch(e=e.replace(/[- +]/g,""),!0){case e.startsWith("54")&&12===e.length:return!0;case!e.startsWith("54")&&10===e.length:return!0;default:return!1}}}},c=r,l=a("2877"),d=Object(l["a"])(c,o,i,!1,null,null,null);t["a"]=d.exports}}]);