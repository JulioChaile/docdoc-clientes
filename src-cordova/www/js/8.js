(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"08b3":function(t,a,s){},2033:function(t,a,s){"use strict";var o=s("a003"),e=s.n(o);e.a},"65da":function(t,a,s){"use strict";s.r(a);var o=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("q-page",[s("q-input",{staticClass:"busqueda-input shadow-3",attrs:{outlined:"",rounded:"","label-color":"grey-2",color:"grey-4",debounce:400,placeholder:"Buscar"},on:{change:function(a){return t.buscarCaso(1)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"search"}})]},proxy:!0},{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{color:"positive",name:"add_circle_outline",size:"sm"},on:{click:function(a){t.modalAlta=!0}}},[s("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[t._v("Agregar Caso")])],1),s("q-icon",{staticClass:"cursor-pointer",attrs:{color:"negative",name:"explore",size:"sm"},on:{click:function(a){return t.mapaCompleto()}}},[s("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[t._v("Ver mapa completo")])],1)]},proxy:!0}]),model:{value:t.busqueda,callback:function(a){t.busqueda=a},expression:"busqueda"}}),t.loading?s("div",[s("Loading")],1):s("GrillaCasosPendientes",{attrs:{Casos:t.Casos,pag:t.pag,maxpags:t.maxpags,IdEstadoCasoPendiente:t.IdEstadoCasoPendiente,opcionesEstados:t.opcionesEstados,opcionesOrigenes:t.opcionesOrigenes,opcionesLesiones:t.opcionesLesiones},on:{filtrar:t.filtrar,page:t.buscarCaso,eliminar:function(a){return t.buscarCaso()}}}),s("q-dialog",{model:{value:t.modalAlta,callback:function(a){t.modalAlta=a},expression:"modalAlta"}},[s("AltaCasoPendiente",{attrs:{opcionesEstados:t.opcionesEstados,opcionesOrigenes:t.opcionesOrigenes,opcionesLesiones:t.opcionesLesiones},on:{cerrar:function(a){return t.buscarCaso()}}})],1)],1)},e=[],i=s("8daa"),n=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("q-card",{staticStyle:{"min-width":"400px"}},[s("q-item",{staticClass:"bg-black"},[s("span",{staticClass:"q-subheading text-h6",staticStyle:{color:"white"}},[t._v("Nuevo Caso Pendiente")])]),t.casosPendientes.length?s("div",{staticClass:"casos-pendientes-container"},[t._l(t.casosPendientes,(function(a,o){return s("div",{key:a.Documento+"-"+o,staticClass:"row justify-between text-center q-pa-lg relative-position"},[0!==o?s("q-separator",{staticClass:"absolute bg-black",staticStyle:{width:"90%",top:"0px"}}):t._e(),s("span",{staticStyle:{height:"0px",display:"block"},attrs:{id:"inicio"}}),s("span",{staticClass:"col-6 text-weight-bold text-subtitle1"},[t._v(t._s(a.Apellidos+", "+a.Nombres))]),s("span",{staticClass:"col-6 text-weight-bold text-subtitle1"},[t._v(t._s(a.Documento))]),s("q-input",{staticClass:"col-12",attrs:{label:"Domicilio",type:"text"},model:{value:a.Domicilio,callback:function(s){t.$set(a,"Domicilio",s)},expression:"c.Domicilio"}}),s("div",{staticClass:"col-6 q-pr-sm"},[s("q-input",{staticClass:"casillas",attrs:{label:"Telefono",type:"number"},model:{value:a.Telefono,callback:function(s){t.$set(a,"Telefono",s)},expression:"c.Telefono"}})],1),s("div",{staticClass:"col-6 q-pl-sm"},[s("q-select",{staticClass:"casillas",attrs:{options:t.opcionesPrioridad,label:"Prioridad","emit-value":"","map-options":""},model:{value:a.Prioridad,callback:function(s){t.$set(a,"Prioridad",s)},expression:"c.Prioridad"}})],1),s("div",{staticClass:"col-6 q-pr-sm"},[s("q-select",{staticClass:"casillas",attrs:{options:t.opcionesOrigenes,label:"Origen","emit-value":"","map-options":""},model:{value:a.IdOrigen,callback:function(s){t.$set(a,"IdOrigen",s)},expression:"c.IdOrigen"}})],1),s("div",{staticClass:"col-6 q-pl-sm"},[s("q-select",{staticClass:"casillas",attrs:{options:t.opcionesEstados,label:"Estado","emit-value":"","map-options":""},model:{value:a.IdEstadoCasoPendiente,callback:function(s){t.$set(a,"IdEstadoCasoPendiente",s)},expression:"c.IdEstadoCasoPendiente"}})],1),s("div",{staticClass:"col-6 q-pr-sm"},[s("q-select",{staticClass:"casillas",attrs:{options:t.opcionesLesiones,label:"Lesión","emit-value":"","map-options":""},model:{value:a.Lesion,callback:function(s){t.$set(a,"Lesion",s)},expression:"c.Lesion"}})],1),s("div",{staticClass:"col-6 flex justify-end items-center"},[a.Latitud?s("q-icon",{staticClass:"cursor-pointer",staticStyle:{color:"#49C00F"},attrs:{name:"where_to_vote",size:"lg"}},[s("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[t._v("Ver en el mapa")])],1):s("q-icon",{staticClass:"cursor-pointer",staticStyle:{color:"#B1000E"},attrs:{name:"location_off",size:"lg"},on:{click:function(s){return t.abrirMapa(a,o)}}},[s("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[t._v("Geolocalizar")])],1)],1)],1)})),s("span",{staticStyle:{height:"0px",display:"block"},attrs:{id:"fin"}})],2):t._e(),s("q-separator"),s("div",{staticClass:"column items-center"},[s("q-input",{staticClass:"busqueda-input shadow-3",attrs:{outlined:"",rounded:"","label-color":"grey-2",color:"grey-4",placeholder:"Ingrese el DNI para buscar en el padrón"},on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.buscar(a)}},scopedSlots:t._u([{key:"append",fn:function(){return[t.buscando?s("q-spinner",{attrs:{color:"teal",size:"sm"}}):s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"search"},on:{click:t.buscar}},[s("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[t._v("Buscar en el padrón")])],1)]},proxy:!0}]),model:{value:t.busqueda,callback:function(a){t.busqueda=a},expression:"busqueda"}}),t.casosPendientes.length&&!t.subiendo?s("q-btn",{staticStyle:{margin:"10px"},attrs:{outline:"",rounded:"","no-caps":"",color:"grey-14",label:"Cargar Casos"},on:{click:t.alta}}):t.subiendo?s("q-spinner",{staticStyle:{margin:"10px"},attrs:{color:"teal",size:"sm"}}):t._e()],1),s("q-dialog",{model:{value:t.modalMap,callback:function(a){t.modalMap=a},expression:"modalMap"}},[s("q-card",{staticClass:"full-width full-height",staticStyle:{"max-width":"800px"}},[s("MapaGeo",{attrs:{Caso:t.casoAux},on:{cerrar:function(a){t.modalMap=!1},confirmado:t.guardarGeo}})],1)],1),s("q-dialog",{model:{value:t.modalRepetidos,callback:function(a){t.modalRepetidos=a},expression:"modalRepetidos"}},[s("q-card",{staticStyle:{"max-width":"1500px"}},[s("q-item",{staticClass:"bg-black"},[s("span",{staticClass:"q-subheading text-h6",staticStyle:{color:"white"}},[t._v("Casos Repetidos")])]),s("div",{staticClass:"text-center q-mt-xs"},[s("span",{staticClass:"q-subheading"},[t._v("Este documento ya ha sido cargado en DocDoc!")])]),s("div",{staticClass:"q-mt-md flex justify-center"},[s("q-btn",{staticClass:"q-mr-xs",attrs:{push:"","no-caps":"",label:"Cargar Nuevamente",color:"positive"},on:{click:t.cargarCaso}}),s("q-btn",{staticClass:"q-ml-xs",attrs:{push:"","no-caps":"",label:"Cancelar",color:"negative"},on:{click:function(a){t.modalRepetidos=!1}}})],1),s("div",{staticClass:"text-center q-mt-lg"},[s("span",{staticClass:"text-h6 text-bold"},[t._v("Casos Pendientes")])]),s("GrillaCasosPendientes",{attrs:{Casos:t.CasosPendientesRepetidos,maxpags:1,pag:1,opcionesEstados:[]}}),s("div",{staticClass:"text-center q-mt-lg"},[s("span",{staticClass:"text-h6 text-bold"},[t._v("Casos Activos")])]),s("div",{staticClass:"row justify-center items-center"},t._l(t.CasosActivos,(function(a){return s("div",{key:a.IdCaso,staticClass:"q-pa-md col-3"},[s("div",{staticClass:"filas_container q-banner cursor-pointer full-width",on:{click:function(s){return t.abrirCaso(a.IdCaso)}}},[s("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[t._v("Ir al caso")]),s("div",{staticClass:"filas text-center"},[t._v("\n              "+t._s(a.Caratula)+"\n            ")])],1)])})),0)],1)],1)],1)},c=[],l=(s("8e6e"),s("8a81"),s("ac6a"),s("cadf"),s("06db"),s("456d"),s("9523")),r=s.n(l),d=(s("6762"),s("2fdb"),s("181b")),u=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"full-width q-pa-lg"},[t.Casos.length?s("div",{staticClass:"flex flex-center"},[s("q-pagination",{attrs:{max:t.maxpags,input:""},on:{input:function(a){return t.$emit("page",t.pag)}},model:{value:t.pag,callback:function(a){t.pag=a},expression:"pag"}})],1):t._e(),s("div",{staticClass:"row titulos_container q-banner"},[s("div",{staticClass:"col-sm-1 casilla_container"},[t._v("\n      Origen\n    ")]),s("div",{staticClass:"col-sm-2 col-xs-12 casilla_container cliente"},[t._v("\n      Cliente\n    ")]),s("div",{staticClass:"col-sm-2 casilla_container"},[t._v("\n      Domicilio\n    ")]),s("div",{staticClass:"col-sm-1 casilla_container"},[t._v("\n      Telefono\n    ")]),s("div",{staticClass:"col-sm-2 casilla_container"},[t._v("\n      Ult. Mov.\n    ")]),s("div",{staticClass:"col-sm-1 casilla_container"},[t._v("\n      Estado\n      "),s("q-select",{ref:"selectEstado",attrs:{options:t.opcionesEstadosAux,"emit-value":"","map-options":""},on:{input:function(a){return t.filtrar("Estado",t.IdEstadoCasoPendienteAux)}},model:{value:t.IdEstadoCasoPendienteAux,callback:function(a){t.IdEstadoCasoPendienteAux=a},expression:"IdEstadoCasoPendienteAux"}}),s("q-icon",{attrs:{rounded:"",color:"grey",name:"more_vert",size:"sm"},on:{click:function(a){return t.showSelect("Estado")}}},[s("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[t._v("Filtrar por Origen")])],1)],1),s("div",{staticClass:"col-sm-1 casilla_container"},[t._v("\n      Lesión\n    ")]),s("div",{staticClass:"col-sm-1 casilla_container"},[t._v("\n      Visitado\n    ")]),s("div",{staticClass:"col-sm-1 casilla_container"},[t._v("\n      Acciones\n    ")])]),0===t.Casos.length?s("p",[t._v("No hay casos que coincidan con el criterio de busqueda.")]):t._l(t.Casos,(function(a,o){return s("div",{key:a.IdCasoPendiente,staticClass:"filas_container q-banner"},[s("div",{staticClass:"row filas"},[s("div",{staticClass:"col-sm-1"},[s("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[t._v("Origen")]),t._v("\n        "+t._s(a.Origen||"No hay un origen asignado.")+"\n      ")],1),s("div",{staticClass:"col-sm-2 col-xs-12 cliente cursor-pointer column",on:{click:function(s){0!==a.IdCaso&&"0"!==a.IdCaso?t.abrirCaso(a.IdCaso):t.crearCasoActivo(a,o)}}},[s("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[t._v("Ir al caso")]),s("span",{staticClass:"q-subheading",staticStyle:{color:"#1B43F0"}},[t._v(t._s(a.Apellidos+", "+a.Nombres))]),s("span",{staticClass:"text-caption"},[t._v(t._s(t.dias(a.FechaAlta)))])],1),s("div",{staticClass:"col-sm-2"},[s("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[t._v("Domicilio")]),t._v("\n        "+t._s(a.Domicilio)+"\n      ")],1),s("div",{staticClass:"col-sm-1"},[s("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[t._v("Telefono")]),t._v("\n        "+t._s(a.Telefono||"Sin datos")+"\n      ")],1),s("div",{staticClass:"col-sm-2 cursor-pointer",on:{click:function(s){return t.editarMovimiento(a.UltimoMovimiento,a.Apellidos+", "+a.Nombres)}}},[s("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[t._v("Edita movimiento")]),t._v("\n        "+t._s(a.UltimoMovimiento?a.UltimoMovimiento.Detalle:"Sin movimientos cargados")+"\n      ")],1),s("div",{staticClass:"col-sm-1 column"},[s("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[t._v("Estado pendiente")]),t._v("\n        "+t._s(a.EstadoCasoPendiente)+"\n        "),s("span",{staticClass:"text-caption",staticStyle:{color:"#1B43F0"}},[t._v(t._s(t.dias(a.FechaEstado)))])],1),s("div",{staticClass:"col-sm-1"},[s("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[t._v("Lesión")]),t._v("\n        "+t._s(a.Lesion||"Sin datos")+"\n      ")],1),s("div",{staticClass:"col-sm-1 acciones"},[parseInt(a.Visitado)?s("q-icon",{staticStyle:{color:"#49C00F"},attrs:{name:"r_check_circle",size:"sm"},on:{click:function(s){return t.marcarVisitado(a,o,!1)}}},[s("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[t._v('Marcar como "Sin visitar"')])],1):s("q-icon",{staticStyle:{color:"#B1000E"},attrs:{name:"r_cancel",size:"sm"},on:{click:function(s){return t.marcarVisitado(a,o,!0)}}},[s("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[t._v('Marcar como "Visitado"')])],1)],1),s("div",{staticClass:"col-sm-1 col-xs-12 acciones cliente"},[a.Latitud?s("q-icon",{staticStyle:{color:"#49C00F"},attrs:{name:"where_to_vote",size:"sm"},on:{click:function(s){return t.abrirMapa(a,o)}}},[s("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[t._v("Ver en el mapa")])],1):s("q-icon",{staticStyle:{color:"#B1000E"},attrs:{name:"location_off",size:"sm"},on:{click:function(s){return t.abrirMapa(a,o)}}},[s("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[t._v("Geolocalizar")])],1),s("q-icon",{attrs:{name:"edit",size:"sm",color:"primary"},on:{click:function(s){return t.habilitarEdicion(a,o)}}},[s("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[t._v("Editar datos")])],1),s("q-icon",{attrs:{name:"check_circle_outline",size:"sm",color:"positive"},on:{click:function(s){return t.habilitarActivar(a)}}},[s("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[t._v("Activar caso")])],1),s("q-icon",{attrs:{name:"delete",size:"sm",color:"negative"},on:{click:function(s){return t.habilitarEliminar(a)}}},[s("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,0]}},[t._v("Eliminar")])],1)],1)])])})),t.Casos.length?s("div",{staticClass:"q-pa-lg flex flex-center"},[s("q-pagination",{attrs:{max:t.maxpags,input:""},on:{input:function(a){return t.$emit("page",t.pag)}},model:{value:t.pag,callback:function(a){t.pag=a},expression:"pag"}})],1):t._e(),s("q-dialog",{model:{value:t.modalMap,callback:function(a){t.modalMap=a},expression:"modalMap"}},[s("q-card",{staticClass:"full-width full-height",staticStyle:{"max-width":"800px"}},[s("MapaGeo",{attrs:{Caso:t.casoAux},on:{cerrar:function(a){t.modalMap=!1},confirmado:t.guardarGeo}})],1)],1),s("q-dialog",{model:{value:t.modalEditar,callback:function(a){t.modalEditar=a},expression:"modalEditar"}},[s("q-card",[s("div",{staticClass:"row justify-between text-center q-pa-lg relative-position"},[s("span",{staticClass:"col-6 text-weight-bold text-subtitle1"},[t._v(t._s(t.casoAux.Apellidos+", "+t.casoAux.Nombres))]),s("span",{staticClass:"col-6 text-weight-bold text-subtitle1"},[t._v(t._s(t.casoAux.Documento))]),s("q-input",{staticClass:"col-12",attrs:{label:"Domicilio",type:"text"},model:{value:t.casoAux.Domicilio,callback:function(a){t.$set(t.casoAux,"Domicilio",a)},expression:"casoAux.Domicilio"}}),s("div",{staticClass:"col-6 q-pr-sm"},[s("q-input",{staticClass:"casillas",attrs:{label:"Telefono",type:"number"},model:{value:t.casoAux.Telefono,callback:function(a){t.$set(t.casoAux,"Telefono",a)},expression:"casoAux.Telefono"}})],1),s("div",{staticClass:"col-6 q-pl-sm"},[s("q-select",{staticClass:"casillas",attrs:{options:t.opcionesPrioridad,label:"Prioridad","emit-value":"","map-options":""},model:{value:t.casoAux.Prioridad,callback:function(a){t.$set(t.casoAux,"Prioridad",a)},expression:"casoAux.Prioridad"}})],1),s("div",{staticClass:"col-6 q-pr-sm"},[s("q-select",{staticClass:"casillas",attrs:{options:t.opcionesOrigenes,label:"Origen","emit-value":"","map-options":""},model:{value:t.casoAux.IdOrigen,callback:function(a){t.$set(t.casoAux,"IdOrigen",a)},expression:"casoAux.IdOrigen"}})],1),s("div",{staticClass:"col-6 q-pl-sm"},[s("q-select",{staticClass:"casillas",attrs:{options:t.opcionesEstados,label:"Estado","emit-value":"","map-options":""},model:{value:t.casoAux.IdEstadoCasoPendiente,callback:function(a){t.$set(t.casoAux,"IdEstadoCasoPendiente",a)},expression:"casoAux.IdEstadoCasoPendiente"}})],1),s("div",{staticClass:"col-6 q-pr-sm"},[s("q-select",{staticClass:"casillas",attrs:{options:t.opcionesLesiones,label:"Lesión","emit-value":"","map-options":""},model:{value:t.casoAux.Lesion,callback:function(a){t.$set(t.casoAux,"Lesion",a)},expression:"casoAux.Lesion"}})],1),s("div",{staticClass:"col-6 flex justify-start items-center"},[s("q-checkbox",{attrs:{"true-value":1,"false-value":0,label:"Marcar como Visitado"},model:{value:t.casoAux.Visitado,callback:function(a){t.$set(t.casoAux,"Visitado",a)},expression:"casoAux.Visitado"}})],1),s("div",{staticClass:"q-mt-md col-12 flex justify-center"},[s("q-btn",{staticClass:"q-mr-xs",attrs:{push:"","no-caps":"",label:"Confirmar",color:"positive"},on:{click:function(a){t.editarCaso(),t.modalEditar=!1}}}),s("q-btn",{staticClass:"q-ml-xs",attrs:{push:"","no-caps":"",label:"Cancelar",color:"negative"},on:{click:function(a){t.modalEditar=!1}}})],1)],1)])],1),s("q-dialog",{attrs:{"prevent-close":""},model:{value:t.modalEliminar,callback:function(a){t.modalEliminar=a},expression:"modalEliminar"}},[s("q-card",{staticStyle:{padding:"1rem"}},[s("div",{staticClass:"text-center"},[s("span",[s("p",[t._v("\n            ¿Esta seguro que desea eliminar este caso?\n            "),s("br"),t._v("\n            Esta accion es permanente y tambien sera eliminado el caso asociado junto con sus movimientos, chat, personas, etc.\n          ")])]),s("div",{staticStyle:{display:"flex","justify-content":"center","margin-botton":"2rem"}},[s("q-btn",{staticStyle:{"padding-top":"0px",float:"center","margin-right":"10px"},attrs:{color:"negative",label:"Eliminar"},on:{click:function(a){return t.eliminarCaso()}}}),s("q-btn",{staticStyle:{"padding-top":"0px",float:"center"},attrs:{color:"primary",label:"Cancelar"},on:{click:function(a){t.modalEliminar=!1}}})],1)])])],1),s("q-dialog",{attrs:{"prevent-close":""},model:{value:t.modalActivar,callback:function(a){t.modalActivar=a},expression:"modalActivar"}},[s("q-card",{staticStyle:{padding:"1rem"}},[s("div",{staticClass:"text-center"},[s("span",[s("p",[t._v("\n            ¿Esta seguro que desea activar este caso?\n            "),s("br"),t._v("\n            Si lo activa el caso dejara de aparecer como caso pendiente y se visualizará en la grilla principal\n          ")])]),s("div",{staticStyle:{display:"flex","justify-content":"center","margin-botton":"2rem"}},[s("q-btn",{staticStyle:{"padding-top":"0px",float:"center","margin-right":"10px"},attrs:{color:"negative",label:"Activar"},on:{click:function(a){return t.activarCaso(t.casoAux.IdCasoPendiente,t.casoAux.IdCaso)}}}),s("q-btn",{staticStyle:{"padding-top":"0px",float:"center"},attrs:{color:"primary",label:"Cancelar"},on:{click:function(a){t.modalActivar=!1}}})],1)])])],1),s("q-dialog",{model:{value:t.subiendo,callback:function(a){t.subiendo=a},expression:"subiendo"}},[s("q-card",{staticStyle:{"min-width":"400px"}},[s("div",{staticStyle:{display:"flex","justify-content":"center","text-align":"center","margin-left":"15px","margin-right":"15px",padding:"35px"}},[t._v("\n          Espere unos instantes, se generando la vista del caso.\n          "),s("br"),t._v("\n          Esto puede tardar varios segundos.\n      ")])])],1),s("q-dialog",{attrs:{"no-backdrop-dismiss":"","no-esc-dismiss":""},model:{value:t.modalMovimiento,callback:function(a){t.modalMovimiento=a},expression:"modalMovimiento"}},[s("q-card",[s("q-item",{staticStyle:{"background-color":"black"}},[s("span",{staticClass:"q-subheading",staticStyle:{color:"white"}},[t._v("Editar Movimiento")])]),t.modalMovimiento?s("EditarMovimiento",{attrs:{movimiento:this.movimientoEditar},on:{cancelarEdicion:function(a){t.modalMovimiento=!1},edicionTerminada:function(a){t.modalMovimiento=!1}}}):t._e()],1)],1)],2)},p=[],m=(s("28a5"),s("2a19")),f=s("3b16"),v=s("c3f4");function b(t,a){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);a&&(o=o.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),s.push.apply(s,o)}return s}function h(t){for(var a=1;a<arguments.length;a++){var s=null!=arguments[a]?arguments[a]:{};a%2?b(Object(s),!0).forEach((function(a){r()(t,a,s[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(s,a))}))}return t}var C={name:"GrillaCasosPendientes",components:{MapaGeo:d["a"],EditarMovimiento:v["a"],QPagination:f["a"]},props:["Casos","maxpags","pag","IdEstadoCasoPendiente","opcionesEstados","opcionesOrigenes","opcionesLesiones"],data:function(){return{opcionesPrioridad:[{label:"Baja",value:3},{label:"Media",value:2},{label:"Alta",value:1}],casoAux:{},movimientoEditar:{},show:{},IdEstadoCasoPendienteAux:"",modalMap:!1,modalEditar:!1,modalEliminar:!1,modalMovimiento:!1,modalActivar:!1,subiendo:!1}},computed:{opcionesEstadosAux:function(){var t=this.opcionesEstados.slice(0).filter((function(t){return"TODOS"!==t.label}));return t.push({label:"Todos",value:0}),t}},methods:{dias:function(t){if(!t)return"";var a=new Date,s=new Date,o=t.split("-")[0],e=t.split("-")[1]-1,i=t.split("-")[2].split(" ")[0]-1;a.setMonth(e),a.setFullYear(o),a.setDate(i);var n=Math.ceil((a.getTime()-s.getTime())/864e5)+1;return"".concat(-1*n,-1*n!==1?" días":" día")},abrirMapa:function(t,a){t.i=a,this.casoAux=t,this.modalMap=!0},abrirCaso:function(t){console.log(t);var a=this.$router.resolve({path:"/Caso?id=".concat(t)});window.open(a.href,"_blank")},habilitarEliminar:function(t){this.casoAux=t,this.modalEliminar=!0},habilitarEdicion:function(t,a){t.i=a,this.casoAux=t,this.casoAux.IdOrigen=parseInt(this.casoAux.IdOrigen),this.casoAux.IdEstadoCasoPendiente=parseInt(this.casoAux.IdEstadoCasoPendiente),this.casoAux.Prioridad=parseInt(this.casoAux.Prioridad),this.casoAux.Visitado=t.Visitado?1:0,this.modalEditar=!0},habilitarActivar:function(t){this.casoAux=t,this.modalActivar=!0},editarCaso:function(){var t=this;i["a"].Post("/casos-pendientes/editar",{caso:JSON.stringify(this.casoAux)},(function(a){if(a.Error)m["a"].create(a.Error);else{var s=t.casoAux.i;t.Casos[s]=t.casoAux,t.casoAux={},m["a"].create("Los datos se actualizaron correctamente")}}))},eliminarCaso:function(){var t=this;i["a"].Post("/casos-pendientes/eliminar",{id:this.casoAux.IdCasoPendiente},(function(a){a.Error?m["a"].create(a.Error):(t.casoAux={},t.$emit("eliminar"),m["a"].create("El caso se elimino correctamente"))}))},guardarGeo:function(t,a){var s=this.casoAux.i;this.Casos[s].Domicilio=a,this.Casos[s]=h(h({},this.Casos[s]),t),this.casoAux.Domicilio=a,this.casoAux=h(h({},this.casoAux),t),this.modalMap=!1,this.editarCaso()},marcarVisitado:function(t,a,s){this.casoAux=t,this.casoAux.Visitado=s?1:0,this.Casos[a].Visitado=s?1:0,this.editarCaso()},crearCasoActivo:function(t,a){var s=this;this.subiendo=!0,i["a"].Post("/casos-pendientes/alta-caso-activo",{caso:JSON.stringify(t)},(function(t){t.Error?(m["a"].create(t.Error),s.subiendo=!1):(s.Casos[a].IdCaso=t.IdCaso,s.subiendo=!1,s.abrirCaso(t.IdCaso))}))},activarCaso:function(t,a){var s=this;i["a"].Post("/casos-pendientes/activar-caso",{id:t},(function(t){t.Error?m["a"].create(t.Error):(s.$emit("eliminar"),s.abrirCaso(a))}))},editarMovimiento:function(t,a){event.stopPropagation(),t&&(t.Caratula=a,this.movimientoEditar=t,this.modalMovimiento=!0)},showSelect:function(t){var a="select"+t;this.show[t]?(this.$refs[a].hidePopup(),this.show[t]=!1):(this.$refs[a].showPopup(),this.show[t]=!0)},filtrar:function(t,a){this.show[t]=!1,this.$emit("filtrar",t,a)}}},g=C,x=(s("2033"),s("2877")),q=Object(x["a"])(g,u,p,!1,null,null,null),_=q.exports,P=s("0d59");function E(t,a){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);a&&(o=o.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),s.push.apply(s,o)}return s}function y(t){for(var a=1;a<arguments.length;a++){var s=null!=arguments[a]?arguments[a]:{};a%2?E(Object(s),!0).forEach((function(a){r()(t,a,s[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):E(Object(s)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(s,a))}))}return t}var A={name:"AltaCasoPendiente",components:{MapaGeo:d["a"],GrillaCasosPendientes:_,QSpinner:P["a"]},props:["opcionesEstados","opcionesOrigenes","opcionesLesiones"],data:function(){return{busqueda:"",buscando:!1,subiendo:!1,modalMap:!1,modalRepetidos:!1,casosPendientes:[],CasosPendientesRepetidos:[],CasosActivos:[],casoAux:{},opcionesPrioridad:[{label:"Alta",value:1},{label:"Media",value:2},{label:"Baja",value:3}]}},created:function(){},methods:{buscar:function(){var t=this;this.buscando||(this.busqueda?15!==this.casosPendientes.length?(this.buscando=!0,i["a"].Get("/casos-pendientes/buscar-caso",{Documento:this.busqueda},(function(a){a.Error?m["a"].create(a.Error):a.CasosPendientes.length||a.CasosActivos.length?(t.CasosPendientesRepetidos=a.CasosPendientes,t.CasosActivos=a.CasosActivos,t.PersonaPadron=a.PersonaPadron,t.modalRepetidos=!0):(t.PersonaPadron=a.PersonaPadron,t.cargarCaso()),t.buscando=!1}))):m["a"].create("Solo se pueden cargar 15 casos a la vez."):m["a"].create("Debe ingresar un numero de documento"))},cargarCaso:function(){var t=this,a=this.casosPendientes.length,s=this.PersonaPadron.Domicilio.includes("CAPITAL")?17:22,o=["Barrio","BARRIO","B°","barrio"];o.forEach((function(a){s=t.PersonaPadron.Domicilio.includes(a)?19:s})),this.casosPendientes.push({Apellidos:this.PersonaPadron.Apellidos,Nombres:this.PersonaPadron.Nombres,Documento:this.busqueda,Telefono:"",Domicilio:this.PersonaPadron.Domicilio,Prioridad:3,IdOrigen:a?this.casosPendientes[a-1].IdOrigen:this.opcionesOrigenes[0].value,IdEstadoCasoPendiente:s,Lesion:""}),this.modalRepetidos=!1,this.busqueda="",this.scroll("fin")},alta:function(){var t=this;this.subiendo=!0;var a=JSON.stringify(this.casosPendientes);i["a"].Post("/casos-pendientes/alta",{casos:a},(function(a){if(a.length>0||a.Error){var s=[];a.length>0?a.forEach((function(a){m["a"].create("Hubo un error al subir los datos de ".concat(a.persona,": ").concat(a.error));var o=t.casosPendientes.filter((function(t){return t.Apellidos+", "+t.Nombres===a.persona}))[0];s.push(o)})):m["a"].create(a.Error),t.casosPendientes=s,t.subiendo=!1,t.scroll("inicio")}else t.casosPendientes=[],m["a"].create("Todos los datos se cargaron exitosamente."),t.$emit("cerrar")}))},scroll:function(t){this.$nextTick((function(){document.getElementById(t).scrollIntoView(!0)}))},abrirMapa:function(t,a){t.i=a,this.casoAux=t,this.modalMap=!0},guardarGeo:function(t,a){var s=this.casoAux.i;this.casosPendientes[s].Domicilio=a,this.casosPendientes[s]=y(y({},this.casosPendientes[s]),t),this.modalMap=!1},abrirCaso:function(t){var a=this.$router.resolve({path:"/Caso?id=".concat(t)});window.open(a.href,"_blank")}}},k=A,O=(s("7001"),Object(x["a"])(k,n,c,!1,null,"6f650833",null)),w=O.exports,I=s("3a5e"),S={components:{AltaCasoPendiente:w,GrillaCasosPendientes:_,Loading:I["a"]},data:function(){return{busqueda:"",Casos:[],pag:1,maxpags:5,loading:!0,modalAlta:!1,IdEstadoCasoPendiente:0,opcionesOrigenes:[],opcionesEstados:[],opcionesLesiones:[]}},created:function(){var t=this;i["a"].Get("/origenes",{},(function(a){a.Error?t.$q.notify(a.Error):t.opcionesOrigenes=a.map((function(t){if("TODOS"!==t.Origen)return{label:t.Origen,value:parseInt(t.IdOrigen)}}))})),i["a"].Get("/casos-pendientes/estados",{},(function(a){a.Error?t.$q.notify(a.Error):t.opcionesEstados=a.map((function(t){return{label:t.EstadoCasoPendiente,value:parseInt(t.IdEstadoCasoPendiente)}}))})),i["a"].Get("/casos/opciones-parametros",{},(function(a){a.forEach((function(a){"undefined"!==typeof t[a.Variable]&&(t[a.Variable]=JSON.parse(a.Opciones))}))})),this.buscarCaso()},methods:{buscarCaso:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=30*(a-1);this.pag=a,this.loading=!0,this.Casos=[],this.modalAlta=!1,i["a"].Get("/casos-pendientes",{Cadena:this.busqueda,Documento:"",Offset:s,IdEstadoCasoPendiente:this.IdEstadoCasoPendiente},(function(a){if(a.Error)t.$q.notify(a.Error);else{t.Casos=a,t.Casos.forEach((function(t){t.UltimoMovimiento=t.UltimoMovimiento?JSON.parse(t.UltimoMovimiento):null}));var s=a.length?a[0].Cant:0;t.maxpags=Math.ceil(parseInt(s)/30),t.loading=!1}}))},mapaCompleto:function(){var t=this.$router.resolve({path:"/Maps?sec=visitas"});window.open(t.href,"_blank")},filtrar:function(t,a){this.IdEstadoCasoPendiente=a,this.buscarCaso()}}},M=S,D=Object(x["a"])(M,o,e,!1,null,null,null);a["default"]=D.exports},7001:function(t,a,s){"use strict";var o=s("08b3"),e=s.n(o);e.a},a003:function(t,a,s){}}]);